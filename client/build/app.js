!function(){"use strict";function t(t,o,e,n,r,a,l){function i(t,o,e,n,r){var a;return e(function(){a=o.get("auth")}),{responseError:function(o){return 401===o.status&&(a.signout(),n.remove("profile"),n.remove("token"),r.path("/welcome")),t.reject(o)}}}i.$inject=["$q","$injector","$timeout","store","$location"],e.init({domain:"danielnitu.eu.auth0.com",clientID:"1gLOvetcrjC9GW2kEeRzEtJRJH700ia6"}),n.otherwise("/welcome"),r.state("welcome",{url:"/welcome",templateUrl:"app/components/welcome/welcome.template.html",controller:"toolbarController as toolbar"}).state("home",{url:"/home",templateUrl:"app/components/home/home.template.html",controller:"homeController as home"}).state("profile",{url:"/profile",templateUrl:"app/components/profile/profile.template.html",controller:"profileController as profile"}).state("portfolio",{url:"/portfolio",templateUrl:"app/components/portfolio/portfolio.template.html",controller:"portfolioController as portfolio"}).state("stock",{url:"/stock/:symbol/:market",templateUrl:"app/components/stock/stock.template.html",controller:"stockController as stock"}).state("news",{url:"/news/:symbol",templateUrl:"app/components/news/news.template.html",controller:"newsController as news"}).state("transactions",{url:"/transactions",templateUrl:"app/components/transactions/transactions.template.html",controller:"transactionsController as transactions"}),l.config({tokenGetter:["options",function(t){return".html"===t.url.substr(t.url.length-5)?null:window.localStorage.getItem("token").slice(1,-1)}],whiteListedDomains:["trade.boutique","localhost","jsonplaceholder.typicode.com"]}),t.theme("default").primaryPalette("blue").accentPalette("grey").warnPalette("red"),t.theme("dark-blue").backgroundPalette("blue").dark(),o.factory("redirect",i),a.interceptors.push("jwtInterceptor"),a.interceptors.push("redirect")}function o(t,o,e,n,r,a){t.$on("$locationChangeStart",function(){var t=n.get("token");t&&(r.isTokenExpired(t)||e.isAuthenticated||(document.body.classList.add("logged-in"),e.authenticate(n.get("profile"),t))),e.isAuthenticated||a.path("/welcome")})}t.$inject=["$mdThemingProvider","$provide","authProvider","$urlRouterProvider","$stateProvider","$httpProvider","jwtOptionsProvider"],o.$inject=["$rootScope","$state","auth","store","jwtHelper","$location"],angular.module("app",["auth0","angular-storage","angular-jwt","ngMaterial","ui.router","ngLetterAvatar","sidenav","profile","price","news","avatar"]).config(t).run(o)}(),function(){"use strict";function t(t,o,e,n,r,a,l){function i(o,e){n.loading(s.loading,!0),s.buyQuantity=e,s.buyPrice=(e*o).toFixed(2);var a=s.user.stock.quantity,l=r.weightedAverage(s.user.stock.price,o,a,e),i=s.user.stock.quantity+e,c=s.user.funds-(o*e).toFixed(2);r.buyStock(s.symbol,s.company,l,o,i,c,a,function(o,e){n.loading(s.loading,!1),t.$broadcast("transaction"),o?s.error=o:(s.closeDialog(),s.showToast("bought",s.buyQuantity,s.symbol,s.buyPrice.replace(/(\d)(?=(\d{3})+\.)/g,"$1,")))})}var s=this;s.stockQuantity=1,s.buyQuantity=0,s.buyPrice=0,s.symbol=a,s.company=l,s.loading=!1,s.closeDialog=n.closeDialog,s.showToast=n.showToast,s.buyStock=i,e.getPrice(s.symbol,null,function(t,o){t?s.error=t:s.stockPrice=o}),r.getStockAndFunds(s.symbol,function(t,o){t?s.error=t:s.user=o})}t.$inject=["$rootScope","$mdDialog","price","dialog","profile","passSymbol","passCompany"],angular.module("app").controller("buyDialogController",t)}(),function(){"use strict";function t(t,o,e){function n(o,e,n){t.show({locals:{passSymbol:e,passCompany:n},controller:"buyDialogController",controllerAs:"buyDialog",templateUrl:"app/components/dialog/buyDialog.template.html",parent:angular.element(document.body),targetEvent:o,clickOutsideToClose:!0,focusOnOpen:!1})}function r(o,e,n){t.show({locals:{passSymbol:e,passCompany:n},controller:"sellDialogController",controllerAs:"sellDialog",templateUrl:"app/components/dialog/sellDialog.template.html",parent:angular.element(document.body),targetEvent:o,clickOutsideToClose:!0,focusOnOpen:!1})}function a(t,e,n,r){o.show(o.simple().textContent("You "+t+" "+e+" "+n+" shares for $"+r).position("bottom right").hideDelay(5e3).toastClass("bs-toast"))}function l(){t.hide()}function i(t,o,n){e(function(){t=o},n||500)}return{showBuy:n,showSell:r,closeDialog:l,showToast:a,loading:i}}t.$inject=["$mdDialog","$mdToast","$timeout"],angular.module("app").factory("dialog",t)}(),function(){"use strict";function t(t,o,e,n,r,a){function l(o,n){var r=i.user.stock.quantity-n,l=(i.stockPrice-i.userStockPrice)*n;e.sellStock(i.symbol,a,o,n,l,r,function(e,r){e?(i.loading=!1,i.error=e):(i.closeDialog(),i.showToast("sold",n,i.symbol,(o*n).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")),t.$broadcast("transaction"))})}var i=this;i.symbol=r,i.loading=!1,i.closeDialog=n.closeDialog,i.showToast=n.showToast,i.sellStock=l,o.getPrice(i.symbol,null,function(t,o){t?i.error=t:i.stockPrice=o}),e.getStockAndFunds(i.symbol,function(t,o){t?i.error=t:(i.user=o,i.stockQuantity=i.user.stock.quantity,i.userStockPrice=i.user.stock.price)})}t.$inject=["$rootScope","price","profile","dialog","passSymbol","passCompany"],angular.module("app").controller("sellDialogController",t)}(),function(){"use strict";function t(){function t(t){return t.forEach(function(t){t.avatar=o(t.company)}),t}function o(t){var o=t.split(" ",2),e="";return o.forEach(function(t){"Inc."!==t&&(e+=t[0])}),e.toUpperCase()}return{setAvatar:t,initials:o}}angular.module("avatar",[]).factory("avatar",t)}(),function(){"use strict";function t(t){return{restrict:"A",link:function(o,e,n){e.addClass("ng-hide"),t(function(){e.removeClass("ng-hide")},n.showWithDelay||2e3)}}}t.$inject=["$timeout"],angular.module("app").directive("showWithDelay",t)}(),function(){"use strict";function t(t){function o(o,e,n){null!==e?t.get("/api/price/"+o+"/"+e).then(function(t){return n(null,t.data.price.price)},function(t){return n("Error: "+t.data.error,null)}):t.get("/api/price/"+o).then(function(t){return n(null,t.data.price.price)},function(t){return n("Error: status "+t.status,null)})}function e(o,e){t.post("/api/price/multiple",o).then(function(t){return e(null,t.data.prices)},function(t){return e("Error: status "+t.status,null)})}return{getPrice:o,getPrices:e}}t.$inject=["$http"],angular.module("price",[]).factory("price",t)}(),function(){"use strict";function t(t,o,e){function n(e){r.loading=!0,r.markets.includes(e)?t.get("/api/risefall/"+e).then(function(t){t.data.error?r.error=t.data.error:(r.error=null,r.stocks=t.data.stocks.stocks,o.setAvatar(r.stocks),r.loading=!1)}):r.error="No such market: "+e}var r=this;r.markets=["US","LSE","EURO","TMX","HKE","INDIA"],r.loading=!1,r.showSell=e.showSell,r.showBuy=e.showBuy,r.getRisersFallers=n,n("US")}t.$inject=["$http","avatar","dialog"],angular.module("app").controller("homeController",t)}(),function(){"use strict";function t(t,o,e){function n(t){e.getNews(t,function(t,o){t?r.error=t:console.log(o)})}var r=this;r.getNews=n,"news"===t.current.name?function(){e.getRandomNews(function(t,o){t?r.error=t:(r.news=[],o.data.news.forEach(function(t){if(t.news.length>1)for(var o=0;o<t.news.length;o++)r.news.push(t.news[o])}),e.shuffleNews(r.news))})}():n(o.symbol)}t.$inject=["$state","$stateParams","news"],angular.module("app").controller("newsController",t)}(),function(){"use strict";function t(t){function o(o,e){t.get("/api/news/symbol/"+o).then(function(t){e(null,t)},function(t){e(t,null)})}function e(o){t.get("/api/news/random").then(function(t){o(null,t)},function(t){o(t,null)})}function n(t){for(var o,e,n=t.length;n;)e=Math.floor(Math.random()*n--),o=t[n],t[n]=t[e],t[e]=o;return t}return{getNews:o,getRandomNews:e,shuffleNews:n}}t.$inject=["$http"],angular.module("news",[]).factory("news",t)}(),function(){"use strict";function t(t,o,e,n,r){function a(){o.get("/api/user/portfolio").then(function(t){t.data.message?s.noPortfolio=t.data.message:(s.portfolio=t.data.portfolio,s.funds=t.data.funds,l(s.portfolio),r.setAvatar(s.portfolio))})}function l(t){var o=[];t.forEach(function(t){o.push(t.symbol)}),e.getPrices(o,function(t,o){t?s.error=t:i(s.portfolio,o)})}function i(t,o){return t.forEach(function(t){o.forEach(function(o){o.symbol===t.symbol&&(t.currPrice=o.price,t.market=o.market)})}),t}var s=this;s.showSell=n.showSell,s.showBuy=n.showBuy,s.getPortfolio=a,t.$on("transaction",function(){a()}),a()}t.$inject=["$scope","$http","price","dialog","avatar"],angular.module("app").controller("portfolioController",t)}(),function(){"use strict";function t(t,o){var e=this;e.profile=o.getProfile(),o.getFunds(function(t,o){t?e.error=t:e.funds=o})}t.$inject=["$http","profile"],angular.module("app").controller("profileController",t)}(),function(){"use strict";function t(t){function o(){var t=JSON.parse(window.localStorage.getItem("profile"));return~t.name.indexOf("@")&&(t.name=t.name.split("@")[0]),t}function e(o){t.get("/api/user/").then(function(t){o(t.data.user)})}function n(o){t.get("/api/user/funds/").then(function(t){o(null,t.data.funds)},function(t){o("Error: Cannot get funds!"+t,null)})}function r(o,e){t.get("/api/user/portfolio/"+o).then(function(t){var o={stock:t.data.stock,funds:t.data.funds};e(null,o)},function(t){e("Error: status"+t.status,null,null)})}function a(o,e,n,r,a,l,i,s){var c={symbol:o,company:e,price:n,buyPrice:r,quantity:a,funds:l.toFixed(3),exists:i};t.post("/api/user/buy",c).then(function(t){s(null,t)},function(t){s(t,null)})}function l(o,e,n,r,a,l,i){var s={symbol:o,company:e,sellPrice:n,quantity:r,profit:a,sellAll:l};t.post("api/user/sell",s).then(function(t){i(null,t)},function(t){console.log(t),i(t,null)})}function i(t,o,e,n){return((t*e+o*n)/(e+n)).toFixed(3)}return{getUser:e,getStockAndFunds:r,getProfile:o,getFunds:n,buyStock:a,sellStock:l,weightedAverage:i}}t.$inject=["$http"],angular.module("profile",[]).factory("profile",t)}(),function(){"use strict";function t(t,o){function e(o){return t.get("/api/data/symbols/"+o).then(function(t){var o=[];return t.data.data.forEach(function(t){o.push(t.symbol)}),o})}function n(t){if(!t)return!1;o.transitionTo("stock",{symbol:t})}var r=this;r.queryStock=e,r.getData=n}t.$inject=["$http","$state"],angular.module("app").controller("searchController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/search/search.template.html",controller:"searchController",controllerAs:"search"}}angular.module("app").directive("search",t)}(),function(){"use strict";function t(t,o,e,n,r,a,l,i){function s(){i.getFunds(function(t,o){t&&(p.error=t),p.funds=o})}function c(){t.get("http://localhost:3000/api/news/AAPL",{skipAuthorization:!0}).then(function(t){p.message=t.data.news.symbol})}function u(){r.signout(),a.remove("profile"),a.remove("token"),p.sidenavShow=!1,document.body.classList.remove("logged-in"),o.$broadcast("userLogOut"),p.userLogged=!1,n.path("/welcome")}var p=this;p.getNews=c,p.logout=u,p.closeSidenav=l.closeSidenav,p.auth=r,p.message="",p.sidenavShow=!1,p.auth.isAuthenticated&&(p.profile=i.getProfile(),p.sidenavShow=!0,s()),e.$on("userLogIn",function(){p.profile=i.getProfile(),p.sidenavShow=!0,s()}),e.$on("transaction",function(){s()})}t.$inject=["$http","$rootScope","$scope","$location","auth","store","sidenav","profile"],angular.module("app").controller("sidenavController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/sidenav/sidenav.template.html",controller:"sidenavController",controllerAs:"sidenav"}}angular.module("app").directive("sidenav",t)}(),function(){"use strict";function t(t,o,e){function n(o){t(o||"left").toggle()}function r(o){t(o||"left").close()}return{toggleSidenav:n,closeSidenav:r}}t.$inject=["$mdSidenav","auth","store"],angular.module("sidenav",[]).factory("sidenav",t)}(),function(){"use strict";function t(t,o,e,n,r,a){var l=this;l.loading=!1,l.showBuy=e.showBuy,l.showSell=e.showSell,function(){l.loading=!0,o.get("/api/data/symbol/"+t.symbol+"/"+t.market).then(function(o){o.data.error?(l.noCompany=o.data.error,l.loading=!1):(l.company=o.data.data,n.getPrice(t.symbol,t.market||l.company.market,function(t,o){t?l.error=t:l.price=o}),r.getNews(t.symbol,function(t,o){if(t)l.newsError="Error getting news";else try{l.news=o.data.news.news}catch(t){l.newsError=t}l.loading=!1}),l.avatar=a.initials(l.company.company||t.symbol))})}()}t.$inject=["$stateParams","$http","dialog","price","news","avatar"],angular.module("app").controller("stockController",t)}(),function(){"use strict";function t(t,o,e,n,r,a,l){function i(){t.signin({authParams:{scope:"openid email"}},function(t,n){o.set("profile",t),o.set("token",n),e.path("/welcome"),document.body.classList.add("logged-in"),c.userLogged=!0,s(function(t){c.message=t.data.message,c.funds=t.data.user.funds,r.$broadcast("userLogIn")})},function(t){console.log(t)})}function s(t){a.get("api/user/").then(function(o){t(o)})}var c=this;c.login=i,c.auth=t,c.toggleSidenav=l.toggleSidenav,c.userLogged=!1,t.isAuthenticated&&(c.userLogged=!0),n.$on("userLogOut",function(){c.userLogged=!1}),n.$on("userLogIn",function(){c.userLogged=!0})}t.$inject=["auth","store","$location","$scope","$rootScope","$http","sidenav"],angular.module("app").controller("toolbarController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/toolbar/toolbar.template.html",controller:"toolbarController",controllerAs:"toolbar"}}angular.module("app").directive("toolbar",t)}(),function(){"use strict";function t(t,o){var e=this;!function(){t.get("/api/transaction/all").then(function(t){t.data.error?e.noTransactions=t.data.error:(e.transactions=t.data.transactions,o.setAvatar(e.transactions))},function(t){e.error=t})}()}t.$inject=["$http","avatar"],angular.module("app").controller("transactionsController",t)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImRpYWxvZy9idXlEaWFsb2cuY29udHJvbGxlci5qcyIsImRpYWxvZy9kaWFsb2cuc2VydmljZS5qcyIsImRpYWxvZy9zZWxsRGlhbG9nLmNvbnRyb2xsZXIuanMiLCJoZWxwZXJzL2F2YXRhci5zZXJ2aWNlLmpzIiwiaGVscGVycy9kZWxheS5kaXJlY3RpdmUuanMiLCJoZWxwZXJzL3ByaWNlLnNlcnZpY2UuanMiLCJob21lL2hvbWUuY29udHJvbGxlci5qcyIsIm5ld3MvbmV3cy5jb250cm9sbGVyLmpzIiwibmV3cy9uZXdzLnNlcnZpY2UuanMiLCJwb3J0Zm9saW8vcG9ydGZvbGlvLmNvbnRyb2xsZXIuanMiLCJwcm9maWxlL3Byb2ZpbGUuY29udHJvbGxlci5qcyIsInByb2ZpbGUvcHJvZmlsZS5zZXJ2aWNlLmpzIiwic2VhcmNoL3NlYXJjaC5jb250cm9sbGVyLmpzIiwic2VhcmNoL3NlYXJjaC5kaXJlY3RpdmUuanMiLCJzaWRlbmF2L3NpZGVuYXYuY29udHJvbGxlci5qcyIsInNpZGVuYXYvc2lkZW5hdi5kaXJlY3RpdmUuanMiLCJzaWRlbmF2L3NpZGVuYXYuc2VydmljZS5qcyIsInN0b2NrL3N0b2NrLmNvbnRyb2xsZXIuanMiLCJ0b29sYmFyL3Rvb2xiYXIuY29udHJvbGxlci5qcyIsInRvb2xiYXIvdG9vbGJhci5kaXJlY3RpdmUuanMiLCJ0cmFuc2FjdGlvbnMvdHJhbnNhY3Rpb25zLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiY29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJHByb3ZpZGUiLCJhdXRoUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJyZWRpcmVjdCIsIiRxIiwiJGluamVjdG9yIiwiJHRpbWVvdXQiLCJzdG9yZSIsIiRsb2NhdGlvbiIsImF1dGgiLCJnZXQiLCJyZXNwb25zZUVycm9yIiwicmVqZWN0aW9uIiwic3RhdHVzIiwic2lnbm91dCIsInJlbW92ZSIsInBhdGgiLCJyZWplY3QiLCJpbml0IiwiZG9tYWluIiwiY2xpZW50SUQiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImp3dE9wdGlvbnNQcm92aWRlciIsInRva2VuR2V0dGVyIiwib3B0aW9ucyIsInN1YnN0ciIsImxlbmd0aCIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzbGljZSIsIndoaXRlTGlzdGVkRG9tYWlucyIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsImRhcmsiLCJmYWN0b3J5IiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInJ1biIsIiRyb290U2NvcGUiLCIkc3RhdGUiLCJqd3RIZWxwZXIiLCIkb24iLCJ0b2tlbiIsImlzVG9rZW5FeHBpcmVkIiwiaXNBdXRoZW50aWNhdGVkIiwiZG9jdW1lbnQiLCJib2R5IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXV0aGVudGljYXRlIiwiYW5ndWxhciIsIm1vZHVsZSIsImJ1eURpYWxvZ0NvbnRyb2xsZXIiLCIkbWREaWFsb2ciLCJwcmljZSIsImRpYWxvZyIsInByb2ZpbGUiLCJwYXNzU3ltYm9sIiwicGFzc0NvbXBhbnkiLCJidXlTdG9jayIsInF1YW50aXR5IiwibG9hZGluZyIsInZtIiwiYnV5UXVhbnRpdHkiLCJidXlQcmljZSIsInRvRml4ZWQiLCJjdXJyUXR5IiwidXNlciIsInN0b2NrIiwiYXZnUHJpY2UiLCJ3ZWlnaHRlZEF2ZXJhZ2UiLCJ0b3RhbFF0eSIsImZ1bmRzIiwic3ltYm9sIiwiY29tcGFueSIsImVyciIsInJlcyIsIiRicm9hZGNhc3QiLCJlcnJvciIsImNsb3NlRGlhbG9nIiwic2hvd1RvYXN0IiwicmVwbGFjZSIsInRoaXMiLCJzdG9ja1F1YW50aXR5IiwiZ2V0UHJpY2UiLCJzdG9ja1ByaWNlIiwiZ2V0U3RvY2tBbmRGdW5kcyIsImRhdGEiLCIkbWRUb2FzdCIsInNob3dCdXkiLCIkZXZlbnQiLCJzaG93IiwibG9jYWxzIiwiY29udHJvbGxlckFzIiwicGFyZW50IiwiZWxlbWVudCIsInRhcmdldEV2ZW50IiwiY2xpY2tPdXRzaWRlVG9DbG9zZSIsImZvY3VzT25PcGVuIiwic2hvd1NlbGwiLCJhY3Rpb24iLCJzaW1wbGUiLCJ0ZXh0Q29udGVudCIsInBvc2l0aW9uIiwiaGlkZURlbGF5IiwidG9hc3RDbGFzcyIsImhpZGUiLCJ2YWx1ZSIsInRpbWVvdXQiLCJzZWxsRGlhbG9nQ29udHJvbGxlciIsInNlbGxTdG9jayIsInNlbGxBbGwiLCJwcm9maXQiLCJ1c2VyU3RvY2tQcmljZSIsImF2YXRhciIsInNldEF2YXRhciIsInN0b2NrQXJyYXkiLCJmb3JFYWNoIiwiaW5pdGlhbHMiLCJuYW1lIiwic3BsaXQiLCJpdGVtIiwidG9VcHBlckNhc2UiLCJzaG93V2l0aERlbGF5IiwicmVzdHJpY3QiLCJsaW5rIiwiJHNjb3BlIiwiJGVsZW1lbnQiLCJhdHRycyIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJkaXJlY3RpdmUiLCIkaHR0cCIsIm1hcmtldCIsImNiIiwidGhlbiIsImdldFByaWNlcyIsInN5bWJvbHMiLCJwb3N0IiwicHJpY2VzIiwiaG9tZUNvbnRyb2xsZXIiLCJnZXRSaXNlcnNGYWxsZXJzIiwiaW5jbHVkZXMiLCJzdG9ja3MiLCJtYXJrZXRzIiwibmV3c0NvbnRyb2xsZXIiLCIkc3RhdGVQYXJhbXMiLCJuZXdzIiwiZ2V0TmV3cyIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50IiwiZ2V0UmFuZG9tTmV3cyIsImkiLCJzaHVmZmxlTmV3cyIsImFycmF5IiwidCIsIm0iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwb3J0Zm9saW9Db250cm9sbGVyIiwiZ2V0UG9ydGZvbGlvIiwibWVzc2FnZSIsIm5vUG9ydGZvbGlvIiwicG9ydGZvbGlvIiwibWF0Y2hQcmljZXMiLCJ1c2VyUG9ydGZvbGlvIiwiY3VyclByaWNlcyIsInVzZXJTdG9jayIsImN1cnJQcmljZSIsInByb2ZpbGVDb250cm9sbGVyIiwiZ2V0UHJvZmlsZSIsImdldEZ1bmRzIiwidXNlclByb2ZpbGUiLCJKU09OIiwicGFyc2UiLCJpbmRleE9mIiwiZ2V0VXNlciIsImV4aXN0cyIsInNlbGxQcmljZSIsInByZXZQcmljZSIsInByZXZRdHkiLCJzZWFyY2hDb250cm9sbGVyIiwicXVlcnlTdG9jayIsInJlc3VsdHMiLCJnZXREYXRhIiwidHJhbnNpdGlvblRvIiwic2VhcmNoIiwic2lkZW5hdkNvbnRyb2xsZXIiLCJzaWRlbmF2Iiwic2tpcEF1dGhvcml6YXRpb24iLCJyZXNwb25zZSIsImxvZ291dCIsInNpZGVuYXZTaG93IiwidXNlckxvZ2dlZCIsImNsb3NlU2lkZW5hdiIsIiRtZFNpZGVuYXYiLCJ0b2dnbGVTaWRlbmF2IiwiaWQiLCJ0b2dnbGUiLCJjbG9zZSIsInN0b2NrQ29udHJvbGxlciIsIm5vQ29tcGFueSIsIm5ld3NFcnJvciIsInRvb2xiYXJDb250cm9sbGVyIiwibG9naW4iLCJzaWduaW4iLCJhdXRoUGFyYW1zIiwic2NvcGUiLCJzZXQiLCJ1c2VyQWNjb3VudCIsInRvb2xiYXIiLCJ0cmFuc2FjdGlvbnNDb250cm9sbGVyIiwibm9UcmFuc2FjdGlvbnMiLCJ0cmFuc2FjdGlvbnMiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFXQSxTQUFBQSxHQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxLQWtFQSxRQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEVBS0EsT0FKQUgsR0FBQSxXQUNBRyxFQUFBSixFQUFBSyxJQUFBLFdBSUFDLGNBQUEsU0FBQUMsR0FPQSxNQU5BLE9BQUFBLEVBQUFDLFNBQ0FKLEVBQUFLLFVBQ0FQLEVBQUFRLE9BQUEsV0FDQVIsRUFBQVEsT0FBQSxTQUNBUCxFQUFBUSxLQUFBLGFBRUFaLEVBQUFhLE9BQUFMLGlFQTlFQWIsRUFBQW1CLE1BQ0FDLE9BQUEsMEJBQ0FDLFNBQUEscUNBR0FwQixFQUFBcUIsVUFBQSxZQUVBcEIsRUFDQXFCLE1BQUEsV0FDQUMsSUFBQSxXQUNBQyxZQUFBLCtDQUNBQyxXQUFBLGlDQUVBSCxNQUFBLFFBQ0FDLElBQUEsUUFDQUMsWUFBQSx5Q0FDQUMsV0FBQSwyQkFFQUgsTUFBQSxXQUNBQyxJQUFBLFdBQ0FDLFlBQUEsK0NBQ0FDLFdBQUEsaUNBRUFILE1BQUEsYUFDQUMsSUFBQSxhQUNBQyxZQUFBLG1EQUNBQyxXQUFBLHFDQUVBSCxNQUFBLFNBQ0FDLElBQUEseUJBQ0FDLFlBQUEsMkNBQ0FDLFdBQUEsNkJBRUFILE1BQUEsUUFDQUMsSUFBQSxnQkFDQUMsWUFBQSx5Q0FDQUMsV0FBQSwyQkFFQUgsTUFBQSxnQkFDQUMsSUFBQSxnQkFDQUMsWUFBQSx5REFDQUMsV0FBQSwyQ0FHQUMsRUFBQTlCLFFBQ0ErQixhQUFBLFVBQUEsU0FBQUMsR0FFQSxNQUFBLFVBQUFBLEVBQUFMLElBQUFNLE9BQUFELEVBQUFMLElBQUFPLE9BQUEsR0FDQSxLQUdBQyxPQUFBQyxhQUFBQyxRQUFBLFNBQ0FDLE1BQUEsR0FBQSxLQUVBQyxvQkFBQSxpQkFBQSxZQUFBLGtDQUdBdEMsRUFBQXVDLE1BQUEsV0FDQUMsZUFBQSxRQUNBQyxjQUFBLFFBQ0FDLFlBQUEsT0FFQTFDLEVBQUF1QyxNQUFBLGFBQUFJLGtCQUFBLFFBQUFDLE9Bb0JBM0MsRUFBQTRDLFFBQUEsV0FBQXZDLEdBQ0FELEVBQUF5QyxhQUFBQyxLQUFBLGtCQUNBMUMsRUFBQXlDLGFBQUFDLEtBQUEsWUFHQSxRQUFBQyxHQUFBQyxFQUFBQyxFQUFBdEMsRUFBQUYsRUFBQXlDLEVBQUF4QyxHQUNBc0MsRUFBQUcsSUFBQSx1QkFBQSxXQUlBLEdBQUFDLEdBQUEzQyxFQUFBRyxJQUFBLFFBQ0F3QyxLQUNBRixFQUFBRyxlQUFBRCxJQUNBekMsRUFBQTJDLGtCQUNBQyxTQUFBQyxLQUFBQyxVQUFBQyxJQUFBLGFBQ0EvQyxFQUFBZ0QsYUFBQWxELEVBQUFHLElBQUEsV0FBQXdDLEtBS0F6QyxFQUFBMkMsaUJBQ0E1QyxFQUFBUSxLQUFBLDZOQXZIQTBDLFFBQ0FDLE9BQUEsT0FDQSxRQUFBLGtCQUFBLGNBQUEsYUFBQSxZQUFBLGlCQUNBLFVBQUEsVUFBQSxRQUFBLE9BQUEsV0FDQS9ELE9BQUFBLEdBQ0FpRCxJQUFBQSxNQ1RBLFdBQ0EsWUFNQSxTQUFBZSxHQUFBZCxFQUFBZSxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQThCQSxRQUFBQyxHQUFBTCxFQUFBTSxHQUNBTCxFQUFBTSxRQUFBQyxFQUFBRCxTQUFBLEdBQ0FDLEVBQUFDLFlBQUFILEVBQ0FFLEVBQUFFLFVBQUFKLEVBQUFOLEdBQUFXLFFBQUEsRUFDQSxJQUFBQyxHQUFBSixFQUFBSyxLQUFBQyxNQUFBUixTQUNBUyxFQUFBYixFQUFBYyxnQkFBQVIsRUFBQUssS0FBQUMsTUFBQWQsTUFBQUEsRUFBQVksRUFBQU4sR0FDQVcsRUFBQVQsRUFBQUssS0FBQUMsTUFBQVIsU0FBQUEsRUFDQVksRUFBQVYsRUFBQUssS0FBQUssT0FBQWxCLEVBQUFNLEdBQUFLLFFBQUEsRUFFQVQsR0FBQUcsU0FBQUcsRUFBQVcsT0FBQVgsRUFBQVksUUFBQUwsRUFBQWYsRUFBQWlCLEVBQUFDLEVBQUFOLEVBQUEsU0FBQVMsRUFBQUMsR0FDQXJCLEVBQUFNLFFBQUFDLEVBQUFELFNBQUEsR0FDQXZCLEVBQUF1QyxXQUFBLGVBRUFGLEVBQ0FiLEVBQUFnQixNQUFBSCxHQUVBYixFQUFBaUIsY0FDQWpCLEVBQUFrQixVQUFBLFNBQUFsQixFQUFBQyxZQUFBRCxFQUFBVyxPQUFBWCxFQUFBRSxTQUFBaUIsUUFBQSxzQkFBQSxXQTlDQSxHQUFBbkIsR0FBQW9CLElBRUFwQixHQUFBcUIsY0FBQSxFQUNBckIsRUFBQUMsWUFBQSxFQUNBRCxFQUFBRSxTQUFBLEVBQ0FGLEVBQUFXLE9BQUFoQixFQUNBSyxFQUFBWSxRQUFBaEIsRUFDQUksRUFBQUQsU0FBQSxFQUVBQyxFQUFBaUIsWUFBQXhCLEVBQUF3QixZQUNBakIsRUFBQWtCLFVBQUF6QixFQUFBeUIsVUFDQWxCLEVBQUFILFNBQUFBLEVBRUFMLEVBQUE4QixTQUFBdEIsRUFBQVcsT0FBQSxLQUFBLFNBQUFFLEVBQUFDLEdBQ0FELEVBQ0FiLEVBQUFnQixNQUFBSCxFQUVBYixFQUFBdUIsV0FBQVQsSUFJQXBCLEVBQUE4QixpQkFBQXhCLEVBQUFXLE9BQUEsU0FBQUUsRUFBQVksR0FDQVosRUFDQWIsRUFBQWdCLE1BQUFILEVBRUFiLEVBQUFLLEtBQUFvQiwrRkE5QkFyQyxRQUNBQyxPQUFBLE9BQ0FsQyxXQUFBLHNCQUFBbUMsTUNMQSxXQUNBLFlBT0EsU0FBQUcsR0FBQUYsRUFBQW1DLEVBQUExRixHQVNBLFFBQUEyRixHQUFBQyxFQUFBakMsRUFBQUMsR0FDQUwsRUFBQXNDLE1BQ0FDLFFBQUFuQyxXQUFBQSxFQUFBQyxZQUFBQSxHQUNBekMsV0FBQSxzQkFDQTRFLGFBQUEsWUFDQTdFLFlBQUEsZ0RBQ0E4RSxPQUFBNUMsUUFBQTZDLFFBQUFsRCxTQUFBQyxNQUNBa0QsWUFBQU4sRUFDQU8scUJBQUEsRUFDQUMsYUFBQSxJQUlBLFFBQUFDLEdBQUFULEVBQUFqQyxFQUFBQyxHQUNBTCxFQUFBc0MsTUFDQUMsUUFBQW5DLFdBQUFBLEVBQUFDLFlBQUFBLEdBQ0F6QyxXQUFBLHVCQUNBNEUsYUFBQSxhQUNBN0UsWUFBQSxpREFDQThFLE9BQUE1QyxRQUFBNkMsUUFBQWxELFNBQUFDLE1BQ0FrRCxZQUFBTixFQUNBTyxxQkFBQSxFQUNBQyxhQUFBLElBSUEsUUFBQWxCLEdBQUFvQixFQUFBeEMsRUFBQWEsRUFBQW5CLEdBQ0FrQyxFQUFBRyxLQUNBSCxFQUNBYSxTQUNBQyxZQUFBLE9BQUFGLEVBQUEsSUFBQXhDLEVBQUEsSUFBQWEsRUFBQSxnQkFBQW5CLEdBQ0FpRCxTQUFBLGdCQUNBQyxVQUFBLEtBQ0FDLFdBQUEsYUFHQSxRQUFBMUIsS0FDQTFCLEVBQUFxRCxPQUdBLFFBQUE3QyxHQUFBQSxFQUFBOEMsRUFBQUMsR0FDQTlHLEVBQUEsV0FDQStELEVBQUE4QyxHQUNBQyxHQUFBLEtBbkRBLE9BQ0FuQixRQUFBQSxFQUNBVSxTQUFBQSxFQUNBcEIsWUFBQUEsRUFDQUMsVUFBQUEsRUFDQW5CLFFBQUFBLGlEQVhBWCxRQUNBQyxPQUFBLE9BQ0FqQixRQUFBLFNBQUFxQixNQ0xBLFdBQ0EsWUFPQSxTQUFBc0QsR0FBQXZFLEVBQUFnQixFQUFBRSxFQUFBRCxFQUFBRSxFQUFBQyxHQTRCQSxRQUFBb0QsR0FBQXhELEVBQUFNLEdBQ0EsR0FBQW1ELEdBQUFqRCxFQUFBSyxLQUFBQyxNQUFBUixTQUFBQSxFQUNBb0QsR0FBQWxELEVBQUF1QixXQUFBdkIsRUFBQW1ELGdCQUFBckQsQ0FFQUosR0FBQXNELFVBQUFoRCxFQUFBVyxPQUFBZixFQUFBSixFQUFBTSxFQUFBb0QsRUFBQUQsRUFBQSxTQUFBcEMsRUFBQUMsR0FDQUQsR0FDQWIsRUFBQUQsU0FBQSxFQUNBQyxFQUFBZ0IsTUFBQUgsSUFFQWIsRUFBQWlCLGNBQ0FqQixFQUFBa0IsVUFBQSxPQUFBcEIsRUFBQUUsRUFBQVcsUUFBQW5CLEVBQUFNLEdBQUFLLFFBQUEsR0FBQWdCLFFBQUEsc0JBQUEsUUFDQTNDLEVBQUF1QyxXQUFBLGtCQXRDQSxHQUFBZixHQUFBb0IsSUFFQXBCLEdBQUFXLE9BQUFoQixFQUNBSyxFQUFBRCxTQUFBLEVBRUFDLEVBQUFpQixZQUFBeEIsRUFBQXdCLFlBQ0FqQixFQUFBa0IsVUFBQXpCLEVBQUF5QixVQUNBbEIsRUFBQWdELFVBQUFBLEVBRUF4RCxFQUFBOEIsU0FBQXRCLEVBQUFXLE9BQUEsS0FBQSxTQUFBRSxFQUFBQyxHQUNBRCxFQUNBYixFQUFBZ0IsTUFBQUgsRUFFQWIsRUFBQXVCLFdBQUFULElBSUFwQixFQUFBOEIsaUJBQUF4QixFQUFBVyxPQUFBLFNBQUFFLEVBQUFZLEdBQ0FaLEVBQ0FiLEVBQUFnQixNQUFBSCxHQUVBYixFQUFBSyxLQUFBb0IsRUFDQXpCLEVBQUFxQixjQUFBckIsRUFBQUssS0FBQUMsTUFBQVIsU0FDQUUsRUFBQW1ELGVBQUFuRCxFQUFBSyxLQUFBQyxNQUFBZCx3RkE3QkFKLFFBQ0FDLE9BQUEsT0FDQWxDLFdBQUEsdUJBQUE0RixNQ0xBLFdBQ0EsWUFNQSxTQUFBSyxLQU1BLFFBQUFDLEdBQUFDLEdBSUEsTUFIQUEsR0FBQUMsUUFBQSxTQUFBakQsR0FDQUEsRUFBQThDLE9BQUFJLEVBQUFsRCxFQUFBTSxXQUVBMEMsRUFHQSxRQUFBRSxHQUFBQyxHQUNBLEdBQUFELEdBQUFDLEVBQUFDLE1BQUEsSUFBQSxHQUNBTixFQUFBLEVBT0EsT0FOQUksR0FBQUQsUUFBQSxTQUFBSSxHQUNBLFNBQUFBLElBR0FQLEdBQUFPLEVBQUEsTUFFQVAsRUFBQVEsY0FyQkEsT0FDQVAsVUFBQUEsRUFDQUcsU0FBQUEsR0FQQXBFLFFBQ0FDLE9BQUEsYUFDQWpCLFFBQUEsU0FBQWdGLE1DTEEsV0FDQSxZQVFBLFNBQUFTLEdBQUE3SCxHQUNBLE9BQ0E4SCxTQUFBLElBQ0FDLEtBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQUQsRUFBQUUsU0FBQSxXQUNBbkksRUFBQSxXQUNBaUksRUFBQUcsWUFBQSxZQUNBRixFQUFBTCxlQUFBLDhCQWJBekUsUUFDQUMsT0FBQSxPQUNBZ0YsVUFBQSxnQkFBQVIsTUNMQSxXQUNBLFlBTUEsU0FBQXJFLEdBQUE4RSxHQU1BLFFBQUFoRCxHQUFBWCxFQUFBNEQsRUFBQUMsR0FDQSxPQUFBRCxFQUNBRCxFQUNBbEksSUFBQSxjQUFBdUUsRUFBQSxJQUFBNEQsR0FDQUUsS0FBQSxTQUFBM0QsR0FDQSxNQUFBMEQsR0FBQSxLQUFBMUQsRUFBQVcsS0FBQWpDLE1BQUFBLFFBQ0EsU0FBQXFCLEdBQ0EsTUFBQTJELEdBQUEsVUFBQTNELEVBQUFZLEtBQUFULE1BQUEsUUFHQXNELEVBQ0FsSSxJQUFBLGNBQUF1RSxHQUNBOEQsS0FBQSxTQUFBM0QsR0FDQSxNQUFBMEQsR0FBQSxLQUFBMUQsRUFBQVcsS0FBQWpDLE1BQUFBLFFBQ0EsU0FBQXFCLEdBQ0EsTUFBQTJELEdBQUEsaUJBQUEzRCxFQUFBdEUsT0FBQSxRQUtBLFFBQUFtSSxHQUFBQyxFQUFBSCxHQUNBRixFQUNBTSxLQUFBLHNCQUFBRCxHQUNBRixLQUFBLFNBQUEzRCxHQUNBLE1BQUEwRCxHQUFBLEtBQUExRCxFQUFBVyxLQUFBb0QsU0FDQSxTQUFBaEUsR0FDQSxNQUFBMkQsR0FBQSxpQkFBQTNELEVBQUF0RSxPQUFBLFFBL0JBLE9BQ0ErRSxTQUFBQSxFQUNBb0QsVUFBQUEsdUJBUEF0RixRQUNBQyxPQUFBLFlBQ0FqQixRQUFBLFFBQUFvQixNQ0xBLFdBQ0EsWUFNQSxTQUFBc0YsR0FBQVIsRUFBQWxCLEVBQUEzRCxHQVlBLFFBQUFzRixHQUFBUixHQUNBdkUsRUFBQUQsU0FBQSxFQUVBQyxFQUFBLFFBQUFnRixTQUFBVCxHQUNBRCxFQUNBbEksSUFBQSxpQkFBQW1JLEdBQ0FFLEtBQUEsU0FBQTNELEdBQ0FBLEVBQUFXLEtBQUFULE1BQ0FoQixFQUFBZ0IsTUFBQUYsRUFBQVcsS0FBQVQsT0FFQWhCLEVBQUFnQixNQUFBLEtBQ0FoQixFQUFBaUYsT0FBQW5FLEVBQUFXLEtBQUF3RCxPQUFBQSxPQUNBN0IsRUFBQUMsVUFBQXJELEVBQUFpRixRQUNBakYsRUFBQUQsU0FBQSxLQUlBQyxFQUFBZ0IsTUFBQSxtQkFBQXVELEVBNUJBLEdBQUF2RSxHQUFBb0IsSUFFQXBCLEdBQUFrRixTQUFBLEtBQUEsTUFBQSxPQUFBLE1BQUEsTUFBQSxTQUNBbEYsRUFBQUQsU0FBQSxFQUVBQyxFQUFBcUMsU0FBQTVDLEVBQUE0QyxTQUNBckMsRUFBQTJCLFFBQUFsQyxFQUFBa0MsUUFDQTNCLEVBQUErRSxpQkFBQUEsRUFFQUEsRUFBQSw0Q0FkQTNGLFFBQ0FDLE9BQUEsT0FDQWxDLFdBQUEsaUJBQUEySCxNQ0xBLFdBQ0EsWUFNQSxTQUFBSyxHQUFBMUcsRUFBQTJHLEVBQUFDLEdBS0EsUUFBQUMsR0FBQTNFLEdBQ0EwRSxFQUFBQyxRQUFBM0UsRUFBQSxTQUFBRSxFQUFBQyxHQUNBRCxFQUNBYixFQUFBZ0IsTUFBQUgsRUFFQTBFLFFBQUFDLElBQUExRSxLQVRBLEdBQUFkLEdBQUFvQixJQUVBcEIsR0FBQXNGLFFBQUFBLEVBOEJBLFNBQUE3RyxFQUFBZ0gsUUFBQWhDLEtBbEJBLFdBQ0E0QixFQUFBSyxjQUFBLFNBQUE3RSxFQUFBQyxHQUNBRCxFQUNBYixFQUFBZ0IsTUFBQUgsR0FFQWIsRUFBQXFGLFFBQ0F2RSxFQUFBVyxLQUFBNEQsS0FBQTlCLFFBQUEsU0FBQUksR0FDQSxHQUFBQSxFQUFBMEIsS0FBQTdILE9BQUEsRUFDQSxJQUFBLEdBQUFtSSxHQUFBLEVBQUFBLEVBQUFoQyxFQUFBMEIsS0FBQTdILE9BQUFtSSxJQUNBM0YsRUFBQXFGLEtBQUEvRyxLQUFBcUYsRUFBQTBCLEtBQUFNLE1BSUFOLEVBQUFPLFlBQUE1RixFQUFBcUYsWUFRQUMsRUFBQUYsRUFBQXpFLG1EQXhDQXZCLFFBQ0FDLE9BQUEsT0FDQWxDLFdBQUEsaUJBQUFnSSxNQ0xBLFdBQ0EsWUFPQSxTQUFBRSxHQUFBZixHQU9BLFFBQUFnQixHQUFBM0UsRUFBQTZELEdBQ0FGLEVBQ0FsSSxJQUFBLG9CQUFBdUUsR0FDQThELEtBQUEsU0FBQTNELEdBQ0EwRCxFQUFBLEtBQUExRCxJQUNBLFNBQUFELEdBQ0EyRCxFQUFBM0QsRUFBQSxRQUlBLFFBQUE2RSxHQUFBbEIsR0FDQUYsRUFDQWxJLElBQUEsb0JBQ0FxSSxLQUFBLFNBQUEzRCxHQUNBMEQsRUFBQSxLQUFBMUQsSUFDQSxTQUFBRCxHQUNBMkQsRUFBQTNELEVBQUEsUUFLQSxRQUFBK0UsR0FBQUMsR0FNQSxJQUxBLEdBQ0FDLEdBQ0FILEVBRkFJLEVBQUFGLEVBQUFySSxPQUtBdUksR0FFQUosRUFBQUssS0FBQUMsTUFBQUQsS0FBQUUsU0FBQUgsS0FHQUQsRUFBQUQsRUFBQUUsR0FDQUYsRUFBQUUsR0FBQUYsRUFBQUYsR0FDQUUsRUFBQUYsR0FBQUcsQ0FHQSxPQUFBRCxHQTNDQSxPQUNBUCxRQUFBQSxFQUNBSSxjQUFBQSxFQUNBRSxZQUFBQSx1QkFUQXhHLFFBQ0FDLE9BQUEsV0FDQWpCLFFBQUEsT0FBQWlILE1DTEEsV0FDQSxZQU9BLFNBQUFjLEdBQUFuQyxFQUFBTSxFQUFBOUUsRUFBQUMsRUFBQTJELEdBV0EsUUFBQWdELEtBQ0E5QixFQUNBbEksSUFBQSx1QkFDQXFJLEtBQUEsU0FBQTNELEdBQ0FBLEVBQUFXLEtBQUE0RSxRQUNBckcsRUFBQXNHLFlBQUF4RixFQUFBVyxLQUFBNEUsU0FFQXJHLEVBQUF1RyxVQUFBekYsRUFBQVcsS0FBQThFLFVBQ0F2RyxFQUFBVSxNQUFBSSxFQUFBVyxLQUFBZixNQUNBZ0UsRUFBQTFFLEVBQUF1RyxXQUNBbkQsRUFBQUMsVUFBQXJELEVBQUF1RyxjQUtBLFFBQUE3QixHQUFBNkIsR0FDQSxHQUFBNUIsS0FDQTRCLEdBQUFoRCxRQUFBLFNBQUFqRCxHQUNBcUUsRUFBQXJHLEtBQUFnQyxFQUFBSyxVQUVBbkIsRUFBQWtGLFVBQUFDLEVBQUEsU0FBQTlELEVBQUFDLEdBQ0FELEVBQ0FiLEVBQUFnQixNQUFBSCxFQUVBMkYsRUFBQXhHLEVBQUF1RyxVQUFBekYsS0FLQSxRQUFBMEYsR0FBQUMsRUFBQUMsR0FTQSxNQVJBRCxHQUFBbEQsUUFBQSxTQUFBb0QsR0FDQUQsRUFBQW5ELFFBQUEsU0FBQWpELEdBQ0FBLEVBQUFLLFNBQUFnRyxFQUFBaEcsU0FDQWdHLEVBQUFDLFVBQUF0RyxFQUFBZCxNQUNBbUgsRUFBQXBDLE9BQUFqRSxFQUFBaUUsWUFJQWtDLEVBaERBLEdBQUF6RyxHQUFBb0IsSUFFQXBCLEdBQUFxQyxTQUFBNUMsRUFBQTRDLFNBQ0FyQyxFQUFBMkIsUUFBQWxDLEVBQUFrQyxRQUNBM0IsRUFBQW9HLGFBQUFBLEVBRUFwQyxFQUFBckYsSUFBQSxjQUFBLFdBQ0F5SCxNQTZDQUEsMkRBMURBaEgsUUFDQUMsT0FBQSxPQUNBbEMsV0FBQSxzQkFBQWdKLE1DTEEsV0FDQSxZQU1BLFNBQUFVLEdBQUF2QyxFQUFBNUUsR0FDQSxHQUFBTSxHQUFBb0IsSUFFQXBCLEdBQUFOLFFBQUFBLEVBQUFvSCxhQUVBcEgsRUFBQXFILFNBQUEsU0FBQWxHLEVBQUFILEdBQ0FHLEVBQ0FiLEVBQUFnQixNQUFBSCxFQUVBYixFQUFBVSxNQUFBQSxrQ0FiQXRCLFFBQ0FDLE9BQUEsT0FDQWxDLFdBQUEsb0JBQUEwSixNQ0xBLFdBQ0EsWUFNQSxTQUFBbkgsR0FBQTRFLEdBV0EsUUFBQXdDLEtBQ0EsR0FBQUUsR0FBQUMsS0FBQUMsTUFBQXpKLE9BQUFDLGFBQUFDLFFBQUEsV0FNQSxRQUpBcUosRUFBQXZELEtBQUEwRCxRQUFBLE9BQ0FILEVBQUF2RCxLQUFBdUQsRUFBQXZELEtBQUFDLE1BQUEsS0FBQSxJQUdBc0QsRUFHQSxRQUFBSSxHQUFBNUMsR0FDQUYsRUFDQWxJLElBQUEsY0FDQXFJLEtBQUEsU0FBQTNELEdBQ0EwRCxFQUFBMUQsRUFBQVcsS0FBQXBCLFFBSUEsUUFBQTBHLEdBQUF2QyxHQUNBRixFQUNBbEksSUFBQSxvQkFDQXFJLEtBQUEsU0FBQTNELEdBQ0EwRCxFQUFBLEtBQUExRCxFQUFBVyxLQUFBZixRQUNBLFNBQUFHLEdBQ0EyRCxFQUFBLDJCQUFBM0QsRUFBQSxRQUlBLFFBQUFXLEdBQUFiLEVBQUE2RCxHQUNBRixFQUNBbEksSUFBQSx1QkFBQXVFLEdBQ0E4RCxLQUFBLFNBQUEzRCxHQUNBLEdBQUFXLElBQ0FuQixNQUFBUSxFQUFBVyxLQUFBbkIsTUFDQUksTUFBQUksRUFBQVcsS0FBQWYsTUFFQThELEdBQUEsS0FBQS9DLElBQ0EsU0FBQVosR0FDQTJELEVBQUEsZ0JBQUEzRCxFQUFBdEUsT0FBQSxLQUFBLFFBSUEsUUFBQXNELEdBQUFjLEVBQUFDLEVBQUFMLEVBQUFmLEVBQUFpQixFQUFBQyxFQUFBMkcsRUFBQTdDLEdBQ0EsR0FBQS9DLElBQ0FkLE9BQUFBLEVBQ0FDLFFBQUFBLEVBQ0FwQixNQUFBZSxFQUNBTCxTQUFBVixFQUNBTSxTQUFBVyxFQUNBQyxNQUFBQSxFQUFBUCxRQUFBLEdBQ0FrSCxPQUFBQSxFQUdBL0MsR0FDQU0sS0FBQSxnQkFBQW5ELEdBQ0FnRCxLQUFBLFNBQUEzRCxHQUNBMEQsRUFBQSxLQUFBMUQsSUFDQSxTQUFBRCxHQUNBMkQsRUFBQTNELEVBQUEsUUFJQSxRQUFBbUMsR0FBQXJDLEVBQUFDLEVBQUEwRyxFQUFBeEgsRUFBQW9ELEVBQUFELEVBQUF1QixHQUNBLEdBQUEvQyxJQUNBZCxPQUFBQSxFQUNBQyxRQUFBQSxFQUNBMEcsVUFBQUEsRUFDQXhILFNBQUFBLEVBQ0FvRCxPQUFBQSxFQUNBRCxRQUFBQSxFQUdBcUIsR0FDQU0sS0FBQSxnQkFBQW5ELEdBQ0FnRCxLQUFBLFNBQUEzRCxHQUNBMEQsRUFBQSxLQUFBMUQsSUFDQSxTQUFBRCxHQUNBMEUsUUFBQUMsSUFBQTNFLEdBQ0EyRCxFQUFBM0QsRUFBQSxRQUlBLFFBQUFMLEdBQUErRyxFQUFBWCxFQUFBWSxFQUFBcEgsR0FDQSxRQUFBbUgsRUFBQUMsRUFBQVosRUFBQXhHLElBQUFvSCxFQUFBcEgsSUFBQUQsUUFBQSxHQTdGQSxPQUNBaUgsUUFBQUEsRUFDQTVGLGlCQUFBQSxFQUNBc0YsV0FBQUEsRUFDQUMsU0FBQUEsRUFDQWxILFNBQUFBLEVBQ0FtRCxVQUFBQSxFQUNBeEMsZ0JBQUFBLHVCQVpBcEIsUUFDQUMsT0FBQSxjQUNBakIsUUFBQSxVQUFBc0IsTUNMQSxXQUNBLFlBT0EsU0FBQStILEdBQUFuRCxFQUFBN0YsR0FNQSxRQUFBaUosR0FBQXBILEdBQ0EsTUFBQWdFLEdBQ0FsSSxJQUFBLHFCQUFBa0UsR0FDQW1FLEtBQUEsU0FBQTNELEdBQ0EsR0FBQTZHLEtBTUEsT0FKQTdHLEdBQUFXLEtBQUFBLEtBQUE4QixRQUFBLFNBQUFJLEdBQ0FnRSxFQUFBckosS0FBQXFGLEVBQUFoRCxVQUdBZ0gsSUFJQSxRQUFBQyxHQUFBakUsR0FDQSxJQUFBQSxFQUNBLE9BQUEsQ0FFQWxGLEdBQUFvSixhQUFBLFNBQUFsSCxPQUFBZ0QsSUF2QkEsR0FBQTNELEdBQUFvQixJQUVBcEIsR0FBQTBILFdBQUFBLEVBQ0ExSCxFQUFBNEgsUUFBQUEsK0JBVEF4SSxRQUNBQyxPQUFBLE9BQ0FsQyxXQUFBLG1CQUFBc0ssTUNMQSxXQUNBLFlBTUEsU0FBQUssS0FDQSxPQUNBNUssWUFBQSw2Q0FDQUMsV0FBQSxtQkFDQTRFLGFBQUEsVUFSQTNDLFFBQ0FDLE9BQUEsT0FDQWdGLFVBQUEsU0FBQXlELE1DTEEsV0FDQSxZQU1BLFNBQUFDLEdBQUF6RCxFQUFBOUYsRUFBQXdGLEVBQUE5SCxFQUFBQyxFQUFBRixFQUNBK0wsRUFBQXRJLEdBOEJBLFFBQUFxSCxLQUNBckgsRUFBQXFILFNBQUEsU0FBQWxHLEVBQUFILEdBQ0FHLElBQ0FiLEVBQUFnQixNQUFBSCxHQUVBYixFQUFBVSxNQUFBQSxJQUlBLFFBQUE0RSxLQUNBaEIsRUFBQWxJLElBQUEsdUNBQ0E2TCxtQkFBQSxJQUNBeEQsS0FBQSxTQUFBeUQsR0FDQWxJLEVBQUFxRyxRQUFBNkIsRUFBQXpHLEtBQUE0RCxLQUFBMUUsU0FJQSxRQUFBd0gsS0FLQWhNLEVBQUFLLFVBQ0FQLEVBQUFRLE9BQUEsV0FDQVIsRUFBQVEsT0FBQSxTQUNBdUQsRUFBQW9JLGFBQUEsRUFDQXJKLFNBQUFDLEtBQUFDLFVBQUF4QyxPQUFBLGFBQ0ErQixFQUFBdUMsV0FBQSxjQUNBZixFQUFBcUksWUFBQSxFQUNBbk0sRUFBQVEsS0FBQSxZQTFEQSxHQUFBc0QsR0FBQW9CLElBRUFwQixHQUFBc0YsUUFBQUEsRUFDQXRGLEVBQUFtSSxPQUFBQSxFQUVBbkksRUFBQXNJLGFBQUFOLEVBQUFNLGFBQ0F0SSxFQUFBN0QsS0FBQUEsRUFFQTZELEVBQUFxRyxRQUFBLEdBQ0FyRyxFQUFBb0ksYUFBQSxFQUlBcEksRUFBQTdELEtBQUEyQyxrQkFDQWtCLEVBQUFOLFFBQUFBLEVBQUFvSCxhQUNBOUcsRUFBQW9JLGFBQUEsRUFDQXJCLEtBR0EvQyxFQUFBckYsSUFBQSxZQUFBLFdBQ0FxQixFQUFBTixRQUFBQSxFQUFBb0gsYUFDQTlHLEVBQUFvSSxhQUFBLEVBQ0FyQixNQUdBL0MsRUFBQXJGLElBQUEsY0FBQSxXQUNBb0ksK0ZBaENBM0gsUUFDQUMsT0FBQSxPQUNBbEMsV0FBQSxvQkFBQTRLLE1DTEEsV0FDQSxZQU1BLFNBQUFDLEtBQ0EsT0FDQTlLLFlBQUEsK0NBQ0FDLFdBQUEsb0JBQ0E0RSxhQUFBLFdBUkEzQyxRQUNBQyxPQUFBLE9BQ0FnRixVQUFBLFVBQUEyRCxNQ0xBLFdBQ0EsWUFNQSxTQUFBQSxHQUFBTyxFQUFBcE0sRUFBQUYsR0FNQSxRQUFBdU0sR0FBQUMsR0FDQUYsRUFBQUUsR0FBQSxRQUFBQyxTQUdBLFFBQUFKLEdBQUFHLEdBQ0FGLEVBQUFFLEdBQUEsUUFBQUUsUUFWQSxPQUNBSCxjQUFBQSxFQUNBRixhQUFBQSwyQ0FQQWxKLFFBQ0FDLE9BQUEsY0FDQWpCLFFBQUEsVUFBQTRKLE1DTEEsV0FDQSxZQU9BLFNBQUFZLEdBQUF4RCxFQUFBZCxFQUFBN0UsRUFBQUQsRUFBQTZGLEVBQUFqQyxHQUNBLEdBQUFwRCxHQUFBb0IsSUFFQXBCLEdBQUFELFNBQUEsRUFFQUMsRUFBQTJCLFFBQUFsQyxFQUFBa0MsUUFDQTNCLEVBQUFxQyxTQUFBNUMsRUFBQTRDLFNBRUEsV0FDQXJDLEVBQUFELFNBQUEsRUFFQXVFLEVBQ0FsSSxJQUFBLG9CQUFBZ0osRUFBQXpFLE9BQUEsSUFBQXlFLEVBQUFiLFFBQ0FFLEtBQUEsU0FBQTNELEdBQ0FBLEVBQUFXLEtBQUFULE9BQ0FoQixFQUFBNkksVUFBQS9ILEVBQUFXLEtBQUFULE1BQ0FoQixFQUFBRCxTQUFBLElBRUFDLEVBQUFZLFFBQUFFLEVBQUFXLEtBQUFBLEtBRUFqQyxFQUFBOEIsU0FBQThELEVBQUF6RSxPQUFBeUUsRUFBQWIsUUFBQXZFLEVBQUFZLFFBQUEyRCxPQUFBLFNBQUExRCxFQUFBQyxHQUNBRCxFQUNBYixFQUFBZ0IsTUFBQUgsRUFFQWIsRUFBQVIsTUFBQXNCLElBSUF1RSxFQUFBQyxRQUFBRixFQUFBekUsT0FBQSxTQUFBRSxFQUFBQyxHQUNBLEdBQUFELEVBQ0FiLEVBQUE4SSxVQUFBLHlCQUVBLEtBQ0E5SSxFQUFBcUYsS0FBQXZFLEVBQUFXLEtBQUE0RCxLQUFBQSxLQUNBLE1BQUF4RSxHQUNBYixFQUFBOEksVUFBQWpJLEVBR0FiLEVBQUFELFNBQUEsSUFHQUMsRUFBQW9ELE9BQUFBLEVBQUFJLFNBQUF4RCxFQUFBWSxRQUFBQSxTQUFBd0UsRUFBQXpFLGtGQTlDQXZCLFFBQ0FDLE9BQUEsT0FDQWxDLFdBQUEsa0JBQUF5TCxNQ0xBLFdBQ0EsWUFNQSxTQUFBRyxHQUFBNU0sRUFBQUYsRUFBQUMsRUFBQThILEVBQUF4RixFQUFBOEYsRUFBQTBELEdBcUJBLFFBQUFnQixLQUtBN00sRUFBQThNLFFBQ0FDLFlBQ0FDLE1BQUEsaUJBRUEsU0FBQXpKLEVBQUFkLEdBQ0EzQyxFQUFBbU4sSUFBQSxVQUFBMUosR0FDQXpELEVBQUFtTixJQUFBLFFBQUF4SyxHQUNBMUMsRUFBQVEsS0FBQSxZQUNBcUMsU0FBQUMsS0FBQUMsVUFBQUMsSUFBQSxhQUNBYyxFQUFBcUksWUFBQSxFQUNBZ0IsRUFBQSxTQUFBdkksR0FDQWQsRUFBQXFHLFFBQUF2RixFQUFBVyxLQUFBNEUsUUFDQXJHLEVBQUFVLE1BQUFJLEVBQUFXLEtBQUFwQixLQUFBSyxNQUNBbEMsRUFBQXVDLFdBQUEsZ0JBRUEsU0FBQUMsR0FDQXVFLFFBQUFDLElBQUF4RSxLQUlBLFFBQUFxSSxHQUFBN0UsR0FDQUYsRUFDQWxJLElBQUEsYUFDQXFJLEtBQUEsU0FBQTNELEdBQ0EwRCxFQUFBMUQsS0FqREEsR0FBQWQsR0FBQW9CLElBRUFwQixHQUFBZ0osTUFBQUEsRUFFQWhKLEVBQUE3RCxLQUFBQSxFQUNBNkQsRUFBQXdJLGNBQUFSLEVBQUFRLGNBQ0F4SSxFQUFBcUksWUFBQSxFQUVBbE0sRUFBQTJDLGtCQUNBa0IsRUFBQXFJLFlBQUEsR0FHQXJFLEVBQUFyRixJQUFBLGFBQUEsV0FDQXFCLEVBQUFxSSxZQUFBLElBR0FyRSxFQUFBckYsSUFBQSxZQUFBLFdBQ0FxQixFQUFBcUksWUFBQSxtRkF0QkFqSixRQUNBQyxPQUFBLE9BQ0FsQyxXQUFBLG9CQUFBNEwsTUNMQSxXQUNBLFlBTUEsU0FBQU8sS0FDQSxPQUNBcE0sWUFBQSwrQ0FDQUMsV0FBQSxvQkFDQTRFLGFBQUEsV0FSQTNDLFFBQ0FDLE9BQUEsT0FDQWdGLFVBQUEsVUFBQWlGLE1DTEEsV0FDQSxZQU1BLFNBQUFDLEdBQUFqRixFQUFBbEIsR0FDQSxHQUFBcEQsR0FBQW9CLE1BRUEsV0FDQWtELEVBQ0FsSSxJQUFBLHdCQUNBcUksS0FBQSxTQUFBM0QsR0FDQUEsRUFBQVcsS0FBQVQsTUFDQWhCLEVBQUF3SixlQUFBMUksRUFBQVcsS0FBQVQsT0FFQWhCLEVBQUF5SixhQUFBM0ksRUFBQVcsS0FBQWdJLGFBQ0FyRyxFQUFBQyxVQUFBckQsRUFBQXlKLGdCQUVBLFNBQUE1SSxHQUNBYixFQUFBZ0IsTUFBQUgsb0NBbEJBekIsUUFDQUMsT0FBQSxPQUNBbEMsV0FBQSx5QkFBQW9NIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcsIFtcbiAgICAgICdhdXRoMCcsICdhbmd1bGFyLXN0b3JhZ2UnLCAnYW5ndWxhci1qd3QnLCAnbmdNYXRlcmlhbCcsICd1aS5yb3V0ZXInLCAnbmdMZXR0ZXJBdmF0YXInLFxuICAgICAgJ3NpZGVuYXYnLCAncHJvZmlsZScsICdwcmljZScsICduZXdzJywgJ2F2YXRhciddKVxuICAgIC5jb25maWcoY29uZmlnKVxuICAgIC5ydW4ocnVuKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjb25maWcgKFxuICAgICRtZFRoZW1pbmdQcm92aWRlcixcbiAgICAkcHJvdmlkZSxcbiAgICBhdXRoUHJvdmlkZXIsXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLFxuICAgICRzdGF0ZVByb3ZpZGVyLFxuICAgICRodHRwUHJvdmlkZXIsXG4gICAgand0T3B0aW9uc1Byb3ZpZGVyKSB7XG4gICAgYXV0aFByb3ZpZGVyLmluaXQoe1xuICAgICAgZG9tYWluOiAnZGFuaWVsbml0dS5ldS5hdXRoMC5jb20nLFxuICAgICAgY2xpZW50SUQ6ICcxZ0xPdmV0Y3JqQzlHVzJrRWVSekV0SlJKSDcwMGlhNidcbiAgICB9KVxuXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL3dlbGNvbWUnKVxuXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgIC5zdGF0ZSgnd2VsY29tZScsIHtcbiAgICAgICAgdXJsOiAnL3dlbGNvbWUnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3dlbGNvbWUvd2VsY29tZS50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ3Rvb2xiYXJDb250cm9sbGVyIGFzIHRvb2xiYXInXG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdob21lJywge1xuICAgICAgICB1cmw6ICcvaG9tZScsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvaG9tZS9ob21lLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnaG9tZUNvbnRyb2xsZXIgYXMgaG9tZSdcbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ3Byb2ZpbGUnLCB7XG4gICAgICAgIHVybDogJy9wcm9maWxlJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9wcm9maWxlL3Byb2ZpbGUudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdwcm9maWxlQ29udHJvbGxlciBhcyBwcm9maWxlJ1xuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgncG9ydGZvbGlvJywge1xuICAgICAgICB1cmw6ICcvcG9ydGZvbGlvJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9wb3J0Zm9saW8vcG9ydGZvbGlvLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAncG9ydGZvbGlvQ29udHJvbGxlciBhcyBwb3J0Zm9saW8nXG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdzdG9jaycsIHtcbiAgICAgICAgdXJsOiAnL3N0b2NrLzpzeW1ib2wvOm1hcmtldCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvc3RvY2svc3RvY2sudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdzdG9ja0NvbnRyb2xsZXIgYXMgc3RvY2snXG4gICAgICB9KVxuICAgICAgLnN0YXRlKCduZXdzJywge1xuICAgICAgICB1cmw6ICcvbmV3cy86c3ltYm9sJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9uZXdzL25ld3MudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICduZXdzQ29udHJvbGxlciBhcyBuZXdzJ1xuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgndHJhbnNhY3Rpb25zJywge1xuICAgICAgICB1cmw6ICcvdHJhbnNhY3Rpb25zJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy90cmFuc2FjdGlvbnMvdHJhbnNhY3Rpb25zLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAndHJhbnNhY3Rpb25zQ29udHJvbGxlciBhcyB0cmFuc2FjdGlvbnMnXG4gICAgICB9KVxuXG4gICAgand0T3B0aW9uc1Byb3ZpZGVyLmNvbmZpZyh7XG4gICAgICB0b2tlbkdldHRlcjogWydvcHRpb25zJywgZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgLy8gRG9uJ3Qgc2VuZCB0aGUgdG9rZW4gZm9yIHRlbXBsYXRlIHJlcXVlc3RzXG4gICAgICAgIGlmIChvcHRpb25zLnVybC5zdWJzdHIob3B0aW9ucy51cmwubGVuZ3RoIC0gNSkgPT09ICcuaHRtbCcpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpXG4gICAgICAgIHJldHVybiB0b2tlbi5zbGljZSgxLCAtMSlcbiAgICAgIH1dLFxuICAgICAgd2hpdGVMaXN0ZWREb21haW5zOiBbJ3RyYWRlLmJvdXRpcXVlJywgJ2xvY2FsaG9zdCcsICdqc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tJ11cbiAgICB9KVxuXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcbiAgICAgIC5wcmltYXJ5UGFsZXR0ZSgnYmx1ZScpXG4gICAgICAuYWNjZW50UGFsZXR0ZSgnZ3JleScpXG4gICAgICAud2FyblBhbGV0dGUoJ3JlZCcpXG5cbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RhcmstYmx1ZScpLmJhY2tncm91bmRQYWxldHRlKCdibHVlJykuZGFyaygpXG5cbiAgICBmdW5jdGlvbiByZWRpcmVjdCAoJHEsICRpbmplY3RvciwgJHRpbWVvdXQsIHN0b3JlLCAkbG9jYXRpb24pIHtcbiAgICAgIHZhciBhdXRoXG4gICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGF1dGggPSAkaW5qZWN0b3IuZ2V0KCdhdXRoJylcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZWplY3Rpb24pIHtcbiAgICAgICAgICBpZiAocmVqZWN0aW9uLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICBhdXRoLnNpZ25vdXQoKVxuICAgICAgICAgICAgc3RvcmUucmVtb3ZlKCdwcm9maWxlJylcbiAgICAgICAgICAgIHN0b3JlLnJlbW92ZSgndG9rZW4nKVxuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy93ZWxjb21lJylcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgJHByb3ZpZGUuZmFjdG9yeSgncmVkaXJlY3QnLCByZWRpcmVjdClcbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdqd3RJbnRlcmNlcHRvcicpXG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgncmVkaXJlY3QnKVxuICB9XG5cbiAgZnVuY3Rpb24gcnVuICgkcm9vdFNjb3BlLCAkc3RhdGUsIGF1dGgsIHN0b3JlLCBqd3RIZWxwZXIsICRsb2NhdGlvbikge1xuICAgICRyb290U2NvcGUuJG9uKCckbG9jYXRpb25DaGFuZ2VTdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIEdldCB0aGUgSldUIHRoYXQgaXMgc2F2ZWQgaW4gbG9jYWwgc3RvcmFnZVxuICAgICAgLy8gYW5kIGlmIGl0IGlzIHRoZXJlLCBjaGVjayB3aGV0aGVyIGl0IGlzIGV4cGlyZWQuXG4gICAgICAvLyBJZiBpdCBpc24ndCwgc2V0IHRoZSB1c2VyJ3MgYXV0aCBzdGF0ZVxuICAgICAgdmFyIHRva2VuID0gc3RvcmUuZ2V0KCd0b2tlbicpXG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgaWYgKCFqd3RIZWxwZXIuaXNUb2tlbkV4cGlyZWQodG9rZW4pKSB7XG4gICAgICAgICAgaWYgKCFhdXRoLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdsb2dnZWQtaW4nKVxuICAgICAgICAgICAgYXV0aC5hdXRoZW50aWNhdGUoc3RvcmUuZ2V0KCdwcm9maWxlJyksIHRva2VuKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIWF1dGguaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvd2VsY29tZScpXG4gICAgICB9XG4gICAgfSlcbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdidXlEaWFsb2dDb250cm9sbGVyJywgYnV5RGlhbG9nQ29udHJvbGxlcilcblxuICBmdW5jdGlvbiBidXlEaWFsb2dDb250cm9sbGVyICgkcm9vdFNjb3BlLCAkbWREaWFsb2csIHByaWNlLCBkaWFsb2csIHByb2ZpbGUsIHBhc3NTeW1ib2wsIHBhc3NDb21wYW55KSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0uc3RvY2tRdWFudGl0eSA9IDFcbiAgICB2bS5idXlRdWFudGl0eSA9IDBcbiAgICB2bS5idXlQcmljZSA9IDBcbiAgICB2bS5zeW1ib2wgPSBwYXNzU3ltYm9sXG4gICAgdm0uY29tcGFueSA9IHBhc3NDb21wYW55XG4gICAgdm0ubG9hZGluZyA9IGZhbHNlXG5cbiAgICB2bS5jbG9zZURpYWxvZyA9IGRpYWxvZy5jbG9zZURpYWxvZ1xuICAgIHZtLnNob3dUb2FzdCA9IGRpYWxvZy5zaG93VG9hc3RcbiAgICB2bS5idXlTdG9jayA9IGJ1eVN0b2NrXG5cbiAgICBwcmljZS5nZXRQcmljZSh2bS5zeW1ib2wsIG51bGwsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0uc3RvY2tQcmljZSA9IHJlc1xuICAgICAgfVxuICAgIH0pXG5cbiAgICBwcm9maWxlLmdldFN0b2NrQW5kRnVuZHModm0uc3ltYm9sLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS51c2VyID0gZGF0YVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBidXlTdG9jayAocHJpY2UsIHF1YW50aXR5KSB7XG4gICAgICBkaWFsb2cubG9hZGluZyh2bS5sb2FkaW5nLCB0cnVlKVxuICAgICAgdm0uYnV5UXVhbnRpdHkgPSBxdWFudGl0eVxuICAgICAgdm0uYnV5UHJpY2UgPSAocXVhbnRpdHkgKiBwcmljZSkudG9GaXhlZCgyKVxuICAgICAgdmFyIGN1cnJRdHkgPSB2bS51c2VyLnN0b2NrLnF1YW50aXR5XG4gICAgICB2YXIgYXZnUHJpY2UgPSBwcm9maWxlLndlaWdodGVkQXZlcmFnZSh2bS51c2VyLnN0b2NrLnByaWNlLCBwcmljZSwgY3VyclF0eSwgcXVhbnRpdHkpXG4gICAgICB2YXIgdG90YWxRdHkgPSB2bS51c2VyLnN0b2NrLnF1YW50aXR5ICsgcXVhbnRpdHlcbiAgICAgIHZhciBmdW5kcyA9IHZtLnVzZXIuZnVuZHMgLSAoKHByaWNlICogcXVhbnRpdHkpLnRvRml4ZWQoMikpXG5cbiAgICAgIHByb2ZpbGUuYnV5U3RvY2sodm0uc3ltYm9sLCB2bS5jb21wYW55LCBhdmdQcmljZSwgcHJpY2UsIHRvdGFsUXR5LCBmdW5kcywgY3VyclF0eSwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgIGRpYWxvZy5sb2FkaW5nKHZtLmxvYWRpbmcsIGZhbHNlKVxuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RyYW5zYWN0aW9uJylcblxuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2bS5jbG9zZURpYWxvZygpXG4gICAgICAgICAgdm0uc2hvd1RvYXN0KCdib3VnaHQnLCB2bS5idXlRdWFudGl0eSwgdm0uc3ltYm9sLCAodm0uYnV5UHJpY2UucmVwbGFjZSgvKFxcZCkoPz0oXFxkezN9KStcXC4pL2csICckMSwnKSkpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ2RpYWxvZycsIGRpYWxvZylcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gZGlhbG9nICgkbWREaWFsb2csICRtZFRvYXN0LCAkdGltZW91dCkge1xuICAgIHJldHVybiB7XG4gICAgICBzaG93QnV5OiBzaG93QnV5LFxuICAgICAgc2hvd1NlbGw6IHNob3dTZWxsLFxuICAgICAgY2xvc2VEaWFsb2c6IGNsb3NlRGlhbG9nLFxuICAgICAgc2hvd1RvYXN0OiBzaG93VG9hc3QsXG4gICAgICBsb2FkaW5nOiBsb2FkaW5nXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd0J1eSAoJGV2ZW50LCBwYXNzU3ltYm9sLCBwYXNzQ29tcGFueSkge1xuICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICBsb2NhbHM6IHtwYXNzU3ltYm9sOiBwYXNzU3ltYm9sLCBwYXNzQ29tcGFueTogcGFzc0NvbXBhbnl9LFxuICAgICAgICBjb250cm9sbGVyOiAnYnV5RGlhbG9nQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ2J1eURpYWxvZycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvZGlhbG9nL2J1eURpYWxvZy50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICAgIHRhcmdldEV2ZW50OiAkZXZlbnQsXG4gICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWUsXG4gICAgICAgIGZvY3VzT25PcGVuOiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93U2VsbCAoJGV2ZW50LCBwYXNzU3ltYm9sLCBwYXNzQ29tcGFueSkge1xuICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICBsb2NhbHM6IHtwYXNzU3ltYm9sOiBwYXNzU3ltYm9sLCBwYXNzQ29tcGFueTogcGFzc0NvbXBhbnl9LFxuICAgICAgICBjb250cm9sbGVyOiAnc2VsbERpYWxvZ0NvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICdzZWxsRGlhbG9nJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9kaWFsb2cvc2VsbERpYWxvZy50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICAgIHRhcmdldEV2ZW50OiAkZXZlbnQsXG4gICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWUsXG4gICAgICAgIGZvY3VzT25PcGVuOiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93VG9hc3QgKGFjdGlvbiwgcXVhbnRpdHksIHN5bWJvbCwgcHJpY2UpIHtcbiAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICRtZFRvYXN0XG4gICAgICAgICAgLnNpbXBsZSgpXG4gICAgICAgICAgLnRleHRDb250ZW50KCdZb3UgJyArIGFjdGlvbiArICcgJyArIHF1YW50aXR5ICsgJyAnICsgc3ltYm9sICsgJyBzaGFyZXMgZm9yICQnICsgcHJpY2UpXG4gICAgICAgICAgLnBvc2l0aW9uKCdib3R0b20gcmlnaHQnKVxuICAgICAgICAgIC5oaWRlRGVsYXkoNTAwMClcbiAgICAgICAgICAudG9hc3RDbGFzcygnYnMtdG9hc3QnKSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbG9zZURpYWxvZyAoKSB7XG4gICAgICAkbWREaWFsb2cuaGlkZSgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZGluZyAobG9hZGluZywgdmFsdWUsIHRpbWVvdXQpIHtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbG9hZGluZyA9IHZhbHVlXG4gICAgICB9LCB0aW1lb3V0IHx8IDUwMClcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignc2VsbERpYWxvZ0NvbnRyb2xsZXInLCBzZWxsRGlhbG9nQ29udHJvbGxlcilcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gc2VsbERpYWxvZ0NvbnRyb2xsZXIgKCRyb290U2NvcGUsIHByaWNlLCBwcm9maWxlLCBkaWFsb2csIHBhc3NTeW1ib2wsIHBhc3NDb21wYW55KSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0uc3ltYm9sID0gcGFzc1N5bWJvbFxuICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuXG4gICAgdm0uY2xvc2VEaWFsb2cgPSBkaWFsb2cuY2xvc2VEaWFsb2dcbiAgICB2bS5zaG93VG9hc3QgPSBkaWFsb2cuc2hvd1RvYXN0XG4gICAgdm0uc2VsbFN0b2NrID0gc2VsbFN0b2NrXG5cbiAgICBwcmljZS5nZXRQcmljZSh2bS5zeW1ib2wsIG51bGwsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0uc3RvY2tQcmljZSA9IHJlc1xuICAgICAgfVxuICAgIH0pXG5cbiAgICBwcm9maWxlLmdldFN0b2NrQW5kRnVuZHModm0uc3ltYm9sLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS51c2VyID0gZGF0YVxuICAgICAgICB2bS5zdG9ja1F1YW50aXR5ID0gdm0udXNlci5zdG9jay5xdWFudGl0eVxuICAgICAgICB2bS51c2VyU3RvY2tQcmljZSA9IHZtLnVzZXIuc3RvY2sucHJpY2VcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gc2VsbFN0b2NrIChwcmljZSwgcXVhbnRpdHkpIHtcbiAgICAgIHZhciBzZWxsQWxsID0gdm0udXNlci5zdG9jay5xdWFudGl0eSAtIHF1YW50aXR5XG4gICAgICB2YXIgcHJvZml0ID0gKHZtLnN0b2NrUHJpY2UgLSB2bS51c2VyU3RvY2tQcmljZSkgKiBxdWFudGl0eVxuXG4gICAgICBwcm9maWxlLnNlbGxTdG9jayh2bS5zeW1ib2wsIHBhc3NDb21wYW55LCBwcmljZSwgcXVhbnRpdHksIHByb2ZpdCwgc2VsbEFsbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLmNsb3NlRGlhbG9nKClcbiAgICAgICAgICB2bS5zaG93VG9hc3QoJ3NvbGQnLCBxdWFudGl0eSwgdm0uc3ltYm9sLCAoKHByaWNlICogcXVhbnRpdHkpLnRvRml4ZWQoMikucmVwbGFjZSgvKFxcZCkoPz0oXFxkezN9KStcXC4pL2csICckMSwnKSkpXG4gICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd0cmFuc2FjdGlvbicpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2F2YXRhcicsIFtdKVxuICAgIC5mYWN0b3J5KCdhdmF0YXInLCBhdmF0YXIpXG5cbiAgZnVuY3Rpb24gYXZhdGFyICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2V0QXZhdGFyOiBzZXRBdmF0YXIsXG4gICAgICBpbml0aWFsczogaW5pdGlhbHNcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRBdmF0YXIgKHN0b2NrQXJyYXkpIHtcbiAgICAgIHN0b2NrQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoc3RvY2spIHtcbiAgICAgICAgc3RvY2suYXZhdGFyID0gaW5pdGlhbHMoc3RvY2suY29tcGFueSlcbiAgICAgIH0pXG4gICAgICByZXR1cm4gc3RvY2tBcnJheVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRpYWxzIChuYW1lKSB7XG4gICAgICB2YXIgaW5pdGlhbHMgPSBuYW1lLnNwbGl0KCcgJywgMilcbiAgICAgIHZhciBhdmF0YXIgPSAnJ1xuICAgICAgaW5pdGlhbHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpZiAoaXRlbSA9PT0gJ0luYy4nKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgYXZhdGFyICs9IGl0ZW1bMF1cbiAgICAgIH0pXG4gICAgICByZXR1cm4gYXZhdGFyLnRvVXBwZXJDYXNlKClcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdzaG93V2l0aERlbGF5Jywgc2hvd1dpdGhEZWxheSlcblxuICAvLyBDT0RFIFNPVVJDRTogaHR0cHM6Ly9jb2RlcmV2aWV3LnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy82MjAwNS9zaG93LXdpdGgtZGVsYXktZGlyZWN0aXZlXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBzaG93V2l0aERlbGF5ICgkdGltZW91dCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgbGluazogZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICRlbGVtZW50LmFkZENsYXNzKCduZy1oaWRlJylcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKCduZy1oaWRlJylcbiAgICAgICAgfSwgYXR0cnMuc2hvd1dpdGhEZWxheSB8fCAyMDAwKVxuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdwcmljZScsIFtdKVxuICAgIC5mYWN0b3J5KCdwcmljZScsIHByaWNlKVxuXG4gIGZ1bmN0aW9uIHByaWNlICgkaHR0cCkge1xuICAgIHJldHVybiB7XG4gICAgICBnZXRQcmljZTogZ2V0UHJpY2UsXG4gICAgICBnZXRQcmljZXM6IGdldFByaWNlc1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByaWNlIChzeW1ib2wsIG1hcmtldCwgY2IpIHtcbiAgICAgIGlmIChtYXJrZXQgIT09IG51bGwpIHtcbiAgICAgICAgJGh0dHBcbiAgICAgICAgICAuZ2V0KCcvYXBpL3ByaWNlLycgKyBzeW1ib2wgKyAnLycgKyBtYXJrZXQpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHJlcy5kYXRhLnByaWNlLnByaWNlKVxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBjYignRXJyb3I6ICcgKyBlcnIuZGF0YS5lcnJvciwgbnVsbClcbiAgICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGh0dHBcbiAgICAgICAgICAuZ2V0KCcvYXBpL3ByaWNlLycgKyBzeW1ib2wpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHJlcy5kYXRhLnByaWNlLnByaWNlKVxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBjYignRXJyb3I6IHN0YXR1cyAnICsgZXJyLnN0YXR1cywgbnVsbClcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByaWNlcyAoc3ltYm9scywgY2IpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5wb3N0KCcvYXBpL3ByaWNlL211bHRpcGxlJywgc3ltYm9scylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIHJldHVybiBjYihudWxsLCByZXMuZGF0YS5wcmljZXMpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gY2IoJ0Vycm9yOiBzdGF0dXMgJyArIGVyci5zdGF0dXMsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ2hvbWVDb250cm9sbGVyJywgaG9tZUNvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gaG9tZUNvbnRyb2xsZXIgKCRodHRwLCBhdmF0YXIsIGRpYWxvZykge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLm1hcmtldHMgPSBbJ1VTJywgJ0xTRScsICdFVVJPJywgJ1RNWCcsICdIS0UnLCAnSU5ESUEnXVxuICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuXG4gICAgdm0uc2hvd1NlbGwgPSBkaWFsb2cuc2hvd1NlbGxcbiAgICB2bS5zaG93QnV5ID0gZGlhbG9nLnNob3dCdXlcbiAgICB2bS5nZXRSaXNlcnNGYWxsZXJzID0gZ2V0UmlzZXJzRmFsbGVyc1xuXG4gICAgZ2V0UmlzZXJzRmFsbGVycygnVVMnKVxuXG4gICAgZnVuY3Rpb24gZ2V0UmlzZXJzRmFsbGVycyAobWFya2V0KSB7XG4gICAgICB2bS5sb2FkaW5nID0gdHJ1ZVxuXG4gICAgICBpZiAodm1bJ21hcmtldHMnXS5pbmNsdWRlcyhtYXJrZXQpKSB7XG4gICAgICAgICRodHRwXG4gICAgICAgICAgLmdldCgnL2FwaS9yaXNlZmFsbC8nICsgbWFya2V0KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgICB2bS5lcnJvciA9IHJlcy5kYXRhLmVycm9yXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2bS5lcnJvciA9IG51bGxcbiAgICAgICAgICAgICAgdm0uc3RvY2tzID0gcmVzLmRhdGEuc3RvY2tzLnN0b2Nrc1xuICAgICAgICAgICAgICBhdmF0YXIuc2V0QXZhdGFyKHZtLnN0b2NrcylcbiAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLmVycm9yID0gJ05vIHN1Y2ggbWFya2V0OiAnICsgbWFya2V0XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ25ld3NDb250cm9sbGVyJywgbmV3c0NvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gbmV3c0NvbnRyb2xsZXIgKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBuZXdzKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0uZ2V0TmV3cyA9IGdldE5ld3NcblxuICAgIGZ1bmN0aW9uIGdldE5ld3MgKHN5bWJvbCkge1xuICAgICAgbmV3cy5nZXROZXdzKHN5bWJvbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRSYW5kb21OZXdzICgpIHtcbiAgICAgIG5ld3MuZ2V0UmFuZG9tTmV3cyhmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0ubmV3cyA9IFtdXG4gICAgICAgICAgcmVzLmRhdGEubmV3cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5uZXdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtLm5ld3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2bS5uZXdzLnB1c2goaXRlbS5uZXdzW2ldKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBuZXdzLnNodWZmbGVOZXdzKHZtLm5ld3MpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKCRzdGF0ZS5jdXJyZW50Lm5hbWUgPT09ICduZXdzJykge1xuICAgICAgZ2V0UmFuZG9tTmV3cygpXG4gICAgfSBlbHNlIHtcbiAgICAgIGdldE5ld3MoJHN0YXRlUGFyYW1zLnN5bWJvbClcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbmV3cycsIFtdKVxuICAgIC5mYWN0b3J5KCduZXdzJywgbmV3cylcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gbmV3cyAoJGh0dHApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0TmV3czogZ2V0TmV3cyxcbiAgICAgIGdldFJhbmRvbU5ld3M6IGdldFJhbmRvbU5ld3MsXG4gICAgICBzaHVmZmxlTmV3czogc2h1ZmZsZU5ld3NcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXROZXdzIChzeW1ib2wsIGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL25ld3Mvc3ltYm9sLycgKyBzeW1ib2wpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBjYihudWxsLCByZXMpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjYihlcnIsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tTmV3cyAoY2IpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5nZXQoJy9hcGkvbmV3cy9yYW5kb20nKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzKVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY2IoZXJyLCBudWxsKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIEZpc2hlcuKAk1lhdGVzIHNodWZmbGUgYWxnb3JpdGhtIGZvciByYW5kb20gbmV3cyBhcnJheVxuICAgIGZ1bmN0aW9uIHNodWZmbGVOZXdzIChhcnJheSkge1xuICAgICAgdmFyIG0gPSBhcnJheS5sZW5ndGhcbiAgICAgIHZhciB0XG4gICAgICB2YXIgaVxuXG4gICAgICAvLyBXaGlsZSB0aGVyZSByZW1haW4gZWxlbWVudHMgdG8gc2h1ZmZsZeKAplxuICAgICAgd2hpbGUgKG0pIHtcbiAgICAgICAgLy8gUGljayBhIHJlbWFpbmluZyBlbGVtZW504oCmXG4gICAgICAgIGkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtLS0pXG5cbiAgICAgICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50LlxuICAgICAgICB0ID0gYXJyYXlbbV1cbiAgICAgICAgYXJyYXlbbV0gPSBhcnJheVtpXVxuICAgICAgICBhcnJheVtpXSA9IHRcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFycmF5XG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3BvcnRmb2xpb0NvbnRyb2xsZXInLCBwb3J0Zm9saW9Db250cm9sbGVyKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBwb3J0Zm9saW9Db250cm9sbGVyICgkc2NvcGUsICRodHRwLCBwcmljZSwgZGlhbG9nLCBhdmF0YXIpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5zaG93U2VsbCA9IGRpYWxvZy5zaG93U2VsbFxuICAgIHZtLnNob3dCdXkgPSBkaWFsb2cuc2hvd0J1eVxuICAgIHZtLmdldFBvcnRmb2xpbyA9IGdldFBvcnRmb2xpb1xuXG4gICAgJHNjb3BlLiRvbigndHJhbnNhY3Rpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICBnZXRQb3J0Zm9saW8oKVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBnZXRQb3J0Zm9saW8gKCkge1xuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS91c2VyL3BvcnRmb2xpbycpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBpZiAocmVzLmRhdGEubWVzc2FnZSkge1xuICAgICAgICAgICAgdm0ubm9Qb3J0Zm9saW8gPSByZXMuZGF0YS5tZXNzYWdlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZtLnBvcnRmb2xpbyA9IHJlcy5kYXRhLnBvcnRmb2xpb1xuICAgICAgICAgICAgdm0uZnVuZHMgPSByZXMuZGF0YS5mdW5kc1xuICAgICAgICAgICAgZ2V0UHJpY2VzKHZtLnBvcnRmb2xpbylcbiAgICAgICAgICAgIGF2YXRhci5zZXRBdmF0YXIodm0ucG9ydGZvbGlvKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQcmljZXMgKHBvcnRmb2xpbykge1xuICAgICAgdmFyIHN5bWJvbHMgPSBbXVxuICAgICAgcG9ydGZvbGlvLmZvckVhY2goZnVuY3Rpb24gKHN0b2NrKSB7XG4gICAgICAgIHN5bWJvbHMucHVzaChzdG9jay5zeW1ib2wpXG4gICAgICB9KVxuICAgICAgcHJpY2UuZ2V0UHJpY2VzKHN5bWJvbHMsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXRjaFByaWNlcyh2bS5wb3J0Zm9saW8sIHJlcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXRjaFByaWNlcyAodXNlclBvcnRmb2xpbywgY3VyclByaWNlcykge1xuICAgICAgdXNlclBvcnRmb2xpby5mb3JFYWNoKGZ1bmN0aW9uICh1c2VyU3RvY2spIHtcbiAgICAgICAgY3VyclByaWNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzdG9jaykge1xuICAgICAgICAgIGlmIChzdG9jay5zeW1ib2wgPT09IHVzZXJTdG9jay5zeW1ib2wpIHtcbiAgICAgICAgICAgIHVzZXJTdG9jay5jdXJyUHJpY2UgPSBzdG9jay5wcmljZVxuICAgICAgICAgICAgdXNlclN0b2NrLm1hcmtldCA9IHN0b2NrLm1hcmtldFxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdXNlclBvcnRmb2xpb1xuICAgIH1cblxuICAgIC8vIEZJUkUgVE8gUE9QVUxBVEUgRE9NIFdJVEggREFUQVxuICAgIGdldFBvcnRmb2xpbygpXG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcigncHJvZmlsZUNvbnRyb2xsZXInLCBwcm9maWxlQ29udHJvbGxlcilcblxuICBmdW5jdGlvbiBwcm9maWxlQ29udHJvbGxlciAoJGh0dHAsIHByb2ZpbGUpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5wcm9maWxlID0gcHJvZmlsZS5nZXRQcm9maWxlKClcblxuICAgIHByb2ZpbGUuZ2V0RnVuZHMoZnVuY3Rpb24gKGVyciwgZnVuZHMpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLmZ1bmRzID0gZnVuZHNcbiAgICAgIH1cbiAgICB9KVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ3Byb2ZpbGUnLCBbXSlcbiAgICAuZmFjdG9yeSgncHJvZmlsZScsIHByb2ZpbGUpXG5cbiAgZnVuY3Rpb24gcHJvZmlsZSAoJGh0dHApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0VXNlcjogZ2V0VXNlcixcbiAgICAgIGdldFN0b2NrQW5kRnVuZHM6IGdldFN0b2NrQW5kRnVuZHMsXG4gICAgICBnZXRQcm9maWxlOiBnZXRQcm9maWxlLFxuICAgICAgZ2V0RnVuZHM6IGdldEZ1bmRzLFxuICAgICAgYnV5U3RvY2s6IGJ1eVN0b2NrLFxuICAgICAgc2VsbFN0b2NrOiBzZWxsU3RvY2ssXG4gICAgICB3ZWlnaHRlZEF2ZXJhZ2U6IHdlaWdodGVkQXZlcmFnZVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByb2ZpbGUgKCkge1xuICAgICAgdmFyIHVzZXJQcm9maWxlID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2ZpbGUnKSlcblxuICAgICAgaWYgKH51c2VyUHJvZmlsZS5uYW1lLmluZGV4T2YoJ0AnKSkge1xuICAgICAgICB1c2VyUHJvZmlsZS5uYW1lID0gdXNlclByb2ZpbGUubmFtZS5zcGxpdCgnQCcpWzBdXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1c2VyUHJvZmlsZVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFVzZXIgKGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL3VzZXIvJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGNiKHJlcy5kYXRhLnVzZXIpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RnVuZHMgKGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL3VzZXIvZnVuZHMvJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGNiKG51bGwsIHJlcy5kYXRhLmZ1bmRzKVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY2IoJ0Vycm9yOiBDYW5ub3QgZ2V0IGZ1bmRzIScgKyBlcnIsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U3RvY2tBbmRGdW5kcyAoc3ltYm9sLCBjYikge1xuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS91c2VyL3BvcnRmb2xpby8nICsgc3ltYm9sKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBzdG9jazogcmVzLmRhdGEuc3RvY2ssXG4gICAgICAgICAgICBmdW5kczogcmVzLmRhdGEuZnVuZHNcbiAgICAgICAgICB9XG4gICAgICAgICAgY2IobnVsbCwgZGF0YSlcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNiKCdFcnJvcjogc3RhdHVzJyArIGVyci5zdGF0dXMsIG51bGwsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnV5U3RvY2sgKHN5bWJvbCwgY29tcGFueSwgYXZnUHJpY2UsIHByaWNlLCB0b3RhbFF0eSwgZnVuZHMsIGV4aXN0cywgY2IpIHtcbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICBzeW1ib2w6IHN5bWJvbCxcbiAgICAgICAgY29tcGFueTogY29tcGFueSxcbiAgICAgICAgcHJpY2U6IGF2Z1ByaWNlLFxuICAgICAgICBidXlQcmljZTogcHJpY2UsXG4gICAgICAgIHF1YW50aXR5OiB0b3RhbFF0eSxcbiAgICAgICAgZnVuZHM6IGZ1bmRzLnRvRml4ZWQoMyksXG4gICAgICAgIGV4aXN0czogZXhpc3RzXG4gICAgICB9XG5cbiAgICAgICRodHRwXG4gICAgICAgIC5wb3N0KCcvYXBpL3VzZXIvYnV5JywgZGF0YSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGNiKG51bGwsIHJlcylcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNiKGVyciwgbnVsbClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxsU3RvY2sgKHN5bWJvbCwgY29tcGFueSwgc2VsbFByaWNlLCBxdWFudGl0eSwgcHJvZml0LCBzZWxsQWxsLCBjYikge1xuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIHN5bWJvbDogc3ltYm9sLFxuICAgICAgICBjb21wYW55OiBjb21wYW55LFxuICAgICAgICBzZWxsUHJpY2U6IHNlbGxQcmljZSxcbiAgICAgICAgcXVhbnRpdHk6IHF1YW50aXR5LFxuICAgICAgICBwcm9maXQ6IHByb2ZpdCxcbiAgICAgICAgc2VsbEFsbDogc2VsbEFsbFxuICAgICAgfVxuXG4gICAgICAkaHR0cFxuICAgICAgICAucG9zdCgnYXBpL3VzZXIvc2VsbCcsIGRhdGEpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBjYihudWxsLCByZXMpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgY2IoZXJyLCBudWxsKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdlaWdodGVkQXZlcmFnZSAocHJldlByaWNlLCBjdXJyUHJpY2UsIHByZXZRdHksIGN1cnJRdHkpIHtcbiAgICAgIHJldHVybiAoKChwcmV2UHJpY2UgKiBwcmV2UXR5KSArIChjdXJyUHJpY2UgKiBjdXJyUXR5KSkgLyAocHJldlF0eSArIGN1cnJRdHkpKS50b0ZpeGVkKDMpXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3NlYXJjaENvbnRyb2xsZXInLCBzZWFyY2hDb250cm9sbGVyKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBzZWFyY2hDb250cm9sbGVyICgkaHR0cCwgJHN0YXRlKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0ucXVlcnlTdG9jayA9IHF1ZXJ5U3RvY2tcbiAgICB2bS5nZXREYXRhID0gZ2V0RGF0YVxuXG4gICAgZnVuY3Rpb24gcXVlcnlTdG9jayAoc3RvY2spIHtcbiAgICAgIHJldHVybiAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL2RhdGEvc3ltYm9scy8nICsgc3RvY2spXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdXG5cbiAgICAgICAgICByZXMuZGF0YS5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChpdGVtLnN5bWJvbClcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdHNcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXREYXRhIChpdGVtKSB7XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICAkc3RhdGUudHJhbnNpdGlvblRvKCdzdG9jaycsIHtzeW1ib2w6IGl0ZW19KVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3NlYXJjaCcsIHNlYXJjaClcblxuICBmdW5jdGlvbiBzZWFyY2ggKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3NlYXJjaC9zZWFyY2gudGVtcGxhdGUuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAnc2VhcmNoQ29udHJvbGxlcicsXG4gICAgICBjb250cm9sbGVyQXM6ICdzZWFyY2gnXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3NpZGVuYXZDb250cm9sbGVyJywgc2lkZW5hdkNvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gc2lkZW5hdkNvbnRyb2xsZXIgKCRodHRwLCAkcm9vdFNjb3BlLCAkc2NvcGUsICRsb2NhdGlvbiwgYXV0aCwgc3RvcmUsXG4gICAgc2lkZW5hdiwgcHJvZmlsZSkge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLmdldE5ld3MgPSBnZXROZXdzXG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0XG5cbiAgICB2bS5jbG9zZVNpZGVuYXYgPSBzaWRlbmF2LmNsb3NlU2lkZW5hdlxuICAgIHZtLmF1dGggPSBhdXRoXG5cbiAgICB2bS5tZXNzYWdlID0gJydcbiAgICB2bS5zaWRlbmF2U2hvdyA9IGZhbHNlXG5cbiAgICAvLyBLZWVwIHByb2ZpbGUgZGF0YSBhbmQgc2lkZW5hdiBvcGVuIG9uIHBhZ2UgcmVmcmVzaFxuICAgIC8vIGlmIHVzZXIgaXMgbG9nZ2VkIGluXG4gICAgaWYgKHZtLmF1dGguaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICB2bS5wcm9maWxlID0gcHJvZmlsZS5nZXRQcm9maWxlKClcbiAgICAgIHZtLnNpZGVuYXZTaG93ID0gdHJ1ZVxuICAgICAgZ2V0RnVuZHMoKVxuICAgIH1cblxuICAgICRzY29wZS4kb24oJ3VzZXJMb2dJbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZtLnByb2ZpbGUgPSBwcm9maWxlLmdldFByb2ZpbGUoKVxuICAgICAgdm0uc2lkZW5hdlNob3cgPSB0cnVlXG4gICAgICBnZXRGdW5kcygpXG4gICAgfSlcblxuICAgICRzY29wZS4kb24oJ3RyYW5zYWN0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgZ2V0RnVuZHMoKVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBnZXRGdW5kcyAoKSB7XG4gICAgICBwcm9maWxlLmdldEZ1bmRzKGZ1bmN0aW9uIChlcnIsIGZ1bmRzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9XG4gICAgICAgIHZtLmZ1bmRzID0gZnVuZHNcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TmV3cyAoKSB7XG4gICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvbmV3cy9BQVBMJywge1xuICAgICAgICBza2lwQXV0aG9yaXphdGlvbjogdHJ1ZVxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdm0ubWVzc2FnZSA9IHJlc3BvbnNlLmRhdGEubmV3cy5zeW1ib2xcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9nb3V0ICgpIHtcbiAgICAgIC8vIFRoZSBzaWdub3V0IG1ldGhvZCBvbiB0aGUgYXV0aCBzZXJ2aWNlXG4gICAgICAvLyBzZXRzIGlzQXV0aGVudGljYXRlZCB0byBmYWxzZSBidXQgd2VcbiAgICAgIC8vIGFsc28gbmVlZCB0byByZW1vdmUgdGhlIHByb2ZpbGUgYW5kXG4gICAgICAvLyB0b2tlbiBmcm9tIGxvY2FsIHN0b3JhZ2VcbiAgICAgIGF1dGguc2lnbm91dCgpXG4gICAgICBzdG9yZS5yZW1vdmUoJ3Byb2ZpbGUnKVxuICAgICAgc3RvcmUucmVtb3ZlKCd0b2tlbicpXG4gICAgICB2bS5zaWRlbmF2U2hvdyA9IGZhbHNlXG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2xvZ2dlZC1pbicpXG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3VzZXJMb2dPdXQnKVxuICAgICAgdm0udXNlckxvZ2dlZCA9IGZhbHNlXG4gICAgICAkbG9jYXRpb24ucGF0aCgnL3dlbGNvbWUnKVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3NpZGVuYXYnLCBzaWRlbmF2KVxuXG4gIGZ1bmN0aW9uIHNpZGVuYXYgKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3NpZGVuYXYvc2lkZW5hdi50ZW1wbGF0ZS5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXI6ICdzaWRlbmF2Q29udHJvbGxlcicsXG4gICAgICBjb250cm9sbGVyQXM6ICdzaWRlbmF2J1xuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdzaWRlbmF2JywgW10pXG4gICAgLmZhY3RvcnkoJ3NpZGVuYXYnLCBzaWRlbmF2KVxuXG4gIGZ1bmN0aW9uIHNpZGVuYXYgKCRtZFNpZGVuYXYsIGF1dGgsIHN0b3JlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvZ2dsZVNpZGVuYXY6IHRvZ2dsZVNpZGVuYXYsXG4gICAgICBjbG9zZVNpZGVuYXY6IGNsb3NlU2lkZW5hdlxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGVuYXYgKGlkKSB7XG4gICAgICAkbWRTaWRlbmF2KGlkIHx8ICdsZWZ0JykudG9nZ2xlKClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbG9zZVNpZGVuYXYgKGlkKSB7XG4gICAgICAkbWRTaWRlbmF2KGlkIHx8ICdsZWZ0JykuY2xvc2UoKVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdzdG9ja0NvbnRyb2xsZXInLCBzdG9ja0NvbnRyb2xsZXIpXG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIHN0b2NrQ29udHJvbGxlciAoJHN0YXRlUGFyYW1zLCAkaHR0cCwgZGlhbG9nLCBwcmljZSwgbmV3cywgYXZhdGFyKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0ubG9hZGluZyA9IGZhbHNlXG5cbiAgICB2bS5zaG93QnV5ID0gZGlhbG9nLnNob3dCdXlcbiAgICB2bS5zaG93U2VsbCA9IGRpYWxvZy5zaG93U2VsbFxuXG4gICAgZnVuY3Rpb24gZ2V0RGF0YSAoKSB7XG4gICAgICB2bS5sb2FkaW5nID0gdHJ1ZVxuXG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL2RhdGEvc3ltYm9sLycgKyAkc3RhdGVQYXJhbXMuc3ltYm9sICsgJy8nICsgJHN0YXRlUGFyYW1zLm1hcmtldClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGlmIChyZXMuZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgdm0ubm9Db21wYW55ID0gcmVzLmRhdGEuZXJyb3JcbiAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2bS5jb21wYW55ID0gcmVzLmRhdGEuZGF0YVxuXG4gICAgICAgICAgICBwcmljZS5nZXRQcmljZSgkc3RhdGVQYXJhbXMuc3ltYm9sLCAkc3RhdGVQYXJhbXMubWFya2V0IHx8IHZtLmNvbXBhbnkubWFya2V0LCBmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdm0ucHJpY2UgPSByZXNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgbmV3cy5nZXROZXdzKCRzdGF0ZVBhcmFtcy5zeW1ib2wsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdm0ubmV3c0Vycm9yID0gJ0Vycm9yIGdldHRpbmcgbmV3cydcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgdm0ubmV3cyA9IHJlcy5kYXRhLm5ld3MubmV3c1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgdm0ubmV3c0Vycm9yID0gZXJyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgdm0uYXZhdGFyID0gYXZhdGFyLmluaXRpYWxzKHZtLmNvbXBhbnkuY29tcGFueSB8fCAkc3RhdGVQYXJhbXMuc3ltYm9sKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBnZXREYXRhKClcbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCd0b29sYmFyQ29udHJvbGxlcicsIHRvb2xiYXJDb250cm9sbGVyKVxuXG4gIGZ1bmN0aW9uIHRvb2xiYXJDb250cm9sbGVyIChhdXRoLCBzdG9yZSwgJGxvY2F0aW9uLCAkc2NvcGUsICRyb290U2NvcGUsICRodHRwLCBzaWRlbmF2KSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0ubG9naW4gPSBsb2dpblxuXG4gICAgdm0uYXV0aCA9IGF1dGhcbiAgICB2bS50b2dnbGVTaWRlbmF2ID0gc2lkZW5hdi50b2dnbGVTaWRlbmF2XG4gICAgdm0udXNlckxvZ2dlZCA9IGZhbHNlXG5cbiAgICBpZiAoYXV0aC5pc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIHZtLnVzZXJMb2dnZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgJHNjb3BlLiRvbigndXNlckxvZ091dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZtLnVzZXJMb2dnZWQgPSBmYWxzZVxuICAgIH0pXG5cbiAgICAkc2NvcGUuJG9uKCd1c2VyTG9nSW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2bS51c2VyTG9nZ2VkID0gdHJ1ZVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBsb2dpbiAoKSB7XG4gICAgICAvLyBUaGUgYXV0aCBzZXJ2aWNlIGhhcyBhIHNpZ25pbiBtZXRob2QgdGhhdFxuICAgICAgLy8gbWFrZXMgdXNlIG9mIEF1dGgwTG9jay4gSWYgYXV0aGVudGljYXRpb25cbiAgICAgIC8vIGlzIHN1Y2Nlc3NmdWwsIHRoZSB1c2VyJ3MgcHJvZmlsZSBhbmQgdG9rZW5cbiAgICAgIC8vIGFyZSBzYXZlZCBpbiBsb2NhbCBzdG9yYWdlIHdpdGggdGhlIHN0b3JlIHNlcnZpY2VcbiAgICAgIGF1dGguc2lnbmluKHtcbiAgICAgICAgYXV0aFBhcmFtczoge1xuICAgICAgICAgIHNjb3BlOiAnb3BlbmlkIGVtYWlsJ1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAocHJvZmlsZSwgdG9rZW4pIHtcbiAgICAgICAgc3RvcmUuc2V0KCdwcm9maWxlJywgcHJvZmlsZSlcbiAgICAgICAgc3RvcmUuc2V0KCd0b2tlbicsIHRva2VuKVxuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3dlbGNvbWUnKVxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2xvZ2dlZC1pbicpXG4gICAgICAgIHZtLnVzZXJMb2dnZWQgPSB0cnVlXG4gICAgICAgIHVzZXJBY2NvdW50KGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICB2bS5tZXNzYWdlID0gcmVzLmRhdGEubWVzc2FnZVxuICAgICAgICAgIHZtLmZ1bmRzID0gcmVzLmRhdGEudXNlci5mdW5kc1xuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndXNlckxvZ0luJylcbiAgICAgICAgfSlcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXNlckFjY291bnQgKGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCdhcGkvdXNlci8nKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IocmVzKVxuICAgICAgICB9KVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3Rvb2xiYXInLCB0b29sYmFyKVxuXG4gIGZ1bmN0aW9uIHRvb2xiYXIgKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3Rvb2xiYXIvdG9vbGJhci50ZW1wbGF0ZS5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXI6ICd0b29sYmFyQ29udHJvbGxlcicsXG4gICAgICBjb250cm9sbGVyQXM6ICd0b29sYmFyJ1xuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCd0cmFuc2FjdGlvbnNDb250cm9sbGVyJywgdHJhbnNhY3Rpb25zQ29udHJvbGxlcilcblxuICBmdW5jdGlvbiB0cmFuc2FjdGlvbnNDb250cm9sbGVyICgkaHR0cCwgYXZhdGFyKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgZnVuY3Rpb24gZ2V0VHJhbnNhY3Rpb25zICgpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5nZXQoJy9hcGkvdHJhbnNhY3Rpb24vYWxsJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGlmIChyZXMuZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgdm0ubm9UcmFuc2FjdGlvbnMgPSByZXMuZGF0YS5lcnJvclxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2bS50cmFuc2FjdGlvbnMgPSByZXMuZGF0YS50cmFuc2FjdGlvbnNcbiAgICAgICAgICAgIGF2YXRhci5zZXRBdmF0YXIodm0udHJhbnNhY3Rpb25zKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0VHJhbnNhY3Rpb25zKClcbiAgfVxufSkoKVxuIl19
