!function(){"use strict";angular.module("app",["auth0","angular-storage","angular-jwt","ngMaterial","ui.router","ngLetterAvatar","sidenav","profile","price","news","avatar"])}(),function(){"use strict";function t(t,o,e,n,r,a,l){function i(t,o,e,n,r){var a;return e(function(){a=o.get("auth")}),{responseError:function(o){return 401===o.status&&(a.signout(),n.remove("profile"),n.remove("token"),r.path("/welcome")),t.reject(o)}}}i.$inject=["$q","$injector","$timeout","store","$location"],e.init({domain:"danielnitu.eu.auth0.com",clientID:"1gLOvetcrjC9GW2kEeRzEtJRJH700ia6"}),n.otherwise("/welcome"),r.state("welcome",{url:"/welcome",templateUrl:"app/components/welcome/welcome.template.html",controller:"toolbarController as toolbar"}).state("about",{url:"/about",templateUrl:"app/components/about/about.template.html"}).state("home",{url:"/home",templateUrl:"app/components/home/home.template.html",controller:"homeController as home"}).state("profile",{url:"/profile",templateUrl:"app/components/profile/profile.template.html",controller:"profileController as profile"}).state("portfolio",{url:"/portfolio",templateUrl:"app/components/portfolio/portfolio.template.html",controller:"portfolioController as portfolio"}).state("stock",{url:"/stock/:symbol/:market",templateUrl:"app/components/stock/stock.template.html",controller:"stockController as stock"}).state("news",{url:"/news/:symbol",templateUrl:"app/components/news/news.template.html",controller:"newsController as news"}).state("transactions",{url:"/transactions",templateUrl:"app/components/transactions/transactions.template.html",controller:"transactionsController as transactions"}),l.config({tokenGetter:["options",function(t){return".html"===t.url.substr(t.url.length-5)?null:window.localStorage.getItem("token").slice(1,-1)}],whiteListedDomains:["trade.boutique","localhost","jsonplaceholder.typicode.com"]}),t.theme("default").primaryPalette("blue").accentPalette("grey").warnPalette("red"),t.theme("dark-blue").backgroundPalette("blue").dark(),o.factory("redirect",i),a.interceptors.push("jwtInterceptor"),a.interceptors.push("redirect")}t.$inject=["$mdThemingProvider","$provide","authProvider","$urlRouterProvider","$stateProvider","$httpProvider","jwtOptionsProvider"],angular.module("app").config(t)}(),function(){"use strict";function t(t,o,e,n,r,a){t.$on("$locationChangeStart",function(){var t=n.get("token");t&&(r.isTokenExpired(t)||e.isAuthenticated||(document.body.classList.add("logged-in"),e.authenticate(n.get("profile"),t))),e.isAuthenticated||a.path("/welcome")})}t.$inject=["$rootScope","$state","auth","store","jwtHelper","$location"],angular.module("app").run(t)}(),function(){"use strict";function t(t,o,e,n,r,a,l){function i(o,e){n.loading(s.loading,!0),s.buyQuantity=e,s.buyPrice=(e*o).toFixed(2);var a=s.user.stock.quantity,l=r.weightedAverage(s.user.stock.price,o,a,e),i=s.user.stock.quantity+e,c=s.user.funds-(o*e).toFixed(2);r.buyStock(s.symbol,s.company,l,o,i,c,a,function(o,e){n.loading(s.loading,!1),t.$broadcast("transaction"),o?s.error=o:(s.closeDialog(),s.showToast("bought",s.buyQuantity,s.symbol,s.buyPrice.replace(/(\d)(?=(\d{3})+\.)/g,"$1,")))})}var s=this;s.stockQuantity=1,s.buyQuantity=0,s.buyPrice=0,s.symbol=a,s.company=l,s.loading=!1,s.closeDialog=n.closeDialog,s.showToast=n.showToast,s.buyStock=i,e.getPrice(s.symbol,null,function(t,o){t?s.error=t:s.stockPrice=o.price}),r.getStockAndFunds(s.symbol,function(t,o){t?s.error=t:s.user=o})}t.$inject=["$rootScope","$mdDialog","price","dialog","profile","passSymbol","passCompany"],angular.module("app").controller("buyDialogController",t)}(),function(){"use strict";function t(t,o,e){function n(o,e,n){t.show({locals:{passSymbol:e,passCompany:n},controller:"buyDialogController",controllerAs:"buyDialog",templateUrl:"app/components/dialog/buyDialog.template.html",parent:angular.element(document.body),targetEvent:o,clickOutsideToClose:!0,focusOnOpen:!1})}function r(o,e,n){t.show({locals:{passSymbol:e,passCompany:n},controller:"sellDialogController",controllerAs:"sellDialog",templateUrl:"app/components/dialog/sellDialog.template.html",parent:angular.element(document.body),targetEvent:o,clickOutsideToClose:!0,focusOnOpen:!1})}function a(t,e,n,r){o.show(o.simple().textContent("You "+t+" "+e+" "+n+" shares for $"+r).position("bottom right").hideDelay(5e3).toastClass("bs-toast"))}function l(){t.hide()}function i(t,o,n){e(function(){t=o},n||500)}return{showBuy:n,showSell:r,closeDialog:l,showToast:a,loading:i}}t.$inject=["$mdDialog","$mdToast","$timeout"],angular.module("app").factory("dialog",t)}(),function(){"use strict";function t(t,o,e,n,r,a){function l(o,n){var r=i.user.stock.quantity-n,l=(i.stockPrice-i.userStockPrice)*n;e.sellStock(i.symbol,a,o,n,l,r,function(e,r){e?(i.loading=!1,i.error=e):(i.closeDialog(),i.showToast("sold",n,i.symbol,(o*n).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")),t.$broadcast("transaction"))})}var i=this;i.symbol=r,i.loading=!1,i.closeDialog=n.closeDialog,i.showToast=n.showToast,i.sellStock=l,o.getPrice(i.symbol,null,function(t,o){t?i.error=t:i.stockPrice=o.price}),e.getStockAndFunds(i.symbol,function(t,o){t?i.error=t:(i.user=o,i.stockQuantity=i.user.stock.quantity,i.userStockPrice=i.user.stock.price)})}t.$inject=["$rootScope","price","profile","dialog","passSymbol","passCompany"],angular.module("app").controller("sellDialogController",t)}(),function(){"use strict";function t(){function t(t){return t.forEach(function(t){t.avatar=o(t.company)}),t}function o(t){var o=t.split(" ",2),e="";return o.forEach(function(t){"Inc."!==t&&(e+=t[0])}),e.toUpperCase()}return{setAvatar:t,initials:o}}angular.module("avatar",[]).factory("avatar",t)}(),function(){"use strict";function t(t){return{restrict:"A",link:function(o,e,n){e.addClass("ng-hide"),t(function(){e.removeClass("ng-hide")},n.showWithDelay||2e3)}}}t.$inject=["$timeout"],angular.module("app").directive("showWithDelay",t)}(),function(){"use strict";function t(t){function o(o,e,n){null!==e?t.get("/api/price/"+o+"/"+e).then(function(t){return n(null,t.data.price)},function(t){return n("Error: "+t.data.error,null)}):t.get("/api/price/"+o).then(function(t){return n(null,t.data.price)},function(t){return n("Error: status "+t.status,null)})}function e(o,e){t.post("/api/price/multiple",o).then(function(t){return e(null,t.data.prices)},function(t){return e("Error: status "+t.status,null)})}return{getPrice:o,getPrices:e}}t.$inject=["$http"],angular.module("price",[]).factory("price",t)}(),function(){"use strict";function t(t,o,e){function n(t){e.getNews(t,function(t,o){t?r.error=t:console.log(o)})}var r=this;r.getNews=n,"news"===t.current.name?function(){e.getRandomNews(function(t,o){t?r.error=t:(r.news=[],o.data.news.forEach(function(t){if(t.news.length>1)for(var o=0;o<t.news.length;o++)r.news.push(t.news[o])}),e.shuffleNews(r.news))})}():n(o.symbol)}t.$inject=["$state","$stateParams","news"],angular.module("app").controller("newsController",t)}(),function(){"use strict";function t(t){function o(o,e){t.get("/api/news/symbol/"+o).then(function(t){e(null,t)},function(t){e(t,null)})}function e(o){t.get("/api/news/random").then(function(t){o(null,t)},function(t){o(t,null)})}function n(t){for(var o,e,n=t.length;n;)e=Math.floor(Math.random()*n--),o=t[n],t[n]=t[e],t[e]=o;return t}return{getNews:o,getRandomNews:e,shuffleNews:n}}t.$inject=["$http"],angular.module("news",[]).factory("news",t)}(),function(){"use strict";function t(t,o,e,n,r,a){function l(){e.get("/api/user/portfolio").then(function(t){t.data.message?c.noPortfolio=t.data.message:(c.portfolio=t.data.portfolio,c.funds=t.data.funds,i(c.portfolio),a.setAvatar(c.portfolio))})}function i(t){var o=[];t.forEach(function(t){o.push(t.symbol)}),n.getPrices(o,function(t,o){t?c.error=t:s(c.portfolio,o)})}function s(t,o){return t.forEach(function(t){o.forEach(function(o){o.symbol===t.symbol&&(t.updatedAt=o.updatedAt,t.currPrice=o.price,t.market=o.market)})}),t}var c=this;c.showSell=r.showSell,c.showBuy=r.showBuy,c.getPortfolio=l,c.portfolio=null,t.$on("transaction",function(){l()});var u;t.$on("$destroy",function(){o.cancel(u),u=void 0}),l(),function(){u=o(function(){i(c.portfolio),console.log("Update of portfolio prices")},3e5,10)}()}t.$inject=["$scope","$interval","$http","price","dialog","avatar"],angular.module("app").controller("portfolioController",t)}(),function(){"use strict";function t(t,o,e){function n(e){a.loading=!0,r(e,a.markets)?t.get("/api/risefall/"+e).then(function(t){t.data.error?a.error=t.data.error:(a.error=null,a.stocks=t.data.stocks.stocks,o.setAvatar(a.stocks),a.loading=!1,!1===t.data.stocks.newData&&(a.message="External API not available at this moment. Showing data older than 1 hour."))}):a.error="No such market: "+e}function r(t,o){return o.indexOf(t)>-1}var a=this;a.markets=["US","LSE","EURO","TMX","HKE","INDIA"],a.loading=!1,a.showSell=e.showSell,a.showBuy=e.showBuy,a.getRisersFallers=n,n("US")}t.$inject=["$http","avatar","dialog"],angular.module("app").controller("homeController",t)}(),function(){"use strict";function t(t,o){function e(o){return t.get("/api/data/symbols/"+o).then(function(t){var o=[];return t.data.data.forEach(function(t){o.push(t.symbol)}),o})}function n(t){if(!t)return!1;o.transitionTo("stock",{symbol:t})}var r=this;r.queryStock=e,r.getData=n}t.$inject=["$http","$state"],angular.module("app").controller("searchController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/search/search.template.html",controller:"searchController",controllerAs:"search"}}angular.module("app").directive("search",t)}(),function(){"use strict";function t(t,o){var e=this;e.profile=o.getProfile(),o.getFunds(function(t,o){t?e.error=t:e.funds=o})}t.$inject=["$http","profile"],angular.module("app").controller("profileController",t)}(),function(){"use strict";function t(t){function o(){var t=JSON.parse(window.localStorage.getItem("profile"));return~t.name.indexOf("@")&&(t.name=t.name.split("@")[0]),t.picture_large&&(t.picture=t.picture_large),t}function e(o){t.get("/api/user/").then(function(t){o(t.data.user)})}function n(o){t.get("/api/user/funds/").then(function(t){o(null,t.data.funds)},function(t){o("Error: Cannot get funds!"+t,null)})}function r(o,e){t.get("/api/user/portfolio/"+o).then(function(t){var o={stock:t.data.stock,funds:t.data.funds};e(null,o)},function(t){e("Error: status"+t.status,null,null)})}function a(o,e,n,r,a,l,i,s){var c={symbol:o,company:e,price:n,buyPrice:r,quantity:a,funds:l.toFixed(3),exists:i};t.post("/api/user/buy",c).then(function(t){s(null,t)},function(t){s(t,null)})}function l(o,e,n,r,a,l,i){var s={symbol:o,company:e,sellPrice:n,quantity:r,profit:a,sellAll:l};t.post("api/user/sell",s).then(function(t){i(null,t)},function(t){console.log(t),i(t,null)})}function i(t,o,e,n){return((t*e+o*n)/(e+n)).toFixed(3)}return{getUser:e,getStockAndFunds:r,getProfile:o,getFunds:n,buyStock:a,sellStock:l,weightedAverage:i}}t.$inject=["$http"],angular.module("profile",[]).factory("profile",t)}(),function(){"use strict";function t(t,o,e,n,r,a,l,i,s){function c(){s.getFunds(function(t,o){t&&(f.error=t),f.funds=o})}function u(){t.get("http://localhost:3000/api/news/AAPL",{skipAuthorization:!0}).then(function(t){f.message=t.data.news.symbol})}function p(){a.signout(),l.remove("profile"),l.remove("token"),f.sidenavShow=!1,document.body.classList.remove("logged-in"),o.$broadcast("userLogOut"),f.userLogged=!1,r.path("/welcome")}var f=this;f.getNews=u,f.logout=p,f.closeSidenav=i.closeSidenav,f.auth=a,f.message="",f.sidenavShow=!1,f.auth.isAuthenticated&&(f.profile=s.getProfile(),f.sidenavShow=!0,c()),e.$on("userLogIn",function(){f.profile=s.getProfile(),f.sidenavShow=!0,c()}),e.$on("transaction",function(){c()})}t.$inject=["$http","$rootScope","$scope","$timeout","$location","auth","store","sidenav","profile"],angular.module("app").controller("sidenavController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/sidenav/sidenav.template.html",controller:"sidenavController",controllerAs:"sidenav"}}angular.module("app").directive("sidenav",t)}(),function(){"use strict";function t(t,o,e){function n(o){t(o||"left").toggle()}function r(o){t(o||"left").close()}return{toggleSidenav:n,closeSidenav:r}}t.$inject=["$mdSidenav","auth","store"],angular.module("sidenav",[]).factory("sidenav",t)}(),function(){"use strict";function t(t,o,e,n,r,a,l,i){var s=this;s.loading=!1,s.showBuy=r.showBuy,s.showSell=r.showSell;var c;o.$on("$destroy",function(){t.cancel(c),c=void 0}),function(){s.loading=!0,n.get("/api/data/symbol/"+e.symbol+"/"+e.market).then(function(t){t.data.error?(s.noCompany=t.data.error,s.loading=!1):(s.company=t.data.data,!1===s.company.newData&&(s.oldData="External API not available at this moment. Showing symbol data older than 1 day."),a.getPrice(e.symbol,e.market||s.company.market,function(t,o){t?s.error=t:(s.price=o.price,s.updatedAt=o.updatedAt)}),l.getNews(e.symbol,function(t,o){if(t)s.newsError="Error getting news";else try{s.news=o.data.news.news}catch(t){s.newsError=t}s.loading=!1}),s.avatar=i.initials(s.company.company||e.symbol))})}(),function(){c=t(function(){a.getPrice(e.symbol,e.market||s.company.market,function(t,o){t?s.error=t:(s.price=o,console.log("Price updated for "+e.symbol+" / "+e.market||s.company.market))})},3e5,10)}()}t.$inject=["$interval","$scope","$stateParams","$http","dialog","price","news","avatar"],angular.module("app").controller("stockController",t)}(),function(){"use strict";function t(t,o,e,n,r,a,l){function i(){t.signin({authParams:{scope:"openid email"}},function(t,n){o.set("profile",t),o.set("token",n),e.path("/welcome"),document.body.classList.add("logged-in"),s(function(t){c.message=t.data.message,c.funds=t.data.user.funds,c.userLogged=!0,r.$broadcast("userLogIn")})},function(t){console.log(t)})}function s(t){a.get("api/user/").then(function(o){t(o)})}var c=this;c.login=i,c.auth=t,c.toggleSidenav=l.toggleSidenav,c.userLogged=!1,t.isAuthenticated&&(c.userLogged=!0),n.$on("userLogOut",function(){c.userLogged=!1}),n.$on("userLogIn",function(){c.userLogged=!0}),c.features=["$100,000 starting funds","Real-time stock prices","Six international stock markets","Stock risers and fallers","Daily news for market companies","Up-to-date company data","User-friendly interface"]}t.$inject=["auth","store","$location","$scope","$rootScope","$http","sidenav"],angular.module("app").controller("toolbarController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/toolbar/toolbar.template.html",controller:"toolbarController",controllerAs:"toolbar"}}angular.module("app").directive("toolbar",t)}(),function(){"use strict";function t(t,o){var e=this;!function(){t.get("/api/transaction/all").then(function(t){t.data.error?e.noTransactions=t.data.error:(e.transactions=t.data.transactions,o.setAvatar(e.transactions))},function(t){e.error=t})}()}t.$inject=["$http","avatar"],angular.module("app").controller("transactionsController",t)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFwcC5jb25maWcuanMiLCJhcHAucnVuLmpzIiwiZGlhbG9nL2J1eURpYWxvZy5jb250cm9sbGVyLmpzIiwiZGlhbG9nL2RpYWxvZy5zZXJ2aWNlLmpzIiwiZGlhbG9nL3NlbGxEaWFsb2cuY29udHJvbGxlci5qcyIsImhlbHBlcnMvYXZhdGFyLnNlcnZpY2UuanMiLCJoZWxwZXJzL2RlbGF5LmRpcmVjdGl2ZS5qcyIsImhlbHBlcnMvcHJpY2Uuc2VydmljZS5qcyIsIm5ld3MvbmV3cy5jb250cm9sbGVyLmpzIiwibmV3cy9uZXdzLnNlcnZpY2UuanMiLCJwb3J0Zm9saW8vcG9ydGZvbGlvLmNvbnRyb2xsZXIuanMiLCJob21lL2hvbWUuY29udHJvbGxlci5qcyIsInNlYXJjaC9zZWFyY2guY29udHJvbGxlci5qcyIsInNlYXJjaC9zZWFyY2guZGlyZWN0aXZlLmpzIiwicHJvZmlsZS9wcm9maWxlLmNvbnRyb2xsZXIuanMiLCJwcm9maWxlL3Byb2ZpbGUuc2VydmljZS5qcyIsInNpZGVuYXYvc2lkZW5hdi5jb250cm9sbGVyLmpzIiwic2lkZW5hdi9zaWRlbmF2LmRpcmVjdGl2ZS5qcyIsInNpZGVuYXYvc2lkZW5hdi5zZXJ2aWNlLmpzIiwic3RvY2svc3RvY2suY29udHJvbGxlci5qcyIsInRvb2xiYXIvdG9vbGJhci5jb250cm9sbGVyLmpzIiwidG9vbGJhci90b29sYmFyLmRpcmVjdGl2ZS5qcyIsInRyYW5zYWN0aW9ucy90cmFuc2FjdGlvbnMuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJHByb3ZpZGUiLCJhdXRoUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJyZWRpcmVjdCIsIiRxIiwiJGluamVjdG9yIiwiJHRpbWVvdXQiLCJzdG9yZSIsIiRsb2NhdGlvbiIsImF1dGgiLCJnZXQiLCJyZXNwb25zZUVycm9yIiwicmVqZWN0aW9uIiwic3RhdHVzIiwic2lnbm91dCIsInJlbW92ZSIsInBhdGgiLCJyZWplY3QiLCJpbml0IiwiZG9tYWluIiwiY2xpZW50SUQiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImp3dE9wdGlvbnNQcm92aWRlciIsInRva2VuR2V0dGVyIiwib3B0aW9ucyIsInN1YnN0ciIsImxlbmd0aCIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzbGljZSIsIndoaXRlTGlzdGVkRG9tYWlucyIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsImRhcmsiLCJmYWN0b3J5IiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInJ1biIsIiRyb290U2NvcGUiLCIkc3RhdGUiLCJqd3RIZWxwZXIiLCIkb24iLCJ0b2tlbiIsImlzVG9rZW5FeHBpcmVkIiwiaXNBdXRoZW50aWNhdGVkIiwiZG9jdW1lbnQiLCJib2R5IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXV0aGVudGljYXRlIiwiYnV5RGlhbG9nQ29udHJvbGxlciIsIiRtZERpYWxvZyIsInByaWNlIiwiZGlhbG9nIiwicHJvZmlsZSIsInBhc3NTeW1ib2wiLCJwYXNzQ29tcGFueSIsImJ1eVN0b2NrIiwicXVhbnRpdHkiLCJsb2FkaW5nIiwidm0iLCJidXlRdWFudGl0eSIsImJ1eVByaWNlIiwidG9GaXhlZCIsImN1cnJRdHkiLCJ1c2VyIiwic3RvY2siLCJhdmdQcmljZSIsIndlaWdodGVkQXZlcmFnZSIsInRvdGFsUXR5IiwiZnVuZHMiLCJzeW1ib2wiLCJjb21wYW55IiwiZXJyIiwicmVzIiwiJGJyb2FkY2FzdCIsImVycm9yIiwiY2xvc2VEaWFsb2ciLCJzaG93VG9hc3QiLCJyZXBsYWNlIiwidGhpcyIsInN0b2NrUXVhbnRpdHkiLCJnZXRQcmljZSIsInN0b2NrUHJpY2UiLCJnZXRTdG9ja0FuZEZ1bmRzIiwiZGF0YSIsIiRtZFRvYXN0Iiwic2hvd0J1eSIsIiRldmVudCIsInNob3ciLCJsb2NhbHMiLCJjb250cm9sbGVyQXMiLCJwYXJlbnQiLCJlbGVtZW50IiwidGFyZ2V0RXZlbnQiLCJjbGlja091dHNpZGVUb0Nsb3NlIiwiZm9jdXNPbk9wZW4iLCJzaG93U2VsbCIsImFjdGlvbiIsInNpbXBsZSIsInRleHRDb250ZW50IiwicG9zaXRpb24iLCJoaWRlRGVsYXkiLCJ0b2FzdENsYXNzIiwiaGlkZSIsInZhbHVlIiwidGltZW91dCIsInNlbGxEaWFsb2dDb250cm9sbGVyIiwic2VsbFN0b2NrIiwic2VsbEFsbCIsInByb2ZpdCIsInVzZXJTdG9ja1ByaWNlIiwiYXZhdGFyIiwic2V0QXZhdGFyIiwic3RvY2tBcnJheSIsImZvckVhY2giLCJpbml0aWFscyIsIm5hbWUiLCJzcGxpdCIsIml0ZW0iLCJ0b1VwcGVyQ2FzZSIsInNob3dXaXRoRGVsYXkiLCJyZXN0cmljdCIsImxpbmsiLCIkc2NvcGUiLCIkZWxlbWVudCIsImF0dHJzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImRpcmVjdGl2ZSIsIiRodHRwIiwibWFya2V0IiwiY2IiLCJ0aGVuIiwiZ2V0UHJpY2VzIiwic3ltYm9scyIsInBvc3QiLCJwcmljZXMiLCJuZXdzQ29udHJvbGxlciIsIiRzdGF0ZVBhcmFtcyIsIm5ld3MiLCJnZXROZXdzIiwiY29uc29sZSIsImxvZyIsImN1cnJlbnQiLCJnZXRSYW5kb21OZXdzIiwiaSIsInNodWZmbGVOZXdzIiwiYXJyYXkiLCJ0IiwibSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInBvcnRmb2xpb0NvbnRyb2xsZXIiLCIkaW50ZXJ2YWwiLCJnZXRQb3J0Zm9saW8iLCJtZXNzYWdlIiwibm9Qb3J0Zm9saW8iLCJwb3J0Zm9saW8iLCJtYXRjaFByaWNlcyIsInVzZXJQb3J0Zm9saW8iLCJjdXJyUHJpY2VzIiwidXNlclN0b2NrIiwidXBkYXRlZEF0IiwiY3VyclByaWNlIiwidXBkYXRlUHJpY2UiLCJjYW5jZWwiLCJ1bmRlZmluZWQiLCJob21lQ29udHJvbGxlciIsImdldFJpc2Vyc0ZhbGxlcnMiLCJpc0luQXJyYXkiLCJtYXJrZXRzIiwic3RvY2tzIiwibmV3RGF0YSIsImluZGV4T2YiLCJzZWFyY2hDb250cm9sbGVyIiwicXVlcnlTdG9jayIsInJlc3VsdHMiLCJnZXREYXRhIiwidHJhbnNpdGlvblRvIiwic2VhcmNoIiwicHJvZmlsZUNvbnRyb2xsZXIiLCJnZXRQcm9maWxlIiwiZ2V0RnVuZHMiLCJ1c2VyUHJvZmlsZSIsIkpTT04iLCJwYXJzZSIsInBpY3R1cmUiLCJnZXRVc2VyIiwiZXhpc3RzIiwic2VsbFByaWNlIiwicHJldlByaWNlIiwicHJldlF0eSIsInNpZGVuYXZDb250cm9sbGVyIiwic2lkZW5hdiIsInNraXBBdXRob3JpemF0aW9uIiwicmVzcG9uc2UiLCJsb2dvdXQiLCJzaWRlbmF2U2hvdyIsInVzZXJMb2dnZWQiLCJjbG9zZVNpZGVuYXYiLCIkbWRTaWRlbmF2IiwidG9nZ2xlU2lkZW5hdiIsImlkIiwidG9nZ2xlIiwiY2xvc2UiLCJzdG9ja0NvbnRyb2xsZXIiLCJub0NvbXBhbnkiLCJvbGREYXRhIiwibmV3c0Vycm9yIiwidG9vbGJhckNvbnRyb2xsZXIiLCJsb2dpbiIsInNpZ25pbiIsImF1dGhQYXJhbXMiLCJzY29wZSIsInNldCIsInVzZXJBY2NvdW50IiwiZmVhdHVyZXMiLCJ0b29sYmFyIiwidHJhbnNhY3Rpb25zQ29udHJvbGxlciIsIm5vVHJhbnNhY3Rpb25zIiwidHJhbnNhY3Rpb25zIl0sIm1hcHBpbmdzIjoiQ0FHQSxXQUNBLFlBR0FBLFNBQ0FDLE9BQUEsT0FDQSxRQUFBLGtCQUFBLGNBQUEsYUFBQSxZQUFBLGlCQUNBLFVBQUEsVUFBQSxRQUFBLE9BQUEsY0NWQSxXQUNBLFlBT0EsU0FBQUMsR0FDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsS0FzRUEsUUFBQUMsR0FBQUMsRUFBQUMsRUFBQUMsRUFB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LFNBQUFRLEtBQ0EsT0FDQTNNLFlBQUEsK0NBQ0FDLFdBQUEsb0JBQ0EwRSxhQUFBLFdBUkF6RyxRQUNBQyxPQUFBLE9BQ0E4SSxVQUFBLFVBQUEwRixNQ0xBLFdBQ0EsWUFNQSxTQUFBQyxHQUFBMUYsRUFBQWxCLEdBQ0EsR0FBQXBELEdBQUFvQixNQUVBLFdBQ0FrRCxFQUNBaEksSUFBQSx3QkFDQW1JLEtBQUEsU0FBQTNELEdBQ0FBLEVBQUFXLEtBQUFULE1BQ0FoQixFQUFBaUssZUFBQW5KLEVBQUFXLEtBQUFULE9BRUFoQixFQUFBa0ssYUFBQXBKLEVBQUFXLEtBQUF5SSxhQUNBOUcsRUFBQUMsVUFBQXJELEVBQUFrSyxnQkFFQSxTQUFBckosR0FDQWIsRUFBQWdCLE1BQUFILG9DQWxCQXZGLFFBQ0FDLE9BQUEsT0FDQThCLFdBQUEseUJBQUEyTSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuVHJhZGUgQm91dGlxdWUgIENvcHlyaWdodCAoQykgMjAxNyAgRGFuaWVsIE5pdHVcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG47KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnLCBbXG4gICAgICAnYXV0aDAnLCAnYW5ndWxhci1zdG9yYWdlJywgJ2FuZ3VsYXItand0JywgJ25nTWF0ZXJpYWwnLCAndWkucm91dGVyJywgJ25nTGV0dGVyQXZhdGFyJyxcbiAgICAgICdzaWRlbmF2JywgJ3Byb2ZpbGUnLCAncHJpY2UnLCAnbmV3cycsICdhdmF0YXInXSlcbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29uZmlnKGNvbmZpZylcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY29uZmlnIChcbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIsXG4gICAgJHByb3ZpZGUsXG4gICAgYXV0aFByb3ZpZGVyLFxuICAgICR1cmxSb3V0ZXJQcm92aWRlcixcbiAgICAkc3RhdGVQcm92aWRlcixcbiAgICAkaHR0cFByb3ZpZGVyLFxuICAgIGp3dE9wdGlvbnNQcm92aWRlcikge1xuICAgIGF1dGhQcm92aWRlci5pbml0KHtcbiAgICAgIGRvbWFpbjogJ2RhbmllbG5pdHUuZXUuYXV0aDAuY29tJyxcbiAgICAgIGNsaWVudElEOiAnMWdMT3ZldGNyakM5R1cya0VlUnpFdEpSSkg3MDBpYTYnXG4gICAgfSlcblxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy93ZWxjb21lJylcblxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAuc3RhdGUoJ3dlbGNvbWUnLCB7XG4gICAgICAgIHVybDogJy93ZWxjb21lJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy93ZWxjb21lL3dlbGNvbWUudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICd0b29sYmFyQ29udHJvbGxlciBhcyB0b29sYmFyJ1xuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnYWJvdXQnLCB7XG4gICAgICAgIHVybDogJy9hYm91dCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvYWJvdXQvYWJvdXQudGVtcGxhdGUuaHRtbCdcbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgIHVybDogJy9ob21lJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9ob21lL2hvbWUudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdob21lQ29udHJvbGxlciBhcyBob21lJ1xuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgncHJvZmlsZScsIHtcbiAgICAgICAgdXJsOiAnL3Byb2ZpbGUnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3Byb2ZpbGUvcHJvZmlsZS50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ3Byb2ZpbGVDb250cm9sbGVyIGFzIHByb2ZpbGUnXG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdwb3J0Zm9saW8nLCB7XG4gICAgICAgIHVybDogJy9wb3J0Zm9saW8nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3BvcnRmb2xpby9wb3J0Zm9saW8udGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdwb3J0Zm9saW9Db250cm9sbGVyIGFzIHBvcnRmb2xpbydcbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ3N0b2NrJywge1xuICAgICAgICB1cmw6ICcvc3RvY2svOnN5bWJvbC86bWFya2V0JyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9zdG9jay9zdG9jay50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ3N0b2NrQ29udHJvbGxlciBhcyBzdG9jaydcbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ25ld3MnLCB7XG4gICAgICAgIHVybDogJy9uZXdzLzpzeW1ib2wnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL25ld3MvbmV3cy50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ25ld3NDb250cm9sbGVyIGFzIG5ld3MnXG4gICAgICB9KVxuICAgICAgLnN0YXRlKCd0cmFuc2FjdGlvbnMnLCB7XG4gICAgICAgIHVybDogJy90cmFuc2FjdGlvbnMnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3RyYW5zYWN0aW9ucy90cmFuc2FjdGlvbnMudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICd0cmFuc2FjdGlvbnNDb250cm9sbGVyIGFzIHRyYW5zYWN0aW9ucydcbiAgICAgIH0pXG5cbiAgICBqd3RPcHRpb25zUHJvdmlkZXIuY29uZmlnKHtcbiAgICAgIHRva2VuR2V0dGVyOiBbJ29wdGlvbnMnLCBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAvLyBEb24ndCBzZW5kIHRoZSB0b2tlbiBmb3IgdGVtcGxhdGUgcmVxdWVzdHNcbiAgICAgICAgaWYgKG9wdGlvbnMudXJsLnN1YnN0cihvcHRpb25zLnVybC5sZW5ndGggLSA1KSA9PT0gJy5odG1sJykge1xuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJylcbiAgICAgICAgcmV0dXJuIHRva2VuLnNsaWNlKDEsIC0xKVxuICAgICAgfV0sXG4gICAgICB3aGl0ZUxpc3RlZERvbWFpbnM6IFsndHJhZGUuYm91dGlxdWUnLCAnbG9jYWxob3N0JywgJ2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20nXVxuICAgIH0pXG5cbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxuICAgICAgLnByaW1hcnlQYWxldHRlKCdibHVlJylcbiAgICAgIC5hY2NlbnRQYWxldHRlKCdncmV5JylcbiAgICAgIC53YXJuUGFsZXR0ZSgncmVkJylcblxuICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGFyay1ibHVlJykuYmFja2dyb3VuZFBhbGV0dGUoJ2JsdWUnKS5kYXJrKClcblxuICAgIGZ1bmN0aW9uIHJlZGlyZWN0ICgkcSwgJGluamVjdG9yLCAkdGltZW91dCwgc3RvcmUsICRsb2NhdGlvbikge1xuICAgICAgdmFyIGF1dGhcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYXV0aCA9ICRpbmplY3Rvci5nZXQoJ2F1dGgnKVxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzcG9uc2VFcnJvcjogZnVuY3Rpb24gKHJlamVjdGlvbikge1xuICAgICAgICAgIGlmIChyZWplY3Rpb24uc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICAgIGF1dGguc2lnbm91dCgpXG4gICAgICAgICAgICBzdG9yZS5yZW1vdmUoJ3Byb2ZpbGUnKVxuICAgICAgICAgICAgc3RvcmUucmVtb3ZlKCd0b2tlbicpXG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3dlbGNvbWUnKVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbilcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAkcHJvdmlkZS5mYWN0b3J5KCdyZWRpcmVjdCcsIHJlZGlyZWN0KVxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2p3dEludGVyY2VwdG9yJylcbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdyZWRpcmVjdCcpXG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAucnVuKHJ1bilcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gcnVuICgkcm9vdFNjb3BlLCAkc3RhdGUsIGF1dGgsIHN0b3JlLCBqd3RIZWxwZXIsICRsb2NhdGlvbikge1xuICAgICRyb290U2NvcGUuJG9uKCckbG9jYXRpb25DaGFuZ2VTdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIEdldCB0aGUgSldUIHRoYXQgaXMgc2F2ZWQgaW4gbG9jYWwgc3RvcmFnZVxuICAgICAgLy8gYW5kIGlmIGl0IGlzIHRoZXJlLCBjaGVjayB3aGV0aGVyIGl0IGlzIGV4cGlyZWQuXG4gICAgICAvLyBJZiBpdCBpc24ndCwgc2V0IHRoZSB1c2VyJ3MgYXV0aCBzdGF0ZVxuICAgICAgdmFyIHRva2VuID0gc3RvcmUuZ2V0KCd0b2tlbicpXG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgaWYgKCFqd3RIZWxwZXIuaXNUb2tlbkV4cGlyZWQodG9rZW4pKSB7XG4gICAgICAgICAgaWYgKCFhdXRoLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdsb2dnZWQtaW4nKVxuICAgICAgICAgICAgYXV0aC5hdXRoZW50aWNhdGUoc3RvcmUuZ2V0KCdwcm9maWxlJyksIHRva2VuKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIWF1dGguaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvd2VsY29tZScpXG4gICAgICB9XG4gICAgfSlcbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdidXlEaWFsb2dDb250cm9sbGVyJywgYnV5RGlhbG9nQ29udHJvbGxlcilcblxuICBmdW5jdGlvbiBidXlEaWFsb2dDb250cm9sbGVyICgkcm9vdFNjb3BlLCAkbWREaWFsb2csIHByaWNlLCBkaWFsb2csIHByb2ZpbGUsIHBhc3NTeW1ib2wsIHBhc3NDb21wYW55KSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0uc3RvY2tRdWFudGl0eSA9IDFcbiAgICB2bS5idXlRdWFudGl0eSA9IDBcbiAgICB2bS5idXlQcmljZSA9IDBcbiAgICB2bS5zeW1ib2wgPSBwYXNzU3ltYm9sXG4gICAgdm0uY29tcGFueSA9IHBhc3NDb21wYW55XG4gICAgdm0ubG9hZGluZyA9IGZhbHNlXG5cbiAgICB2bS5jbG9zZURpYWxvZyA9IGRpYWxvZy5jbG9zZURpYWxvZ1xuICAgIHZtLnNob3dUb2FzdCA9IGRpYWxvZy5zaG93VG9hc3RcbiAgICB2bS5idXlTdG9jayA9IGJ1eVN0b2NrXG5cbiAgICBwcmljZS5nZXRQcmljZSh2bS5zeW1ib2wsIG51bGwsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0uc3RvY2tQcmljZSA9IHJlcy5wcmljZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBwcm9maWxlLmdldFN0b2NrQW5kRnVuZHModm0uc3ltYm9sLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS51c2VyID0gZGF0YVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBidXlTdG9jayAocHJpY2UsIHF1YW50aXR5KSB7XG4gICAgICBkaWFsb2cubG9hZGluZyh2bS5sb2FkaW5nLCB0cnVlKVxuICAgICAgdm0uYnV5UXVhbnRpdHkgPSBxdWFudGl0eVxuICAgICAgdm0uYnV5UHJpY2UgPSAocXVhbnRpdHkgKiBwcmljZSkudG9GaXhlZCgyKVxuICAgICAgdmFyIGN1cnJRdHkgPSB2bS51c2VyLnN0b2NrLnF1YW50aXR5XG4gICAgICB2YXIgYXZnUHJpY2UgPSBwcm9maWxlLndlaWdodGVkQXZlcmFnZSh2bS51c2VyLnN0b2NrLnByaWNlLCBwcmljZSwgY3VyclF0eSwgcXVhbnRpdHkpXG4gICAgICB2YXIgdG90YWxRdHkgPSB2bS51c2VyLnN0b2NrLnF1YW50aXR5ICsgcXVhbnRpdHlcbiAgICAgIHZhciBmdW5kcyA9IHZtLnVzZXIuZnVuZHMgLSAoKHByaWNlICogcXVhbnRpdHkpLnRvRml4ZWQoMikpXG5cbiAgICAgIHByb2ZpbGUuYnV5U3RvY2sodm0uc3ltYm9sLCB2bS5jb21wYW55LCBhdmdQcmljZSwgcHJpY2UsIHRvdGFsUXR5LCBmdW5kcywgY3VyclF0eSwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgIGRpYWxvZy5sb2FkaW5nKHZtLmxvYWRpbmcsIGZhbHNlKVxuICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RyYW5zYWN0aW9uJylcblxuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2bS5jbG9zZURpYWxvZygpXG4gICAgICAgICAgdm0uc2hvd1RvYXN0KCdib3VnaHQnLCB2bS5idXlRdWFudGl0eSwgdm0uc3ltYm9sLCAodm0uYnV5UHJpY2UucmVwbGFjZSgvKFxcZCkoPz0oXFxkezN9KStcXC4pL2csICckMSwnKSkpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ2RpYWxvZycsIGRpYWxvZylcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gZGlhbG9nICgkbWREaWFsb2csICRtZFRvYXN0LCAkdGltZW91dCkge1xuICAgIHJldHVybiB7XG4gICAgICBzaG93QnV5OiBzaG93QnV5LFxuICAgICAgc2hvd1NlbGw6IHNob3dTZWxsLFxuICAgICAgY2xvc2VEaWFsb2c6IGNsb3NlRGlhbG9nLFxuICAgICAgc2hvd1RvYXN0OiBzaG93VG9hc3QsXG4gICAgICBsb2FkaW5nOiBsb2FkaW5nXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd0J1eSAoJGV2ZW50LCBwYXNzU3ltYm9sLCBwYXNzQ29tcGFueSkge1xuICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICBsb2NhbHM6IHtwYXNzU3ltYm9sOiBwYXNzU3ltYm9sLCBwYXNzQ29tcGFueTogcGFzc0NvbXBhbnl9LFxuICAgICAgICBjb250cm9sbGVyOiAnYnV5RGlhbG9nQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ2J1eURpYWxvZycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvZGlhbG9nL2J1eURpYWxvZy50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICAgIHRhcmdldEV2ZW50OiAkZXZlbnQsXG4gICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWUsXG4gICAgICAgIGZvY3VzT25PcGVuOiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93U2VsbCAoJGV2ZW50LCBwYXNzU3ltYm9sLCBwYXNzQ29tcGFueSkge1xuICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICBsb2NhbHM6IHtwYXNzU3ltYm9sOiBwYXNzU3ltYm9sLCBwYXNzQ29tcGFueTogcGFzc0NvbXBhbnl9LFxuICAgICAgICBjb250cm9sbGVyOiAnc2VsbERpYWxvZ0NvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICdzZWxsRGlhbG9nJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9kaWFsb2cvc2VsbERpYWxvZy50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICAgIHRhcmdldEV2ZW50OiAkZXZlbnQsXG4gICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWUsXG4gICAgICAgIGZvY3VzT25PcGVuOiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93VG9hc3QgKGFjdGlvbiwgcXVhbnRpdHksIHN5bWJvbCwgcHJpY2UpIHtcbiAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICRtZFRvYXN0XG4gICAgICAgICAgLnNpbXBsZSgpXG4gICAgICAgICAgLnRleHRDb250ZW50KCdZb3UgJyArIGFjdGlvbiArICcgJyArIHF1YW50aXR5ICsgJyAnICsgc3ltYm9sICsgJyBzaGFyZXMgZm9yICQnICsgcHJpY2UpXG4gICAgICAgICAgLnBvc2l0aW9uKCdib3R0b20gcmlnaHQnKVxuICAgICAgICAgIC5oaWRlRGVsYXkoNTAwMClcbiAgICAgICAgICAudG9hc3RDbGFzcygnYnMtdG9hc3QnKSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbG9zZURpYWxvZyAoKSB7XG4gICAgICAkbWREaWFsb2cuaGlkZSgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZGluZyAobG9hZGluZywgdmFsdWUsIHRpbWVvdXQpIHtcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbG9hZGluZyA9IHZhbHVlXG4gICAgICB9LCB0aW1lb3V0IHx8IDUwMClcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignc2VsbERpYWxvZ0NvbnRyb2xsZXInLCBzZWxsRGlhbG9nQ29udHJvbGxlcilcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gc2VsbERpYWxvZ0NvbnRyb2xsZXIgKCRyb290U2NvcGUsIHByaWNlLCBwcm9maWxlLCBkaWFsb2csIHBhc3NTeW1ib2wsIHBhc3NDb21wYW55KSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0uc3ltYm9sID0gcGFzc1N5bWJvbFxuICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuXG4gICAgdm0uY2xvc2VEaWFsb2cgPSBkaWFsb2cuY2xvc2VEaWFsb2dcbiAgICB2bS5zaG93VG9hc3QgPSBkaWFsb2cuc2hvd1RvYXN0XG4gICAgdm0uc2VsbFN0b2NrID0gc2VsbFN0b2NrXG5cbiAgICBwcmljZS5nZXRQcmljZSh2bS5zeW1ib2wsIG51bGwsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0uc3RvY2tQcmljZSA9IHJlcy5wcmljZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBwcm9maWxlLmdldFN0b2NrQW5kRnVuZHModm0uc3ltYm9sLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS51c2VyID0gZGF0YVxuICAgICAgICB2bS5zdG9ja1F1YW50aXR5ID0gdm0udXNlci5zdG9jay5xdWFudGl0eVxuICAgICAgICB2bS51c2VyU3RvY2tQcmljZSA9IHZtLnVzZXIuc3RvY2sucHJpY2VcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gc2VsbFN0b2NrIChwcmljZSwgcXVhbnRpdHkpIHtcbiAgICAgIHZhciBzZWxsQWxsID0gdm0udXNlci5zdG9jay5xdWFudGl0eSAtIHF1YW50aXR5XG4gICAgICB2YXIgcHJvZml0ID0gKHZtLnN0b2NrUHJpY2UgLSB2bS51c2VyU3RvY2tQcmljZSkgKiBxdWFudGl0eVxuXG4gICAgICBwcm9maWxlLnNlbGxTdG9jayh2bS5zeW1ib2wsIHBhc3NDb21wYW55LCBwcmljZSwgcXVhbnRpdHksIHByb2ZpdCwgc2VsbEFsbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLmNsb3NlRGlhbG9nKClcbiAgICAgICAgICB2bS5zaG93VG9hc3QoJ3NvbGQnLCBxdWFudGl0eSwgdm0uc3ltYm9sLCAoKHByaWNlICogcXVhbnRpdHkpLnRvRml4ZWQoMikucmVwbGFjZSgvKFxcZCkoPz0oXFxkezN9KStcXC4pL2csICckMSwnKSkpXG4gICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd0cmFuc2FjdGlvbicpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2F2YXRhcicsIFtdKVxuICAgIC5mYWN0b3J5KCdhdmF0YXInLCBhdmF0YXIpXG5cbiAgZnVuY3Rpb24gYXZhdGFyICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2V0QXZhdGFyOiBzZXRBdmF0YXIsXG4gICAgICBpbml0aWFsczogaW5pdGlhbHNcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRBdmF0YXIgKHN0b2NrQXJyYXkpIHtcbiAgICAgIHN0b2NrQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoc3RvY2spIHtcbiAgICAgICAgc3RvY2suYXZhdGFyID0gaW5pdGlhbHMoc3RvY2suY29tcGFueSlcbiAgICAgIH0pXG4gICAgICByZXR1cm4gc3RvY2tBcnJheVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRpYWxzIChuYW1lKSB7XG4gICAgICB2YXIgaW5pdGlhbHMgPSBuYW1lLnNwbGl0KCcgJywgMilcbiAgICAgIHZhciBhdmF0YXIgPSAnJ1xuICAgICAgaW5pdGlhbHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpZiAoaXRlbSA9PT0gJ0luYy4nKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgYXZhdGFyICs9IGl0ZW1bMF1cbiAgICAgIH0pXG4gICAgICByZXR1cm4gYXZhdGFyLnRvVXBwZXJDYXNlKClcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdzaG93V2l0aERlbGF5Jywgc2hvd1dpdGhEZWxheSlcblxuICAvLyBDT0RFIFNPVVJDRTogaHR0cHM6Ly9jb2RlcmV2aWV3LnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy82MjAwNS9zaG93LXdpdGgtZGVsYXktZGlyZWN0aXZlXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBzaG93V2l0aERlbGF5ICgkdGltZW91dCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgbGluazogZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICRlbGVtZW50LmFkZENsYXNzKCduZy1oaWRlJylcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKCduZy1oaWRlJylcbiAgICAgICAgfSwgYXR0cnMuc2hvd1dpdGhEZWxheSB8fCAyMDAwKVxuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdwcmljZScsIFtdKVxuICAgIC5mYWN0b3J5KCdwcmljZScsIHByaWNlKVxuXG4gIGZ1bmN0aW9uIHByaWNlICgkaHR0cCkge1xuICAgIHJldHVybiB7XG4gICAgICBnZXRQcmljZTogZ2V0UHJpY2UsXG4gICAgICBnZXRQcmljZXM6IGdldFByaWNlc1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByaWNlIChzeW1ib2wsIG1hcmtldCwgY2IpIHtcbiAgICAgIGlmIChtYXJrZXQgIT09IG51bGwpIHtcbiAgICAgICAgJGh0dHBcbiAgICAgICAgICAuZ2V0KCcvYXBpL3ByaWNlLycgKyBzeW1ib2wgKyAnLycgKyBtYXJrZXQpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHJlcy5kYXRhLnByaWNlKVxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBjYignRXJyb3I6ICcgKyBlcnIuZGF0YS5lcnJvciwgbnVsbClcbiAgICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGh0dHBcbiAgICAgICAgICAuZ2V0KCcvYXBpL3ByaWNlLycgKyBzeW1ib2wpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHJlcy5kYXRhLnByaWNlKVxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBjYignRXJyb3I6IHN0YXR1cyAnICsgZXJyLnN0YXR1cywgbnVsbClcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByaWNlcyAoc3ltYm9scywgY2IpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5wb3N0KCcvYXBpL3ByaWNlL211bHRpcGxlJywgc3ltYm9scylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIHJldHVybiBjYihudWxsLCByZXMuZGF0YS5wcmljZXMpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gY2IoJ0Vycm9yOiBzdGF0dXMgJyArIGVyci5zdGF0dXMsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ25ld3NDb250cm9sbGVyJywgbmV3c0NvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gbmV3c0NvbnRyb2xsZXIgKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBuZXdzKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0uZ2V0TmV3cyA9IGdldE5ld3NcblxuICAgIGZ1bmN0aW9uIGdldE5ld3MgKHN5bWJvbCkge1xuICAgICAgbmV3cy5nZXROZXdzKHN5bWJvbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRSYW5kb21OZXdzICgpIHtcbiAgICAgIG5ld3MuZ2V0UmFuZG9tTmV3cyhmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0ubmV3cyA9IFtdXG4gICAgICAgICAgcmVzLmRhdGEubmV3cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5uZXdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtLm5ld3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2bS5uZXdzLnB1c2goaXRlbS5uZXdzW2ldKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBuZXdzLnNodWZmbGVOZXdzKHZtLm5ld3MpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKCRzdGF0ZS5jdXJyZW50Lm5hbWUgPT09ICduZXdzJykge1xuICAgICAgZ2V0UmFuZG9tTmV3cygpXG4gICAgfSBlbHNlIHtcbiAgICAgIGdldE5ld3MoJHN0YXRlUGFyYW1zLnN5bWJvbClcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbmV3cycsIFtdKVxuICAgIC5mYWN0b3J5KCduZXdzJywgbmV3cylcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gbmV3cyAoJGh0dHApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0TmV3czogZ2V0TmV3cyxcbiAgICAgIGdldFJhbmRvbU5ld3M6IGdldFJhbmRvbU5ld3MsXG4gICAgICBzaHVmZmxlTmV3czogc2h1ZmZsZU5ld3NcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXROZXdzIChzeW1ib2wsIGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL25ld3Mvc3ltYm9sLycgKyBzeW1ib2wpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBjYihudWxsLCByZXMpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjYihlcnIsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tTmV3cyAoY2IpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5nZXQoJy9hcGkvbmV3cy9yYW5kb20nKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzKVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY2IoZXJyLCBudWxsKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIEZpc2hlcuKAk1lhdGVzIHNodWZmbGUgYWxnb3JpdGhtIGZvciByYW5kb20gbmV3cyBhcnJheVxuICAgIGZ1bmN0aW9uIHNodWZmbGVOZXdzIChhcnJheSkge1xuICAgICAgdmFyIG0gPSBhcnJheS5sZW5ndGhcbiAgICAgIHZhciB0XG4gICAgICB2YXIgaVxuXG4gICAgICAvLyBXaGlsZSB0aGVyZSByZW1haW4gZWxlbWVudHMgdG8gc2h1ZmZsZeKAplxuICAgICAgd2hpbGUgKG0pIHtcbiAgICAgICAgLy8gUGljayBhIHJlbWFpbmluZyBlbGVtZW504oCmXG4gICAgICAgIGkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtLS0pXG5cbiAgICAgICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50LlxuICAgICAgICB0ID0gYXJyYXlbbV1cbiAgICAgICAgYXJyYXlbbV0gPSBhcnJheVtpXVxuICAgICAgICBhcnJheVtpXSA9IHRcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFycmF5XG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3BvcnRmb2xpb0NvbnRyb2xsZXInLCBwb3J0Zm9saW9Db250cm9sbGVyKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBwb3J0Zm9saW9Db250cm9sbGVyICgkc2NvcGUsICRpbnRlcnZhbCwgJGh0dHAsIHByaWNlLCBkaWFsb2csIGF2YXRhcikge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLnNob3dTZWxsID0gZGlhbG9nLnNob3dTZWxsXG4gICAgdm0uc2hvd0J1eSA9IGRpYWxvZy5zaG93QnV5XG4gICAgdm0uZ2V0UG9ydGZvbGlvID0gZ2V0UG9ydGZvbGlvXG4gICAgdm0ucG9ydGZvbGlvID0gbnVsbFxuXG4gICAgJHNjb3BlLiRvbigndHJhbnNhY3Rpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICBnZXRQb3J0Zm9saW8oKVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBnZXRQb3J0Zm9saW8gKCkge1xuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS91c2VyL3BvcnRmb2xpbycpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBpZiAocmVzLmRhdGEubWVzc2FnZSkge1xuICAgICAgICAgICAgdm0ubm9Qb3J0Zm9saW8gPSByZXMuZGF0YS5tZXNzYWdlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZtLnBvcnRmb2xpbyA9IHJlcy5kYXRhLnBvcnRmb2xpb1xuICAgICAgICAgICAgdm0uZnVuZHMgPSByZXMuZGF0YS5mdW5kc1xuICAgICAgICAgICAgZ2V0UHJpY2VzKHZtLnBvcnRmb2xpbylcbiAgICAgICAgICAgIGF2YXRhci5zZXRBdmF0YXIodm0ucG9ydGZvbGlvKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQcmljZXMgKHBvcnRmb2xpbykge1xuICAgICAgdmFyIHN5bWJvbHMgPSBbXVxuICAgICAgcG9ydGZvbGlvLmZvckVhY2goZnVuY3Rpb24gKHN0b2NrKSB7XG4gICAgICAgIHN5bWJvbHMucHVzaChzdG9jay5zeW1ib2wpXG4gICAgICB9KVxuICAgICAgcHJpY2UuZ2V0UHJpY2VzKHN5bWJvbHMsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXRjaFByaWNlcyh2bS5wb3J0Zm9saW8sIHJlcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYXRjaFByaWNlcyAodXNlclBvcnRmb2xpbywgY3VyclByaWNlcykge1xuICAgICAgdXNlclBvcnRmb2xpby5mb3JFYWNoKGZ1bmN0aW9uICh1c2VyU3RvY2spIHtcbiAgICAgICAgY3VyclByaWNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzdG9jaykge1xuICAgICAgICAgIGlmIChzdG9jay5zeW1ib2wgPT09IHVzZXJTdG9jay5zeW1ib2wpIHtcbiAgICAgICAgICAgIHVzZXJTdG9jay51cGRhdGVkQXQgPSBzdG9jay51cGRhdGVkQXRcbiAgICAgICAgICAgIHVzZXJTdG9jay5jdXJyUHJpY2UgPSBzdG9jay5wcmljZVxuICAgICAgICAgICAgdXNlclN0b2NrLm1hcmtldCA9IHN0b2NrLm1hcmtldFxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdXNlclBvcnRmb2xpb1xuICAgIH1cblxuICAgIC8vIFNldHMgaW50ZXJ2YWwgb2YgNSBtaW51dGVzIGZvciBhdXRvLXVwZGF0aW5nIHByaWNlcyBvbiBVSVxuICAgIC8vIFN0b3BzIGludGVydmFsIGFmdGVyIDUwIG1pbnV0ZXNcbiAgICB2YXIgdXBkYXRlUHJpY2VcbiAgICBmdW5jdGlvbiBhdXRvdXBkYXRlICgpIHtcbiAgICAgIHVwZGF0ZVByaWNlID0gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZ2V0UHJpY2VzKHZtLnBvcnRmb2xpbylcbiAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZSBvZiBwb3J0Zm9saW8gcHJpY2VzJylcbiAgICAgIH0sIDEwMDAgKiA2MCAqIDUsIDEwKVxuICAgIH1cblxuICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgJGludGVydmFsLmNhbmNlbCh1cGRhdGVQcmljZSlcbiAgICAgIHVwZGF0ZVByaWNlID0gdW5kZWZpbmVkXG4gICAgfSlcblxuICAgIC8vIEZpcmUgdG8gcG9wdWxhdGUgRE9NIHdpdGggZGF0YVxuICAgIGdldFBvcnRmb2xpbygpXG5cbiAgICAvLyBGaXJlIHRvIHN0YXJ0IHVwZGF0ZSBvZiBwcmljZXMgZXZlcnkgNSBtaW51dGVzXG4gICAgYXV0b3VwZGF0ZSgpXG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignaG9tZUNvbnRyb2xsZXInLCBob21lQ29udHJvbGxlcilcblxuICBmdW5jdGlvbiBob21lQ29udHJvbGxlciAoJGh0dHAsIGF2YXRhciwgZGlhbG9nKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0ubWFya2V0cyA9IFsnVVMnLCAnTFNFJywgJ0VVUk8nLCAnVE1YJywgJ0hLRScsICdJTkRJQSddXG4gICAgdm0ubG9hZGluZyA9IGZhbHNlXG5cbiAgICB2bS5zaG93U2VsbCA9IGRpYWxvZy5zaG93U2VsbFxuICAgIHZtLnNob3dCdXkgPSBkaWFsb2cuc2hvd0J1eVxuICAgIHZtLmdldFJpc2Vyc0ZhbGxlcnMgPSBnZXRSaXNlcnNGYWxsZXJzXG5cbiAgICBnZXRSaXNlcnNGYWxsZXJzKCdVUycpXG5cbiAgICBmdW5jdGlvbiBnZXRSaXNlcnNGYWxsZXJzIChtYXJrZXQpIHtcbiAgICAgIHZtLmxvYWRpbmcgPSB0cnVlXG5cbiAgICAgIGlmIChpc0luQXJyYXkobWFya2V0LCB2bS5tYXJrZXRzKSkge1xuICAgICAgICAkaHR0cFxuICAgICAgICAgIC5nZXQoJy9hcGkvcmlzZWZhbGwvJyArIG1hcmtldClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBpZiAocmVzLmRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgICAgdm0uZXJyb3IgPSByZXMuZGF0YS5lcnJvclxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdm0uZXJyb3IgPSBudWxsXG4gICAgICAgICAgICAgIHZtLnN0b2NrcyA9IHJlcy5kYXRhLnN0b2Nrcy5zdG9ja3NcbiAgICAgICAgICAgICAgYXZhdGFyLnNldEF2YXRhcih2bS5zdG9ja3MpXG4gICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RvY2tzLm5ld0RhdGEgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdm0ubWVzc2FnZSA9ICdFeHRlcm5hbCBBUEkgbm90IGF2YWlsYWJsZSBhdCB0aGlzIG1vbWVudC4gU2hvd2luZyBkYXRhIG9sZGVyIHRoYW4gMSBob3VyLidcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS5lcnJvciA9ICdObyBzdWNoIG1hcmtldDogJyArIG1hcmtldFxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzSW5BcnJheSAodmFsdWUsIGFycmF5KSB7XG4gICAgICByZXR1cm4gYXJyYXkuaW5kZXhPZih2YWx1ZSkgPiAtMVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdzZWFyY2hDb250cm9sbGVyJywgc2VhcmNoQ29udHJvbGxlcilcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gc2VhcmNoQ29udHJvbGxlciAoJGh0dHAsICRzdGF0ZSkge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLnF1ZXJ5U3RvY2sgPSBxdWVyeVN0b2NrXG4gICAgdm0uZ2V0RGF0YSA9IGdldERhdGFcblxuICAgIGZ1bmN0aW9uIHF1ZXJ5U3RvY2sgKHN0b2NrKSB7XG4gICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS9kYXRhL3N5bWJvbHMvJyArIHN0b2NrKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXVxuXG4gICAgICAgICAgcmVzLmRhdGEuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goaXRlbS5zeW1ib2wpXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIHJldHVybiByZXN1bHRzXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RGF0YSAoaXRlbSkge1xuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgJHN0YXRlLnRyYW5zaXRpb25Ubygnc3RvY2snLCB7c3ltYm9sOiBpdGVtfSlcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdzZWFyY2gnLCBzZWFyY2gpXG5cbiAgZnVuY3Rpb24gc2VhcmNoICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9zZWFyY2gvc2VhcmNoLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgY29udHJvbGxlcjogJ3NlYXJjaENvbnRyb2xsZXInLFxuICAgICAgY29udHJvbGxlckFzOiAnc2VhcmNoJ1xuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdwcm9maWxlQ29udHJvbGxlcicsIHByb2ZpbGVDb250cm9sbGVyKVxuXG4gIGZ1bmN0aW9uIHByb2ZpbGVDb250cm9sbGVyICgkaHR0cCwgcHJvZmlsZSkge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLnByb2ZpbGUgPSBwcm9maWxlLmdldFByb2ZpbGUoKVxuXG4gICAgcHJvZmlsZS5nZXRGdW5kcyhmdW5jdGlvbiAoZXJyLCBmdW5kcykge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0uZnVuZHMgPSBmdW5kc1xuICAgICAgfVxuICAgIH0pXG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgncHJvZmlsZScsIFtdKVxuICAgIC5mYWN0b3J5KCdwcm9maWxlJywgcHJvZmlsZSlcblxuICBmdW5jdGlvbiBwcm9maWxlICgkaHR0cCkge1xuICAgIHJldHVybiB7XG4gICAgICBnZXRVc2VyOiBnZXRVc2VyLFxuICAgICAgZ2V0U3RvY2tBbmRGdW5kczogZ2V0U3RvY2tBbmRGdW5kcyxcbiAgICAgIGdldFByb2ZpbGU6IGdldFByb2ZpbGUsXG4gICAgICBnZXRGdW5kczogZ2V0RnVuZHMsXG4gICAgICBidXlTdG9jazogYnV5U3RvY2ssXG4gICAgICBzZWxsU3RvY2s6IHNlbGxTdG9jayxcbiAgICAgIHdlaWdodGVkQXZlcmFnZTogd2VpZ2h0ZWRBdmVyYWdlXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UHJvZmlsZSAoKSB7XG4gICAgICB2YXIgdXNlclByb2ZpbGUgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvZmlsZScpKVxuXG4gICAgICBpZiAofnVzZXJQcm9maWxlLm5hbWUuaW5kZXhPZignQCcpKSB7XG4gICAgICAgIHVzZXJQcm9maWxlLm5hbWUgPSB1c2VyUHJvZmlsZS5uYW1lLnNwbGl0KCdAJylbMF1cbiAgICAgIH1cblxuICAgICAgLy8gRm9yIEZhY2Vib29rIGxvZ2luIHVzZSB0aGUgYmlnZ2VyIHByb2ZpbGUgcGljdHVyZVxuICAgICAgaWYgKHVzZXJQcm9maWxlWydwaWN0dXJlX2xhcmdlJ10pIHtcbiAgICAgICAgdXNlclByb2ZpbGUucGljdHVyZSA9IHVzZXJQcm9maWxlWydwaWN0dXJlX2xhcmdlJ11cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVzZXJQcm9maWxlXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VXNlciAoY2IpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5nZXQoJy9hcGkvdXNlci8nKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IocmVzLmRhdGEudXNlcilcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRGdW5kcyAoY2IpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5nZXQoJy9hcGkvdXNlci9mdW5kcy8nKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzLmRhdGEuZnVuZHMpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjYignRXJyb3I6IENhbm5vdCBnZXQgZnVuZHMhJyArIGVyciwgbnVsbClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRTdG9ja0FuZEZ1bmRzIChzeW1ib2wsIGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL3VzZXIvcG9ydGZvbGlvLycgKyBzeW1ib2wpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHN0b2NrOiByZXMuZGF0YS5zdG9jayxcbiAgICAgICAgICAgIGZ1bmRzOiByZXMuZGF0YS5mdW5kc1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYihudWxsLCBkYXRhKVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY2IoJ0Vycm9yOiBzdGF0dXMnICsgZXJyLnN0YXR1cywgbnVsbCwgbnVsbClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidXlTdG9jayAoc3ltYm9sLCBjb21wYW55LCBhdmdQcmljZSwgcHJpY2UsIHRvdGFsUXR5LCBmdW5kcywgZXhpc3RzLCBjYikge1xuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIHN5bWJvbDogc3ltYm9sLFxuICAgICAgICBjb21wYW55OiBjb21wYW55LFxuICAgICAgICBwcmljZTogYXZnUHJpY2UsXG4gICAgICAgIGJ1eVByaWNlOiBwcmljZSxcbiAgICAgICAgcXVhbnRpdHk6IHRvdGFsUXR5LFxuICAgICAgICBmdW5kczogZnVuZHMudG9GaXhlZCgzKSxcbiAgICAgICAgZXhpc3RzOiBleGlzdHNcbiAgICAgIH1cblxuICAgICAgJGh0dHBcbiAgICAgICAgLnBvc3QoJy9hcGkvdXNlci9idXknLCBkYXRhKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzKVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY2IoZXJyLCBudWxsKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbGxTdG9jayAoc3ltYm9sLCBjb21wYW55LCBzZWxsUHJpY2UsIHF1YW50aXR5LCBwcm9maXQsIHNlbGxBbGwsIGNiKSB7XG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgc3ltYm9sOiBzeW1ib2wsXG4gICAgICAgIGNvbXBhbnk6IGNvbXBhbnksXG4gICAgICAgIHNlbGxQcmljZTogc2VsbFByaWNlLFxuICAgICAgICBxdWFudGl0eTogcXVhbnRpdHksXG4gICAgICAgIHByb2ZpdDogcHJvZml0LFxuICAgICAgICBzZWxsQWxsOiBzZWxsQWxsXG4gICAgICB9XG5cbiAgICAgICRodHRwXG4gICAgICAgIC5wb3N0KCdhcGkvdXNlci9zZWxsJywgZGF0YSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGNiKG51bGwsIHJlcylcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICBjYihlcnIsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2VpZ2h0ZWRBdmVyYWdlIChwcmV2UHJpY2UsIGN1cnJQcmljZSwgcHJldlF0eSwgY3VyclF0eSkge1xuICAgICAgcmV0dXJuICgoKHByZXZQcmljZSAqIHByZXZRdHkpICsgKGN1cnJQcmljZSAqIGN1cnJRdHkpKSAvIChwcmV2UXR5ICsgY3VyclF0eSkpLnRvRml4ZWQoMylcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignc2lkZW5hdkNvbnRyb2xsZXInLCBzaWRlbmF2Q29udHJvbGxlcilcblxuICBmdW5jdGlvbiBzaWRlbmF2Q29udHJvbGxlciAoJGh0dHAsICRyb290U2NvcGUsICRzY29wZSwgJHRpbWVvdXQsICRsb2NhdGlvbiwgYXV0aCwgc3RvcmUsXG4gICAgc2lkZW5hdiwgcHJvZmlsZSkge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLmdldE5ld3MgPSBnZXROZXdzXG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0XG5cbiAgICB2bS5jbG9zZVNpZGVuYXYgPSBzaWRlbmF2LmNsb3NlU2lkZW5hdlxuICAgIHZtLmF1dGggPSBhdXRoXG5cbiAgICB2bS5tZXNzYWdlID0gJydcbiAgICB2bS5zaWRlbmF2U2hvdyA9IGZhbHNlXG5cbiAgICAvLyBLZWVwIHByb2ZpbGUgZGF0YSBhbmQgc2lkZW5hdiBvcGVuIG9uIHBhZ2UgcmVmcmVzaFxuICAgIC8vIGlmIHVzZXIgaXMgbG9nZ2VkIGluXG4gICAgaWYgKHZtLmF1dGguaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICB2bS5wcm9maWxlID0gcHJvZmlsZS5nZXRQcm9maWxlKClcbiAgICAgIHZtLnNpZGVuYXZTaG93ID0gdHJ1ZVxuICAgICAgZ2V0RnVuZHMoKVxuICAgIH1cblxuICAgICRzY29wZS4kb24oJ3VzZXJMb2dJbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZtLnByb2ZpbGUgPSBwcm9maWxlLmdldFByb2ZpbGUoKVxuICAgICAgdm0uc2lkZW5hdlNob3cgPSB0cnVlXG4gICAgICBnZXRGdW5kcygpXG4gICAgfSlcblxuICAgICRzY29wZS4kb24oJ3RyYW5zYWN0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgZ2V0RnVuZHMoKVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBnZXRGdW5kcyAoKSB7XG4gICAgICBwcm9maWxlLmdldEZ1bmRzKGZ1bmN0aW9uIChlcnIsIGZ1bmRzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9XG4gICAgICAgIHZtLmZ1bmRzID0gZnVuZHNcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TmV3cyAoKSB7XG4gICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvbmV3cy9BQVBMJywge1xuICAgICAgICBza2lwQXV0aG9yaXphdGlvbjogdHJ1ZVxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdm0ubWVzc2FnZSA9IHJlc3BvbnNlLmRhdGEubmV3cy5zeW1ib2xcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9nb3V0ICgpIHtcbiAgICAgIC8vIFRoZSBzaWdub3V0IG1ldGhvZCBvbiB0aGUgYXV0aCBzZXJ2aWNlXG4gICAgICAvLyBzZXRzIGlzQXV0aGVudGljYXRlZCB0byBmYWxzZSBidXQgd2VcbiAgICAgIC8vIGFsc28gbmVlZCB0byByZW1vdmUgdGhlIHByb2ZpbGUgYW5kXG4gICAgICAvLyB0b2tlbiBmcm9tIGxvY2FsIHN0b3JhZ2VcbiAgICAgIGF1dGguc2lnbm91dCgpXG4gICAgICBzdG9yZS5yZW1vdmUoJ3Byb2ZpbGUnKVxuICAgICAgc3RvcmUucmVtb3ZlKCd0b2tlbicpXG4gICAgICB2bS5zaWRlbmF2U2hvdyA9IGZhbHNlXG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2xvZ2dlZC1pbicpXG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3VzZXJMb2dPdXQnKVxuICAgICAgdm0udXNlckxvZ2dlZCA9IGZhbHNlXG4gICAgICAkbG9jYXRpb24ucGF0aCgnL3dlbGNvbWUnKVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3NpZGVuYXYnLCBzaWRlbmF2KVxuXG4gIGZ1bmN0aW9uIHNpZGVuYXYgKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3NpZGVuYXYvc2lkZW5hdi50ZW1wbGF0ZS5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXI6ICdzaWRlbmF2Q29udHJvbGxlcicsXG4gICAgICBjb250cm9sbGVyQXM6ICdzaWRlbmF2J1xuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdzaWRlbmF2JywgW10pXG4gICAgLmZhY3RvcnkoJ3NpZGVuYXYnLCBzaWRlbmF2KVxuXG4gIGZ1bmN0aW9uIHNpZGVuYXYgKCRtZFNpZGVuYXYsIGF1dGgsIHN0b3JlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvZ2dsZVNpZGVuYXY6IHRvZ2dsZVNpZGVuYXYsXG4gICAgICBjbG9zZVNpZGVuYXY6IGNsb3NlU2lkZW5hdlxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRvZ2dsZVNpZGVuYXYgKGlkKSB7XG4gICAgICAkbWRTaWRlbmF2KGlkIHx8ICdsZWZ0JykudG9nZ2xlKClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbG9zZVNpZGVuYXYgKGlkKSB7XG4gICAgICAkbWRTaWRlbmF2KGlkIHx8ICdsZWZ0JykuY2xvc2UoKVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdzdG9ja0NvbnRyb2xsZXInLCBzdG9ja0NvbnRyb2xsZXIpXG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIHN0b2NrQ29udHJvbGxlciAoJGludGVydmFsLCAkc2NvcGUsICRzdGF0ZVBhcmFtcywgJGh0dHAsIGRpYWxvZywgcHJpY2UsIG5ld3MsIGF2YXRhcikge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuXG4gICAgdm0uc2hvd0J1eSA9IGRpYWxvZy5zaG93QnV5XG4gICAgdm0uc2hvd1NlbGwgPSBkaWFsb2cuc2hvd1NlbGxcblxuICAgIGZ1bmN0aW9uIGdldERhdGEgKCkge1xuICAgICAgdm0ubG9hZGluZyA9IHRydWVcblxuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS9kYXRhL3N5bWJvbC8nICsgJHN0YXRlUGFyYW1zLnN5bWJvbCArICcvJyArICRzdGF0ZVBhcmFtcy5tYXJrZXQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBpZiAocmVzLmRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgIHZtLm5vQ29tcGFueSA9IHJlcy5kYXRhLmVycm9yXG4gICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdm0uY29tcGFueSA9IHJlcy5kYXRhLmRhdGFcblxuICAgICAgICAgICAgaWYgKHZtLmNvbXBhbnkubmV3RGF0YSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgdm0ub2xkRGF0YSA9ICdFeHRlcm5hbCBBUEkgbm90IGF2YWlsYWJsZSBhdCB0aGlzIG1vbWVudC4gU2hvd2luZyBzeW1ib2wgZGF0YSBvbGRlciB0aGFuIDEgZGF5LidcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHJpY2UuZ2V0UHJpY2UoJHN0YXRlUGFyYW1zLnN5bWJvbCwgJHN0YXRlUGFyYW1zLm1hcmtldCB8fCB2bS5jb21wYW55Lm1hcmtldCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZtLnByaWNlID0gcmVzLnByaWNlXG4gICAgICAgICAgICAgICAgdm0udXBkYXRlZEF0ID0gcmVzLnVwZGF0ZWRBdFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBuZXdzLmdldE5ld3MoJHN0YXRlUGFyYW1zLnN5bWJvbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICB2bS5uZXdzRXJyb3IgPSAnRXJyb3IgZ2V0dGluZyBuZXdzJ1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICB2bS5uZXdzID0gcmVzLmRhdGEubmV3cy5uZXdzXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICB2bS5uZXdzRXJyb3IgPSBlcnJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB2bS5hdmF0YXIgPSBhdmF0YXIuaW5pdGlhbHModm0uY29tcGFueS5jb21wYW55IHx8ICRzdGF0ZVBhcmFtcy5zeW1ib2wpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIFNldHMgaW50ZXJ2YWwgb2YgNSBtaW51dGVzIGZvciBhdXRvLXVwZGF0aW5nIHN0b2NrIHByaWNlIG9uIFVJXG4gICAgLy8gU3RvcHMgaW50ZXJ2YWwgYWZ0ZXIgNTAgbWludXRlc1xuICAgIHZhciB1cGRhdGVQcmljZVxuICAgIGZ1bmN0aW9uIGF1dG91cGRhdGUgKCkge1xuICAgICAgdXBkYXRlUHJpY2UgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBwcmljZS5nZXRQcmljZSgkc3RhdGVQYXJhbXMuc3ltYm9sLCAkc3RhdGVQYXJhbXMubWFya2V0IHx8IHZtLmNvbXBhbnkubWFya2V0LCBmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2bS5wcmljZSA9IHJlc1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1ByaWNlIHVwZGF0ZWQgZm9yICcgKyAkc3RhdGVQYXJhbXMuc3ltYm9sICsgJyAvICcgKyAkc3RhdGVQYXJhbXMubWFya2V0IHx8IHZtLmNvbXBhbnkubWFya2V0KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0sIDEwMDAgKiA2MCAqIDUsIDEwKVxuICAgIH1cblxuICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgJGludGVydmFsLmNhbmNlbCh1cGRhdGVQcmljZSlcbiAgICAgIHVwZGF0ZVByaWNlID0gdW5kZWZpbmVkXG4gICAgfSlcblxuICAgIC8vIEZpcmUgdG8gcG9wdWxhdGUgRE9NIHdpdGggZGF0YVxuICAgIGdldERhdGEoKVxuXG4gICAgLy8gRmlyZSB0byBzdGFydCBhdXRvLXVwZGF0ZSBpbnRlcnZhbFxuICAgIGF1dG91cGRhdGUoKVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3Rvb2xiYXJDb250cm9sbGVyJywgdG9vbGJhckNvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gdG9vbGJhckNvbnRyb2xsZXIgKGF1dGgsIHN0b3JlLCAkbG9jYXRpb24sICRzY29wZSwgJHJvb3RTY29wZSwgJGh0dHAsIHNpZGVuYXYpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5sb2dpbiA9IGxvZ2luXG5cbiAgICB2bS5hdXRoID0gYXV0aFxuICAgIHZtLnRvZ2dsZVNpZGVuYXYgPSBzaWRlbmF2LnRvZ2dsZVNpZGVuYXZcbiAgICB2bS51c2VyTG9nZ2VkID0gZmFsc2VcblxuICAgIGlmIChhdXRoLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgdm0udXNlckxvZ2dlZCA9IHRydWVcbiAgICB9XG5cbiAgICAkc2NvcGUuJG9uKCd1c2VyTG9nT3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgdm0udXNlckxvZ2dlZCA9IGZhbHNlXG4gICAgfSlcblxuICAgICRzY29wZS4kb24oJ3VzZXJMb2dJbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZtLnVzZXJMb2dnZWQgPSB0cnVlXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGxvZ2luICgpIHtcbiAgICAgIC8vIFRoZSBhdXRoIHNlcnZpY2UgaGFzIGEgc2lnbmluIG1ldGhvZCB0aGF0XG4gICAgICAvLyBtYWtlcyB1c2Ugb2YgQXV0aDBMb2NrLiBJZiBhdXRoZW50aWNhdGlvblxuICAgICAgLy8gaXMgc3VjY2Vzc2Z1bCwgdGhlIHVzZXIncyBwcm9maWxlIGFuZCB0b2tlblxuICAgICAgLy8gYXJlIHNhdmVkIGluIGxvY2FsIHN0b3JhZ2Ugd2l0aCB0aGUgc3RvcmUgc2VydmljZVxuXG4gICAgICBhdXRoLnNpZ25pbih7XG4gICAgICAgIGF1dGhQYXJhbXM6IHtcbiAgICAgICAgICBzY29wZTogJ29wZW5pZCBlbWFpbCdcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKHByb2ZpbGUsIHRva2VuKSB7XG4gICAgICAgIHN0b3JlLnNldCgncHJvZmlsZScsIHByb2ZpbGUpXG4gICAgICAgIHN0b3JlLnNldCgndG9rZW4nLCB0b2tlbilcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy93ZWxjb21lJylcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdsb2dnZWQtaW4nKVxuICAgICAgICB1c2VyQWNjb3VudChmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgdm0ubWVzc2FnZSA9IHJlcy5kYXRhLm1lc3NhZ2VcbiAgICAgICAgICB2bS5mdW5kcyA9IHJlcy5kYXRhLnVzZXIuZnVuZHNcbiAgICAgICAgICB2bS51c2VyTG9nZ2VkID0gdHJ1ZVxuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndXNlckxvZ0luJylcbiAgICAgICAgfSlcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXNlckFjY291bnQgKGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCdhcGkvdXNlci8nKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IocmVzKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHZtLmZlYXR1cmVzID0gW1xuICAgICAgJyQxMDAsMDAwIHN0YXJ0aW5nIGZ1bmRzJyxcbiAgICAgICdSZWFsLXRpbWUgc3RvY2sgcHJpY2VzJyxcbiAgICAgICdTaXggaW50ZXJuYXRpb25hbCBzdG9jayBtYXJrZXRzJyxcbiAgICAgICdTdG9jayByaXNlcnMgYW5kIGZhbGxlcnMnLFxuICAgICAgJ0RhaWx5IG5ld3MgZm9yIG1hcmtldCBjb21wYW5pZXMnLFxuICAgICAgJ1VwLXRvLWRhdGUgY29tcGFueSBkYXRhJyxcbiAgICAgICdVc2VyLWZyaWVuZGx5IGludGVyZmFjZSdcbiAgICBdXG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd0b29sYmFyJywgdG9vbGJhcilcblxuICBmdW5jdGlvbiB0b29sYmFyICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy90b29sYmFyL3Rvb2xiYXIudGVtcGxhdGUuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAndG9vbGJhckNvbnRyb2xsZXInLFxuICAgICAgY29udHJvbGxlckFzOiAndG9vbGJhcidcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcigndHJhbnNhY3Rpb25zQ29udHJvbGxlcicsIHRyYW5zYWN0aW9uc0NvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gdHJhbnNhY3Rpb25zQ29udHJvbGxlciAoJGh0dHAsIGF2YXRhcikge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIGZ1bmN0aW9uIGdldFRyYW5zYWN0aW9ucyAoKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL3RyYW5zYWN0aW9uL2FsbCcpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBpZiAocmVzLmRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgIHZtLm5vVHJhbnNhY3Rpb25zID0gcmVzLmRhdGEuZXJyb3JcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdm0udHJhbnNhY3Rpb25zID0gcmVzLmRhdGEudHJhbnNhY3Rpb25zXG4gICAgICAgICAgICBhdmF0YXIuc2V0QXZhdGFyKHZtLnRyYW5zYWN0aW9ucylcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldFRyYW5zYWN0aW9ucygpXG4gIH1cbn0pKClcbiJdfQ==
