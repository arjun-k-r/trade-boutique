!function(){"use strict";function t(t,o,e,n,r,a,l){function i(t,o,e,n,r){var a;return e(function(){a=o.get("auth")}),{responseError:function(o){return 401===o.status&&(a.signout(),n.remove("profile"),n.remove("token"),r.path("/welcome")),t.reject(o)}}}i.$inject=["$q","$injector","$timeout","store","$location"],e.init({domain:"danielnitu.eu.auth0.com",clientID:"1gLOvetcrjC9GW2kEeRzEtJRJH700ia6"}),n.otherwise("/welcome"),r.state("welcome",{url:"/welcome",templateUrl:"app/components/welcome/welcome.template.html",controller:"toolbarController as toolbar"}).state("home",{url:"/home",templateUrl:"app/components/home/home.template.html",controller:"homeController as home"}).state("profile",{url:"/profile",templateUrl:"app/components/profile/profile.template.html",controller:"profileController as profile"}).state("portfolio",{url:"/portfolio",templateUrl:"app/components/portfolio/portfolio.template.html",controller:"portfolioController as portfolio"}).state("stock",{url:"/stock/:symbol/:market",templateUrl:"app/components/stock/stock.template.html",controller:"stockController as stock"}).state("news",{url:"/news/:symbol",templateUrl:"app/components/news/news.template.html",controller:"newsController as news"}).state("transactions",{url:"/transactions",templateUrl:"app/components/transactions/transactions.template.html",controller:"transactionsController as transactions"}),l.config({tokenGetter:["options",function(t){return".html"===t.url.substr(t.url.length-5)?null:window.localStorage.getItem("token").slice(1,-1)}],whiteListedDomains:["trade.boutique","localhost","jsonplaceholder.typicode.com"]}),t.theme("default").primaryPalette("blue").accentPalette("grey").warnPalette("red"),t.theme("dark-blue").backgroundPalette("blue").dark(),o.factory("redirect",i),a.interceptors.push("jwtInterceptor"),a.interceptors.push("redirect")}function o(t,o,e,n,r,a){t.$on("$locationChangeStart",function(){var t=n.get("token");t&&(r.isTokenExpired(t)||e.isAuthenticated||(document.body.classList.add("logged-in"),e.authenticate(n.get("profile"),t))),e.isAuthenticated||a.path("/welcome")})}t.$inject=["$mdThemingProvider","$provide","authProvider","$urlRouterProvider","$stateProvider","$httpProvider","jwtOptionsProvider"],o.$inject=["$rootScope","$state","auth","store","jwtHelper","$location"],angular.module("app",["auth0","angular-storage","angular-jwt","ngMaterial","ui.router","ngLetterAvatar","sidenav","profile","price","news","avatar"]).config(t).run(o)}(),function(){"use strict";function t(t,o,e,n,r,a,l){function i(o,e){n.loading(s.loading,!0),s.buyQuantity=e,s.buyPrice=(e*o).toFixed(2);var a=s.user.stock.quantity,l=r.weightedAverage(s.user.stock.price,o,a,e),i=s.user.stock.quantity+e,c=s.user.funds-(o*e).toFixed(2);r.buyStock(s.symbol,s.company,l,o,i,c,a,function(o,e){n.loading(s.loading,!1),t.$broadcast("transaction"),o?s.error=o:(s.closeDialog(),s.showToast("bought",s.buyQuantity,s.symbol,s.buyPrice.replace(/(\d)(?=(\d{3})+\.)/g,"$1,")))})}var s=this;s.stockQuantity=1,s.buyQuantity=0,s.buyPrice=0,s.symbol=a,s.company=l,s.loading=!1,s.closeDialog=n.closeDialog,s.showToast=n.showToast,s.buyStock=i,e.getPrice(s.symbol,null,function(t,o){t?s.error=t:s.stockPrice=o}),r.getStockAndFunds(s.symbol,function(t,o){t?s.error=t:s.user=o})}t.$inject=["$rootScope","$mdDialog","price","dialog","profile","passSymbol","passCompany"],angular.module("app").controller("buyDialogController",t)}(),function(){"use strict";function t(t,o,e){function n(o,e,n){t.show({locals:{passSymbol:e,passCompany:n},controller:"buyDialogController",controllerAs:"buyDialog",templateUrl:"app/components/dialog/buyDialog.template.html",parent:angular.element(document.body),targetEvent:o,clickOutsideToClose:!0,focusOnOpen:!1})}function r(o,e,n){t.show({locals:{passSymbol:e,passCompany:n},controller:"sellDialogController",controllerAs:"sellDialog",templateUrl:"app/components/dialog/sellDialog.template.html",parent:angular.element(document.body),targetEvent:o,clickOutsideToClose:!0,focusOnOpen:!1})}function a(t,e,n,r){o.show(o.simple().textContent("You "+t+" "+e+" "+n+" shares for $"+r).position("bottom right").hideDelay(5e3).toastClass("bs-toast"))}function l(){t.hide()}function i(t,o,n){e(function(){t=o},n||500)}return{showBuy:n,showSell:r,closeDialog:l,showToast:a,loading:i}}t.$inject=["$mdDialog","$mdToast","$timeout"],angular.module("app").factory("dialog",t)}(),function(){"use strict";function t(t,o,e,n,r,a){function l(o,n){var r=i.user.stock.quantity-n,l=(i.stockPrice-i.userStockPrice)*n;e.sellStock(i.symbol,a,o,n,l,r,function(e,r){e?(i.loading=!1,i.error=e):(i.closeDialog(),i.showToast("sold",n,i.symbol,(o*n).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")),t.$broadcast("transaction"))})}var i=this;i.symbol=r,i.loading=!1,i.closeDialog=n.closeDialog,i.showToast=n.showToast,i.sellStock=l,o.getPrice(i.symbol,null,function(t,o){t?i.error=t:i.stockPrice=o}),e.getStockAndFunds(i.symbol,function(t,o){t?i.error=t:(i.user=o,i.stockQuantity=i.user.stock.quantity,i.userStockPrice=i.user.stock.price)})}t.$inject=["$rootScope","price","profile","dialog","passSymbol","passCompany"],angular.module("app").controller("sellDialogController",t)}(),function(){"use strict";function t(){function t(t){return t.forEach(function(t){t.avatar=o(t.company)}),t}function o(t){var o=t.split(" ",2),e="";return o.forEach(function(t){"Inc."!==t&&(e+=t[0])}),e.toUpperCase()}return{setAvatar:t,initials:o}}angular.module("avatar",[]).factory("avatar",t)}(),function(){"use strict";function t(t){return{restrict:"A",link:function(o,e,n){e.addClass("ng-hide"),t(function(){e.removeClass("ng-hide")},n.showWithDelay||2e3)}}}t.$inject=["$timeout"],angular.module("app").directive("showWithDelay",t)}(),function(){"use strict";function t(t){function o(o,e,n){null!==e?t.get("/api/price/"+o+"/"+e).then(function(t){return n(null,t.data.price.price)},function(t){return n("Error: "+t.data.error,null)}):t.get("/api/price/"+o).then(function(t){return n(null,t.data.price.price)},function(t){return n("Error: status "+t.status,null)})}function e(o,e){t.post("/api/price/multiple",o).then(function(t){return e(null,t.data.prices)},function(t){return e("Error: status "+t.status,null)})}return{getPrice:o,getPrices:e}}t.$inject=["$http"],angular.module("price",[]).factory("price",t)}(),function(){"use strict";function t(t,o,e){function n(e){r.loading=!0,r.markets.includes(e)?t.get("/api/risefall/"+e).then(function(t){t.data.error?r.error=t.data.error:(r.error=null,r.stocks=t.data.stocks.stocks,o.setAvatar(r.stocks),r.loading=!1)}):r.error="No such market: "+e}var r=this;r.markets=["US","LSE","EURO","TMX","HKE","INDIA"],r.loading=!1,r.showSell=e.showSell,r.showBuy=e.showBuy,r.getRisersFallers=n,n("US")}t.$inject=["$http","avatar","dialog"],angular.module("app").controller("homeController",t)}(),function(){"use strict";function t(t,o,e){function n(t){e.getNews(t,function(t,o){t?r.error=t:console.log(o)})}var r=this;r.getNews=n,"news"===t.current.name?function(){e.getRandomNews(function(t,o){t?r.error=t:(r.news=[],o.data.news.forEach(function(t){if(t.news.length>1)for(var o=0;o<t.news.length;o++)r.news.push(t.news[o])}),e.shuffleNews(r.news))})}():n(o.symbol)}t.$inject=["$state","$stateParams","news"],angular.module("app").controller("newsController",t)}(),function(){"use strict";function t(t){function o(o,e){t.get("/api/news/symbol/"+o).then(function(t){e(null,t)},function(t){e(t,null)})}function e(o){t.get("/api/news/random").then(function(t){o(null,t)},function(t){o(t,null)})}function n(t){for(var o,e,n=t.length;n;)e=Math.floor(Math.random()*n--),o=t[n],t[n]=t[e],t[e]=o;return t}return{getNews:o,getRandomNews:e,shuffleNews:n}}t.$inject=["$http"],angular.module("news",[]).factory("news",t)}(),function(){"use strict";function t(t,o,e,n,r){function a(){o.get("/api/user/portfolio").then(function(t){t.data.message?s.noPortfolio=t.data.message:(s.portfolio=t.data.portfolio,s.funds=t.data.funds,l(s.portfolio),r.setAvatar(s.portfolio))})}function l(t){var o=[];t.forEach(function(t){o.push(t.symbol)}),e.getPrices(o,function(t,o){t?s.error=t:i(s.portfolio,o)})}function i(t,o){return t.forEach(function(t){o.forEach(function(o){o.symbol===t.symbol&&(t.currPrice=o.price,t.market=o.market)})}),t}var s=this;s.showSell=n.showSell,s.showBuy=n.showBuy,s.getPortfolio=a,t.$on("transaction",function(){a()}),a()}t.$inject=["$scope","$http","price","dialog","avatar"],angular.module("app").controller("portfolioController",t)}(),function(){"use strict";function t(t,o){var e=this;e.profile=o.getProfile(),o.getFunds(function(t,o){t?e.error=t:e.funds=o})}t.$inject=["$http","profile"],angular.module("app").controller("profileController",t)}(),function(){"use strict";function t(t){function o(){var t=JSON.parse(window.localStorage.getItem("profile"));return~t.name.indexOf("@")&&(t.name=t.name.split("@")[0]),t}function e(o){t.get("/api/user/").then(function(t){o(t.data.user)})}function n(o){t.get("/api/user/funds/").then(function(t){o(null,t.data.funds)},function(t){o("Error: Cannot get funds!"+t,null)})}function r(o,e){t.get("/api/user/portfolio/"+o).then(function(t){var o={stock:t.data.stock,funds:t.data.funds};e(null,o)},function(t){e("Error: status"+t.status,null,null)})}function a(o,e,n,r,a,l,i,s){var c={symbol:o,company:e,price:n,buyPrice:r,quantity:a,funds:l.toFixed(3),exists:i};t.post("/api/user/buy",c).then(function(t){s(null,t)},function(t){s(t,null)})}function l(o,e,n,r,a,l,i){var s={symbol:o,company:e,sellPrice:n,quantity:r,profit:a,sellAll:l};t.post("api/user/sell",s).then(function(t){i(null,t)},function(t){console.log(t),i(t,null)})}function i(t,o,e,n){return((t*e+o*n)/(e+n)).toFixed(3)}return{getUser:e,getStockAndFunds:r,getProfile:o,getFunds:n,buyStock:a,sellStock:l,weightedAverage:i}}t.$inject=["$http"],angular.module("profile",[]).factory("profile",t)}(),function(){"use strict";function t(t,o){function e(o){return t.get("/api/data/symbols/"+o).then(function(t){var o=[];return t.data.data.forEach(function(t){o.push(t.symbol)}),o})}function n(t){if(!t)return!1;o.transitionTo("stock",{symbol:t})}var r=this;r.queryStock=e,r.getData=n}t.$inject=["$http","$state"],angular.module("app").controller("searchController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/search/search.template.html",controller:"searchController",controllerAs:"search"}}angular.module("app").directive("search",t)}(),function(){"use strict";function t(t,o,e,n,r,a,l,i){function s(){i.getFunds(function(t,o){t&&(p.error=t),p.funds=o})}function c(){t.get("http://localhost:3000/api/news/AAPL",{skipAuthorization:!0}).then(function(t){p.message=t.data.news.symbol})}function u(){r.signout(),a.remove("profile"),a.remove("token"),p.sidenavShow=!1,document.body.classList.remove("logged-in"),o.$broadcast("userLogOut"),p.userLogged=!1,n.path("/welcome")}var p=this;p.getNews=c,p.logout=u,p.closeSidenav=l.closeSidenav,p.auth=r,p.message="",p.sidenavShow=!1,p.auth.isAuthenticated&&(p.profile=i.getProfile(),p.sidenavShow=!0,s()),e.$on("userLogIn",function(){p.profile=i.getProfile(),p.sidenavShow=!0,s()}),e.$on("transaction",function(){s()})}t.$inject=["$http","$rootScope","$scope","$location","auth","store","sidenav","profile"],angular.module("app").controller("sidenavController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/sidenav/sidenav.template.html",controller:"sidenavController",controllerAs:"sidenav"}}angular.module("app").directive("sidenav",t)}(),function(){"use strict";function t(t,o,e){function n(o){t(o||"left").toggle()}function r(o){t(o||"left").close()}return{toggleSidenav:n,closeSidenav:r}}t.$inject=["$mdSidenav","auth","store"],angular.module("sidenav",[]).factory("sidenav",t)}(),function(){"use strict";function t(t,o,e,n,r,a){var l=this;l.loading=!1,l.showBuy=e.showBuy,l.showSell=e.showSell,function(){l.loading=!0,o.get("/api/data/symbol/"+t.symbol+"/"+t.market).then(function(o){o.data.error?(l.noCompany=o.data.error,l.loading=!1):(l.company=o.data.data,n.getPrice(t.symbol,t.market||l.company.market,function(t,o){t?l.error=t:l.price=o}),r.getNews(t.symbol,function(t,o){if(t)l.newsError="Error getting news";else try{l.news=o.data.news.news}catch(t){l.newsError=t}l.loading=!1}),l.avatar=a.initials(l.company.company||t.symbol))})}()}t.$inject=["$stateParams","$http","dialog","price","news","avatar"],angular.module("app").controller("stockController",t)}(),function(){"use strict";function t(t,o,e,n,r,a,l){function i(){t.signin({authParams:{scope:"openid email"}},function(t,n){o.set("profile",t),o.set("token",n),e.path("/welcome"),document.body.classList.add("logged-in"),c.userLogged=!0,s(function(t){c.message=t.data.message,c.funds=t.data.user.funds,r.$broadcast("userLogIn")})},function(t){console.log(t)})}function s(t){a.get("api/user/").then(function(o){t(o)})}var c=this;c.login=i,c.auth=t,c.toggleSidenav=l.toggleSidenav,c.userLogged=!1,t.isAuthenticated&&(c.userLogged=!0),n.$on("userLogOut",function(){c.userLogged=!1}),n.$on("userLogIn",function(){c.userLogged=!0}),c.features=["$100,000 starting funds","Real-time stock prices","Six international stock markets","Stock risers and fallers","Daily news for market companies","Up-to-date company data","User-friendly interface"]}t.$inject=["auth","store","$location","$scope","$rootScope","$http","sidenav"],angular.module("app").controller("toolbarController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/toolbar/toolbar.template.html",controller:"toolbarController",controllerAs:"toolbar"}}angular.module("app").directive("toolbar",t)}(),function(){"use strict";function t(t,o){var e=this;!function(){t.get("/api/transaction/all").then(function(t){t.data.error?e.noTransactions=t.data.error:(e.transactions=t.data.transactions,o.setAvatar(e.transactions))},function(t){e.error=t})}()}t.$inject=["$http","avatar"],angular.module("app").controller("transactionsController",t)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImRpYWxvZy9idXlEaWFsb2cuY29udHJvbGxlci5qcyIsImRpYWxvZy9kaWFsb2cuc2VydmljZS5qcyIsImRpYWxvZy9zZWxsRGlhbG9nLmNvbnRyb2xsZXIuanMiLCJoZWxwZXJzL2F2YXRhci5zZXJ2aWNlLmpzIiwiaGVscGVycy9kZWxheS5kaXJlY3RpdmUuanMiLCJoZWxwZXJzL3ByaWNlLnNlcnZpY2UuanMiLCJob21lL2hvbWUuY29udHJvbGxlci5qcyIsIm5ld3MvbmV3cy5jb250cm9sbGVyLmpzIiwibmV3cy9uZXdzLnNlcnZpY2UuanMiLCJwb3J0Zm9saW8vcG9ydGZvbGlvLmNvbnRyb2xsZXIuanMiLCJwcm9maWxlL3Byb2ZpbGUuY29udHJvbGxlci5qcyIsInByb2ZpbGUvcHJvZmlsZS5zZXJ2aWNlLmpzIiwic2VhcmNoL3NlYXJjaC5jb250cm9sbGVyLmpzIiwic2VhcmNoL3NlYXJjaC5kaXJlY3RpdmUuanMiLCJzaWRlbmF2L3NpZGVuYXYuY29udHJvbGxlci5qcyIsInNpZGVuYXYvc2lkZW5hdi5kaXJlY3RpdmUuanMiLCJzaWRlbmF2L3NpZGVuYXYuc2VydmljZS5qcyIsInN0b2NrL3N0b2NrLmNvbnRyb2xsZXIuanMiLCJ0b29sYmFyL3Rvb2xiYXIuY29udHJvbGxlci5qcyIsInRvb2xiYXIvdG9vbGJhci5kaXJlY3RpdmUuanMiLCJ0cmFuc2FjdGlvbnMvdHJhbnNhY3Rpb25zLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiY29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJHByb3ZpZGUiLCJhdXRoUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJyZWRpcmVjdCIsIiRxIiwiJGluamVjdG9yIiwiJHRpbWVvdXQiLCJzdG9yZSIsIiRsb2NhdGlvbiIsImF1dGgiLCJnZXQiLCJyZXNwb25zZUVycm9yIiwicmVqZWN0aW9uIiwic3RhdHVzIiwic2lnbm91dCIsInJlbW92ZSIsInBhdGgiLCJyZWplY3QiLCJpbml0IiwiZG9tYWluIiwiY2xpZW50SUQiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImp3dE9wdGlvbnNQcm92aWRlciIsInRva2VuR2V0dGVyIiwib3B0aW9ucyIsInN1YnN0ciIsImxlbmd0aCIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzbGljZSIsIndoaXRlTGlzdGVkRG9tYWlucyIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsImRhcmsiLCJmYWN0b3J5IiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInJ1biIsIiRyb290U2NvcGUiLCIkc3RhdGUiLCJqd3RIZWxwZXIiLCIkb24iLCJ0b2tlbiIsImlzVG9rZW5FeHBpcmVkIiwiaXNBdXRoZW50aWNhdGVkIiwiZG9jdW1lbnQiLCJib2R5IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXV0aGVudGljYXRlIiwiYW5ndWxhciIsIm1vZHVsZSIsImJ1eURpYWxvZ0NvbnRyb2xsZXIiLCIkbWREaWFsb2ciLCJwcmljZSIsImRpYWxvZyIsInByb2ZpbGUiLCJwYXNzU3ltYm9sIiwicGFzc0NvbXBhbnkiLCJidXlTdG9jayIsInF1YW50aXR5IiwibG9hZGluZyIsInZtIiwiYnV5UXVhbnRpdHkiLCJidXlQcmljZSIsInRvRml4ZWQiLCJjdXJyUXR5IiwidXNlciIsInN0b2NrIiwiYXZnUHJpY2UiLCJ3ZWlnaHRlZEF2ZXJhZ2UiLCJ0b3RhbFF0eSIsImZ1bmRzIiwic3ltYm9sIiwiY29tcGFueSIsImVyciIsInJlcyIsIiRicm9hZGNhc3QiLCJlcnJvciIsImNsb3NlRGlhbG9nIiwic2hvd1RvYXN0IiwicmVwbGFjZSIsInRoaXMiLCJzdG9ja1F1YW50aXR5IiwiZ2V0UHJpY2UiLCJzdG9ja1ByaWNlIiwiZ2V0U3RvY2tBbmRGdW5kcyIsImRhdGEiLCIkbWRUb2FzdCIsInNob3dCdXkiLCIkZXZlbnQiLCJzaG93IiwibG9jYWxzIiwiY29udHJvbGxlckFzIiwicGFyZW50IiwiZWxlbWVudCIsInRhcmdldEV2ZW50IiwiY2xpY2tPdXRzaWRlVG9DbG9zZSIsImZvY3VzT25PcGVuIiwic2hvd1NlbGwiLCJhY3Rpb24iLCJzaW1wbGUiLCJ0ZXh0Q29udGVudCIsInBvc2l0aW9uIiwiaGlkZURlbGF5IiwidG9hc3RDbGFzcyIsImhpZGUiLCJ2YWx1ZSIsInRpbWVvdXQiLCJzZWxsRGlhbG9nQ29udHJvbGxlciIsInNlbGxTdG9jayIsInNlbGxBbGwiLCJwcm9maXQiLCJ1c2VyU3RvY2tQcmljZSIsImF2YXRhciIsInNldEF2YXRhciIsInN0b2NrQXJyYXkiLCJmb3JFYWNoIiwiaW5pdGlhbHMiLCJuYW1lIiwic3BsaXQiLCJpdGVtIiwidG9VcHBlckNhc2UiLCJzaG93V2l0aERlbGF5IiwicmVzdHJpY3QiLCJsaW5rIiwiJHNjb3BlIiwiJGVsZW1lbnQiLCJhdHRycyIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJkaXJlY3RpdmUiLCIkaHR0cCIsIm1hcmtldCIsImNiIiwidGhlbiIsImdldFByaWNlcyIsInN5bWJvbHMiLCJwb3N0IiwicHJpY2VzIiwiaG9tZUNvbnRyb2xsZXIiLCJnZXRSaXNlcnNGYWxsZXJzIiwiaW5jbHVkZXMiLCJzdG9ja3MiLCJtYXJrZXRzIiwibmV3c0NvbnRyb2xsZXIiLCIkc3RhdGVQYXJhbXMiLCJuZXdzIiwiZ2V0TmV3cyIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50IiwiZ2V0UmFuZG9tTmV3cyIsImkiLCJzaHVmZmxlTmV3cyIsImFycmF5IiwidCIsIm0iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwb3J0Zm9saW9Db250cm9sbGVyIiwiZ2V0UG9ydGZvbGlvIiwibWVzc2FnZSIsIm5vUG9ydGZvbGlvIiwicG9ydGZvbGlvIiwibWF0Y2hQcmljZXMiLCJ1c2VyUG9ydGZvbGlvIiwiY3VyclByaWNlcyIsInVzZXJTdG9jayIsImN1cnJQcmljZSIsInByb2ZpbGVDb250cm9sbGVyIiwiZ2V0UHJvZmlsZSIsImdldEZ1bmRzIiwidXNlclByb2ZpbGUiLCJKU09OIiwicGFyc2UiLCJpbmRleE9mIiwiZ2V0VXNlciIsImV4aXN0cyIsInNlbGxQcmljZSIsInByZXZQcmljZSIsInByZXZRdHkiLCJzZWFyY2hDb250cm9sbGVyIiwicXVlcnlTdG9jayIsInJlc3VsdHMiLCJnZXREYXRhIiwidHJhbnNpdGlvblRvIiwic2VhcmNoIiwic2lkZW5hdkNvbnRyb2xsZXIiLCJzaWRlbmF2Iiwic2tpcEF1dGhvcml6YXRpb24iLCJyZXNwb25zZSIsImxvZ291dCIsInNpZGVuYXZTaG93IiwidXNlckxvZ2dlZCIsImNsb3NlU2lkZW5hdiIsIiRtZFNpZGVuYXYiLCJ0b2dnbGVTaWRlbmF2IiwiaWQiLCJ0b2dnbGUiLCJjbG9zZSIsInN0b2NrQ29udHJvbGxlciIsIm5vQ29tcGFueSIsIm5ld3NFcnJvciIsInRvb2xiYXJDb250cm9sbGVyIiwibG9naW4iLCJzaWduaW4iLCJhdXRoUGFyYW1zIiwic2NvcGUiLCJzZXQiLCJ1c2VyQWNjb3VudCIsImZlYXR1cmVzIiwidG9vbGJhciIsInRyYW5zYWN0aW9uc0NvbnRyb2xsZXIiLCJub1RyYW5zYWN0aW9ucyIsInRyYW5zYWN0aW9ucyJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQVdBLFNBQUFBLEdBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEtBa0VBLFFBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsRUFLQSxPQUpBSCxHQUFBLFdBQ0FHLEVBQUFKLEVBQUFLLElBQUEsV0FJQUMsY0FBQSxTQUFBQyxHQU9BLE1BTkEsT0FBQUEsRUFBQUMsU0FDQUosRUFBQUssVUFDQVAsRUFBQVEsT0FBQSxXQUNBUixFQUFBUSxPQUFBLFNBQ0FQLEVBQUFRLEtBQUEsYUFFQVosRUFBQWEsT0FBQUwsaUVBOUVBYixFQUFBbUIsTUFDQUMsT0FB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RSxhQUFBLFdBUkEzQyxRQUNBQyxPQUFBLE9BQ0FnRixVQUFBLFVBQUFrRixNQ0xBLFdBQ0EsWUFNQSxTQUFBQyxHQUFBbEYsRUFBQWxCLEdBQ0EsR0FBQXBELEdBQUFvQixNQUVBLFdBQ0FrRCxFQUNBbEksSUFBQSx3QkFDQXFJLEtBQUEsU0FBQTNELEdBQ0FBLEVBQUFXLEtBQUFULE1BQ0FoQixFQUFBeUosZUFBQTNJLEVBQUFXLEtBQUFULE9BRUFoQixFQUFBMEosYUFBQTVJLEVBQUFXLEtBQUFpSSxhQUNBdEcsRUFBQUMsVUFBQXJELEVBQUEwSixnQkFFQSxTQUFBN0ksR0FDQWIsRUFBQWdCLE1BQUFILG9DQWxCQXpCLFFBQ0FDLE9BQUEsT0FDQWxDLFdBQUEseUJBQUFxTSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnLCBbXG4gICAgICAnYXV0aDAnLCAnYW5ndWxhci1zdG9yYWdlJywgJ2FuZ3VsYXItand0JywgJ25nTWF0ZXJpYWwnLCAndWkucm91dGVyJywgJ25nTGV0dGVyQXZhdGFyJyxcbiAgICAgICdzaWRlbmF2JywgJ3Byb2ZpbGUnLCAncHJpY2UnLCAnbmV3cycsICdhdmF0YXInXSlcbiAgICAuY29uZmlnKGNvbmZpZylcbiAgICAucnVuKHJ1bilcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY29uZmlnIChcbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIsXG4gICAgJHByb3ZpZGUsXG4gICAgYXV0aFByb3ZpZGVyLFxuICAgICR1cmxSb3V0ZXJQcm92aWRlcixcbiAgICAkc3RhdGVQcm92aWRlcixcbiAgICAkaHR0cFByb3ZpZGVyLFxuICAgIGp3dE9wdGlvbnNQcm92aWRlcikge1xuICAgIGF1dGhQcm92aWRlci5pbml0KHtcbiAgICAgIGRvbWFpbjogJ2RhbmllbG5pdHUuZXUuYXV0aDAuY29tJyxcbiAgICAgIGNsaWVudElEOiAnMWdMT3ZldGNyakM5R1cya0VlUnpFdEpSSkg3MDBpYTYnXG4gICAgfSlcblxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy93ZWxjb21lJylcblxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAuc3RhdGUoJ3dlbGNvbWUnLCB7XG4gICAgICAgIHVybDogJy93ZWxjb21lJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy93ZWxjb21lL3dlbGNvbWUudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICd0b29sYmFyQ29udHJvbGxlciBhcyB0b29sYmFyJ1xuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgdXJsOiAnL2hvbWUnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL2hvbWUvaG9tZS50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ2hvbWVDb250cm9sbGVyIGFzIGhvbWUnXG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdwcm9maWxlJywge1xuICAgICAgICB1cmw6ICcvcHJvZmlsZScsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvcHJvZmlsZS9wcm9maWxlLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAncHJvZmlsZUNvbnRyb2xsZXIgYXMgcHJvZmlsZSdcbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ3BvcnRmb2xpbycsIHtcbiAgICAgICAgdXJsOiAnL3BvcnRmb2xpbycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvcG9ydGZvbGlvL3BvcnRmb2xpby50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ3BvcnRmb2xpb0NvbnRyb2xsZXIgYXMgcG9ydGZvbGlvJ1xuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnc3RvY2snLCB7XG4gICAgICAgIHVybDogJy9zdG9jay86c3ltYm9sLzptYXJrZXQnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3N0b2NrL3N0b2NrLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnc3RvY2tDb250cm9sbGVyIGFzIHN0b2NrJ1xuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnbmV3cycsIHtcbiAgICAgICAgdXJsOiAnL25ld3MvOnN5bWJvbCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvbmV3cy9uZXdzLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnbmV3c0NvbnRyb2xsZXIgYXMgbmV3cydcbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ3RyYW5zYWN0aW9ucycsIHtcbiAgICAgICAgdXJsOiAnL3RyYW5zYWN0aW9ucycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvdHJhbnNhY3Rpb25zL3RyYW5zYWN0aW9ucy50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ3RyYW5zYWN0aW9uc0NvbnRyb2xsZXIgYXMgdHJhbnNhY3Rpb25zJ1xuICAgICAgfSlcblxuICAgIGp3dE9wdGlvbnNQcm92aWRlci5jb25maWcoe1xuICAgICAgdG9rZW5HZXR0ZXI6IFsnb3B0aW9ucycsIGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIC8vIERvbid0IHNlbmQgdGhlIHRva2VuIGZvciB0ZW1wbGF0ZSByZXF1ZXN0c1xuICAgICAgICBpZiAob3B0aW9ucy51cmwuc3Vic3RyKG9wdGlvbnMudXJsLmxlbmd0aCAtIDUpID09PSAnLmh0bWwnKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0b2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKVxuICAgICAgICByZXR1cm4gdG9rZW4uc2xpY2UoMSwgLTEpXG4gICAgICB9XSxcbiAgICAgIHdoaXRlTGlzdGVkRG9tYWluczogWyd0cmFkZS5ib3V0aXF1ZScsICdsb2NhbGhvc3QnLCAnanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbSddXG4gICAgfSlcblxuICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXG4gICAgICAucHJpbWFyeVBhbGV0dGUoJ2JsdWUnKVxuICAgICAgLmFjY2VudFBhbGV0dGUoJ2dyZXknKVxuICAgICAgLndhcm5QYWxldHRlKCdyZWQnKVxuXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkYXJrLWJsdWUnKS5iYWNrZ3JvdW5kUGFsZXR0ZSgnYmx1ZScpLmRhcmsoKVxuXG4gICAgZnVuY3Rpb24gcmVkaXJlY3QgKCRxLCAkaW5qZWN0b3IsICR0aW1lb3V0LCBzdG9yZSwgJGxvY2F0aW9uKSB7XG4gICAgICB2YXIgYXV0aFxuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBhdXRoID0gJGluamVjdG9yLmdldCgnYXV0aCcpXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXNwb25zZUVycm9yOiBmdW5jdGlvbiAocmVqZWN0aW9uKSB7XG4gICAgICAgICAgaWYgKHJlamVjdGlvbi5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgYXV0aC5zaWdub3V0KClcbiAgICAgICAgICAgIHN0b3JlLnJlbW92ZSgncHJvZmlsZScpXG4gICAgICAgICAgICBzdG9yZS5yZW1vdmUoJ3Rva2VuJylcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvd2VsY29tZScpXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgICRwcm92aWRlLmZhY3RvcnkoJ3JlZGlyZWN0JywgcmVkaXJlY3QpXG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnand0SW50ZXJjZXB0b3InKVxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ3JlZGlyZWN0JylcbiAgfVxuXG4gIGZ1bmN0aW9uIHJ1biAoJHJvb3RTY29wZSwgJHN0YXRlLCBhdXRoLCBzdG9yZSwgand0SGVscGVyLCAkbG9jYXRpb24pIHtcbiAgICAkcm9vdFNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBHZXQgdGhlIEpXVCB0aGF0IGlzIHNhdmVkIGluIGxvY2FsIHN0b3JhZ2VcbiAgICAgIC8vIGFuZCBpZiBpdCBpcyB0aGVyZSwgY2hlY2sgd2hldGhlciBpdCBpcyBleHBpcmVkLlxuICAgICAgLy8gSWYgaXQgaXNuJ3QsIHNldCB0aGUgdXNlcidzIGF1dGggc3RhdGVcbiAgICAgIHZhciB0b2tlbiA9IHN0b3JlLmdldCgndG9rZW4nKVxuICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgIGlmICghand0SGVscGVyLmlzVG9rZW5FeHBpcmVkKHRva2VuKSkge1xuICAgICAgICAgIGlmICghYXV0aC5pc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnbG9nZ2VkLWluJylcbiAgICAgICAgICAgIGF1dGguYXV0aGVudGljYXRlKHN0b3JlLmdldCgncHJvZmlsZScpLCB0b2tlbilcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFhdXRoLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3dlbGNvbWUnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignYnV5RGlhbG9nQ29udHJvbGxlcicsIGJ1eURpYWxvZ0NvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gYnV5RGlhbG9nQ29udHJvbGxlciAoJHJvb3RTY29wZSwgJG1kRGlhbG9nLCBwcmljZSwgZGlhbG9nLCBwcm9maWxlLCBwYXNzU3ltYm9sLCBwYXNzQ29tcGFueSkge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLnN0b2NrUXVhbnRpdHkgPSAxXG4gICAgdm0uYnV5UXVhbnRpdHkgPSAwXG4gICAgdm0uYnV5UHJpY2UgPSAwXG4gICAgdm0uc3ltYm9sID0gcGFzc1N5bWJvbFxuICAgIHZtLmNvbXBhbnkgPSBwYXNzQ29tcGFueVxuICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuXG4gICAgdm0uY2xvc2VEaWFsb2cgPSBkaWFsb2cuY2xvc2VEaWFsb2dcbiAgICB2bS5zaG93VG9hc3QgPSBkaWFsb2cuc2hvd1RvYXN0XG4gICAgdm0uYnV5U3RvY2sgPSBidXlTdG9ja1xuXG4gICAgcHJpY2UuZ2V0UHJpY2Uodm0uc3ltYm9sLCBudWxsLCBmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLnN0b2NrUHJpY2UgPSByZXNcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcHJvZmlsZS5nZXRTdG9ja0FuZEZ1bmRzKHZtLnN5bWJvbCwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0udXNlciA9IGRhdGFcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gYnV5U3RvY2sgKHByaWNlLCBxdWFudGl0eSkge1xuICAgICAgZGlhbG9nLmxvYWRpbmcodm0ubG9hZGluZywgdHJ1ZSlcbiAgICAgIHZtLmJ1eVF1YW50aXR5ID0gcXVhbnRpdHlcbiAgICAgIHZtLmJ1eVByaWNlID0gKHF1YW50aXR5ICogcHJpY2UpLnRvRml4ZWQoMilcbiAgICAgIHZhciBjdXJyUXR5ID0gdm0udXNlci5zdG9jay5xdWFudGl0eVxuICAgICAgdmFyIGF2Z1ByaWNlID0gcHJvZmlsZS53ZWlnaHRlZEF2ZXJhZ2Uodm0udXNlci5zdG9jay5wcmljZSwgcHJpY2UsIGN1cnJRdHksIHF1YW50aXR5KVxuICAgICAgdmFyIHRvdGFsUXR5ID0gdm0udXNlci5zdG9jay5xdWFudGl0eSArIHF1YW50aXR5XG4gICAgICB2YXIgZnVuZHMgPSB2bS51c2VyLmZ1bmRzIC0gKChwcmljZSAqIHF1YW50aXR5KS50b0ZpeGVkKDIpKVxuXG4gICAgICBwcm9maWxlLmJ1eVN0b2NrKHZtLnN5bWJvbCwgdm0uY29tcGFueSwgYXZnUHJpY2UsIHByaWNlLCB0b3RhbFF0eSwgZnVuZHMsIGN1cnJRdHksIGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgICBkaWFsb2cubG9hZGluZyh2bS5sb2FkaW5nLCBmYWxzZSlcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd0cmFuc2FjdGlvbicpXG5cbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uY2xvc2VEaWFsb2coKVxuICAgICAgICAgIHZtLnNob3dUb2FzdCgnYm91Z2h0Jywgdm0uYnV5UXVhbnRpdHksIHZtLnN5bWJvbCwgKHZtLmJ1eVByaWNlLnJlcGxhY2UoLyhcXGQpKD89KFxcZHszfSkrXFwuKS9nLCAnJDEsJykpKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdkaWFsb2cnLCBkaWFsb2cpXG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGRpYWxvZyAoJG1kRGlhbG9nLCAkbWRUb2FzdCwgJHRpbWVvdXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2hvd0J1eTogc2hvd0J1eSxcbiAgICAgIHNob3dTZWxsOiBzaG93U2VsbCxcbiAgICAgIGNsb3NlRGlhbG9nOiBjbG9zZURpYWxvZyxcbiAgICAgIHNob3dUb2FzdDogc2hvd1RvYXN0LFxuICAgICAgbG9hZGluZzogbG9hZGluZ1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dCdXkgKCRldmVudCwgcGFzc1N5bWJvbCwgcGFzc0NvbXBhbnkpIHtcbiAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgbG9jYWxzOiB7cGFzc1N5bWJvbDogcGFzc1N5bWJvbCwgcGFzc0NvbXBhbnk6IHBhc3NDb21wYW55fSxcbiAgICAgICAgY29udHJvbGxlcjogJ2J1eURpYWxvZ0NvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICdidXlEaWFsb2cnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL2RpYWxvZy9idXlEaWFsb2cudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICB0YXJnZXRFdmVudDogJGV2ZW50LFxuICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlLFxuICAgICAgICBmb2N1c09uT3BlbjogZmFsc2VcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd1NlbGwgKCRldmVudCwgcGFzc1N5bWJvbCwgcGFzc0NvbXBhbnkpIHtcbiAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgbG9jYWxzOiB7cGFzc1N5bWJvbDogcGFzc1N5bWJvbCwgcGFzc0NvbXBhbnk6IHBhc3NDb21wYW55fSxcbiAgICAgICAgY29udHJvbGxlcjogJ3NlbGxEaWFsb2dDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAnc2VsbERpYWxvZycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvZGlhbG9nL3NlbGxEaWFsb2cudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICB0YXJnZXRFdmVudDogJGV2ZW50LFxuICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlLFxuICAgICAgICBmb2N1c09uT3BlbjogZmFsc2VcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd1RvYXN0IChhY3Rpb24sIHF1YW50aXR5LCBzeW1ib2wsIHByaWNlKSB7XG4gICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAkbWRUb2FzdFxuICAgICAgICAgIC5zaW1wbGUoKVxuICAgICAgICAgIC50ZXh0Q29udGVudCgnWW91ICcgKyBhY3Rpb24gKyAnICcgKyBxdWFudGl0eSArICcgJyArIHN5bWJvbCArICcgc2hhcmVzIGZvciAkJyArIHByaWNlKVxuICAgICAgICAgIC5wb3NpdGlvbignYm90dG9tIHJpZ2h0JylcbiAgICAgICAgICAuaGlkZURlbGF5KDUwMDApXG4gICAgICAgICAgLnRvYXN0Q2xhc3MoJ2JzLXRvYXN0JykpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvc2VEaWFsb2cgKCkge1xuICAgICAgJG1kRGlhbG9nLmhpZGUoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWRpbmcgKGxvYWRpbmcsIHZhbHVlLCB0aW1lb3V0KSB7XG4gICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxvYWRpbmcgPSB2YWx1ZVxuICAgICAgfSwgdGltZW91dCB8fCA1MDApXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3NlbGxEaWFsb2dDb250cm9sbGVyJywgc2VsbERpYWxvZ0NvbnRyb2xsZXIpXG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIHNlbGxEaWFsb2dDb250cm9sbGVyICgkcm9vdFNjb3BlLCBwcmljZSwgcHJvZmlsZSwgZGlhbG9nLCBwYXNzU3ltYm9sLCBwYXNzQ29tcGFueSkge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLnN5bWJvbCA9IHBhc3NTeW1ib2xcbiAgICB2bS5sb2FkaW5nID0gZmFsc2VcblxuICAgIHZtLmNsb3NlRGlhbG9nID0gZGlhbG9nLmNsb3NlRGlhbG9nXG4gICAgdm0uc2hvd1RvYXN0ID0gZGlhbG9nLnNob3dUb2FzdFxuICAgIHZtLnNlbGxTdG9jayA9IHNlbGxTdG9ja1xuXG4gICAgcHJpY2UuZ2V0UHJpY2Uodm0uc3ltYm9sLCBudWxsLCBmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLnN0b2NrUHJpY2UgPSByZXNcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcHJvZmlsZS5nZXRTdG9ja0FuZEZ1bmRzKHZtLnN5bWJvbCwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0udXNlciA9IGRhdGFcbiAgICAgICAgdm0uc3RvY2tRdWFudGl0eSA9IHZtLnVzZXIuc3RvY2sucXVhbnRpdHlcbiAgICAgICAgdm0udXNlclN0b2NrUHJpY2UgPSB2bS51c2VyLnN0b2NrLnByaWNlXG4gICAgICB9XG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIHNlbGxTdG9jayAocHJpY2UsIHF1YW50aXR5KSB7XG4gICAgICB2YXIgc2VsbEFsbCA9IHZtLnVzZXIuc3RvY2sucXVhbnRpdHkgLSBxdWFudGl0eVxuICAgICAgdmFyIHByb2ZpdCA9ICh2bS5zdG9ja1ByaWNlIC0gdm0udXNlclN0b2NrUHJpY2UpICogcXVhbnRpdHlcblxuICAgICAgcHJvZmlsZS5zZWxsU3RvY2sodm0uc3ltYm9sLCBwYXNzQ29tcGFueSwgcHJpY2UsIHF1YW50aXR5LCBwcm9maXQsIHNlbGxBbGwsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlXG4gICAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2bS5jbG9zZURpYWxvZygpXG4gICAgICAgICAgdm0uc2hvd1RvYXN0KCdzb2xkJywgcXVhbnRpdHksIHZtLnN5bWJvbCwgKChwcmljZSAqIHF1YW50aXR5KS50b0ZpeGVkKDIpLnJlcGxhY2UoLyhcXGQpKD89KFxcZHszfSkrXFwuKS9nLCAnJDEsJykpKVxuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndHJhbnNhY3Rpb24nKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhdmF0YXInLCBbXSlcbiAgICAuZmFjdG9yeSgnYXZhdGFyJywgYXZhdGFyKVxuXG4gIGZ1bmN0aW9uIGF2YXRhciAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNldEF2YXRhcjogc2V0QXZhdGFyLFxuICAgICAgaW5pdGlhbHM6IGluaXRpYWxzXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0QXZhdGFyIChzdG9ja0FycmF5KSB7XG4gICAgICBzdG9ja0FycmF5LmZvckVhY2goZnVuY3Rpb24gKHN0b2NrKSB7XG4gICAgICAgIHN0b2NrLmF2YXRhciA9IGluaXRpYWxzKHN0b2NrLmNvbXBhbnkpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHN0b2NrQXJyYXlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0aWFscyAobmFtZSkge1xuICAgICAgdmFyIGluaXRpYWxzID0gbmFtZS5zcGxpdCgnICcsIDIpXG4gICAgICB2YXIgYXZhdGFyID0gJydcbiAgICAgIGluaXRpYWxzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0gPT09ICdJbmMuJykge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGF2YXRhciArPSBpdGVtWzBdXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGF2YXRhci50b1VwcGVyQ2FzZSgpXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnc2hvd1dpdGhEZWxheScsIHNob3dXaXRoRGVsYXkpXG5cbiAgLy8gQ09ERSBTT1VSQ0U6IGh0dHBzOi8vY29kZXJldmlldy5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvNjIwMDUvc2hvdy13aXRoLWRlbGF5LWRpcmVjdGl2ZVxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gc2hvd1dpdGhEZWxheSAoJHRpbWVvdXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50LCBhdHRycykge1xuICAgICAgICAkZWxlbWVudC5hZGRDbGFzcygnbmctaGlkZScpXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkZWxlbWVudC5yZW1vdmVDbGFzcygnbmctaGlkZScpXG4gICAgICAgIH0sIGF0dHJzLnNob3dXaXRoRGVsYXkgfHwgMjAwMClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgncHJpY2UnLCBbXSlcbiAgICAuZmFjdG9yeSgncHJpY2UnLCBwcmljZSlcblxuICBmdW5jdGlvbiBwcmljZSAoJGh0dHApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0UHJpY2U6IGdldFByaWNlLFxuICAgICAgZ2V0UHJpY2VzOiBnZXRQcmljZXNcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQcmljZSAoc3ltYm9sLCBtYXJrZXQsIGNiKSB7XG4gICAgICBpZiAobWFya2V0ICE9PSBudWxsKSB7XG4gICAgICAgICRodHRwXG4gICAgICAgICAgLmdldCgnL2FwaS9wcmljZS8nICsgc3ltYm9sICsgJy8nICsgbWFya2V0KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBjYihudWxsLCByZXMuZGF0YS5wcmljZS5wcmljZSlcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2IoJ0Vycm9yOiAnICsgZXJyLmRhdGEuZXJyb3IsIG51bGwpXG4gICAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRodHRwXG4gICAgICAgICAgLmdldCgnL2FwaS9wcmljZS8nICsgc3ltYm9sKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBjYihudWxsLCByZXMuZGF0YS5wcmljZS5wcmljZSlcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2IoJ0Vycm9yOiBzdGF0dXMgJyArIGVyci5zdGF0dXMsIG51bGwpXG4gICAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQcmljZXMgKHN5bWJvbHMsIGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAucG9zdCgnL2FwaS9wcmljZS9tdWx0aXBsZScsIHN5bWJvbHMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICByZXR1cm4gY2IobnVsbCwgcmVzLmRhdGEucHJpY2VzKVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIGNiKCdFcnJvcjogc3RhdHVzICcgKyBlcnIuc3RhdHVzLCBudWxsKVxuICAgICAgICB9KVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdob21lQ29udHJvbGxlcicsIGhvbWVDb250cm9sbGVyKVxuXG4gIGZ1bmN0aW9uIGhvbWVDb250cm9sbGVyICgkaHR0cCwgYXZhdGFyLCBkaWFsb2cpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5tYXJrZXRzID0gWydVUycsICdMU0UnLCAnRVVSTycsICdUTVgnLCAnSEtFJywgJ0lORElBJ11cbiAgICB2bS5sb2FkaW5nID0gZmFsc2VcblxuICAgIHZtLnNob3dTZWxsID0gZGlhbG9nLnNob3dTZWxsXG4gICAgdm0uc2hvd0J1eSA9IGRpYWxvZy5zaG93QnV5XG4gICAgdm0uZ2V0UmlzZXJzRmFsbGVycyA9IGdldFJpc2Vyc0ZhbGxlcnNcblxuICAgIGdldFJpc2Vyc0ZhbGxlcnMoJ1VTJylcblxuICAgIGZ1bmN0aW9uIGdldFJpc2Vyc0ZhbGxlcnMgKG1hcmtldCkge1xuICAgICAgdm0ubG9hZGluZyA9IHRydWVcblxuICAgICAgaWYgKHZtWydtYXJrZXRzJ10uaW5jbHVkZXMobWFya2V0KSkge1xuICAgICAgICAkaHR0cFxuICAgICAgICAgIC5nZXQoJy9hcGkvcmlzZWZhbGwvJyArIG1hcmtldClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBpZiAocmVzLmRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgICAgdm0uZXJyb3IgPSByZXMuZGF0YS5lcnJvclxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdm0uZXJyb3IgPSBudWxsXG4gICAgICAgICAgICAgIHZtLnN0b2NrcyA9IHJlcy5kYXRhLnN0b2Nrcy5zdG9ja3NcbiAgICAgICAgICAgICAgYXZhdGFyLnNldEF2YXRhcih2bS5zdG9ja3MpXG4gICAgICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS5lcnJvciA9ICdObyBzdWNoIG1hcmtldDogJyArIG1hcmtldFxuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCduZXdzQ29udHJvbGxlcicsIG5ld3NDb250cm9sbGVyKVxuXG4gIGZ1bmN0aW9uIG5ld3NDb250cm9sbGVyICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgbmV3cykge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLmdldE5ld3MgPSBnZXROZXdzXG5cbiAgICBmdW5jdGlvbiBnZXROZXdzIChzeW1ib2wpIHtcbiAgICAgIG5ld3MuZ2V0TmV3cyhzeW1ib2wsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tTmV3cyAoKSB7XG4gICAgICBuZXdzLmdldFJhbmRvbU5ld3MoZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLm5ld3MgPSBbXVxuICAgICAgICAgIHJlcy5kYXRhLm5ld3MuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0ubmV3cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbS5uZXdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdm0ubmV3cy5wdXNoKGl0ZW0ubmV3c1tpXSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgbmV3cy5zaHVmZmxlTmV3cyh2bS5uZXdzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmICgkc3RhdGUuY3VycmVudC5uYW1lID09PSAnbmV3cycpIHtcbiAgICAgIGdldFJhbmRvbU5ld3MoKVxuICAgIH0gZWxzZSB7XG4gICAgICBnZXROZXdzKCRzdGF0ZVBhcmFtcy5zeW1ib2wpXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ25ld3MnLCBbXSlcbiAgICAuZmFjdG9yeSgnbmV3cycsIG5ld3MpXG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIG5ld3MgKCRodHRwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldE5ld3M6IGdldE5ld3MsXG4gICAgICBnZXRSYW5kb21OZXdzOiBnZXRSYW5kb21OZXdzLFxuICAgICAgc2h1ZmZsZU5ld3M6IHNodWZmbGVOZXdzXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TmV3cyAoc3ltYm9sLCBjYikge1xuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS9uZXdzL3N5bWJvbC8nICsgc3ltYm9sKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzKVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY2IoZXJyLCBudWxsKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFJhbmRvbU5ld3MgKGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL25ld3MvcmFuZG9tJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGNiKG51bGwsIHJlcylcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNiKGVyciwgbnVsbClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBGaXNoZXLigJNZYXRlcyBzaHVmZmxlIGFsZ29yaXRobSBmb3IgcmFuZG9tIG5ld3MgYXJyYXlcbiAgICBmdW5jdGlvbiBzaHVmZmxlTmV3cyAoYXJyYXkpIHtcbiAgICAgIHZhciBtID0gYXJyYXkubGVuZ3RoXG4gICAgICB2YXIgdFxuICAgICAgdmFyIGlcblxuICAgICAgLy8gV2hpbGUgdGhlcmUgcmVtYWluIGVsZW1lbnRzIHRvIHNodWZmbGXigKZcbiAgICAgIHdoaWxlIChtKSB7XG4gICAgICAgIC8vIFBpY2sgYSByZW1haW5pbmcgZWxlbWVudOKAplxuICAgICAgICBpID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbS0tKVxuXG4gICAgICAgIC8vIEFuZCBzd2FwIGl0IHdpdGggdGhlIGN1cnJlbnQgZWxlbWVudC5cbiAgICAgICAgdCA9IGFycmF5W21dXG4gICAgICAgIGFycmF5W21dID0gYXJyYXlbaV1cbiAgICAgICAgYXJyYXlbaV0gPSB0XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhcnJheVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdwb3J0Zm9saW9Db250cm9sbGVyJywgcG9ydGZvbGlvQ29udHJvbGxlcilcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gcG9ydGZvbGlvQ29udHJvbGxlciAoJHNjb3BlLCAkaHR0cCwgcHJpY2UsIGRpYWxvZywgYXZhdGFyKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0uc2hvd1NlbGwgPSBkaWFsb2cuc2hvd1NlbGxcbiAgICB2bS5zaG93QnV5ID0gZGlhbG9nLnNob3dCdXlcbiAgICB2bS5nZXRQb3J0Zm9saW8gPSBnZXRQb3J0Zm9saW9cblxuICAgICRzY29wZS4kb24oJ3RyYW5zYWN0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgZ2V0UG9ydGZvbGlvKClcbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gZ2V0UG9ydGZvbGlvICgpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5nZXQoJy9hcGkvdXNlci9wb3J0Zm9saW8nKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgaWYgKHJlcy5kYXRhLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHZtLm5vUG9ydGZvbGlvID0gcmVzLmRhdGEubWVzc2FnZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2bS5wb3J0Zm9saW8gPSByZXMuZGF0YS5wb3J0Zm9saW9cbiAgICAgICAgICAgIHZtLmZ1bmRzID0gcmVzLmRhdGEuZnVuZHNcbiAgICAgICAgICAgIGdldFByaWNlcyh2bS5wb3J0Zm9saW8pXG4gICAgICAgICAgICBhdmF0YXIuc2V0QXZhdGFyKHZtLnBvcnRmb2xpbylcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UHJpY2VzIChwb3J0Zm9saW8pIHtcbiAgICAgIHZhciBzeW1ib2xzID0gW11cbiAgICAgIHBvcnRmb2xpby5mb3JFYWNoKGZ1bmN0aW9uIChzdG9jaykge1xuICAgICAgICBzeW1ib2xzLnB1c2goc3RvY2suc3ltYm9sKVxuICAgICAgfSlcbiAgICAgIHByaWNlLmdldFByaWNlcyhzeW1ib2xzLCBmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWF0Y2hQcmljZXModm0ucG9ydGZvbGlvLCByZXMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWF0Y2hQcmljZXMgKHVzZXJQb3J0Zm9saW8sIGN1cnJQcmljZXMpIHtcbiAgICAgIHVzZXJQb3J0Zm9saW8uZm9yRWFjaChmdW5jdGlvbiAodXNlclN0b2NrKSB7XG4gICAgICAgIGN1cnJQcmljZXMuZm9yRWFjaChmdW5jdGlvbiAoc3RvY2spIHtcbiAgICAgICAgICBpZiAoc3RvY2suc3ltYm9sID09PSB1c2VyU3RvY2suc3ltYm9sKSB7XG4gICAgICAgICAgICB1c2VyU3RvY2suY3VyclByaWNlID0gc3RvY2sucHJpY2VcbiAgICAgICAgICAgIHVzZXJTdG9jay5tYXJrZXQgPSBzdG9jay5tYXJrZXRcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHVzZXJQb3J0Zm9saW9cbiAgICB9XG5cbiAgICAvLyBGSVJFIFRPIFBPUFVMQVRFIERPTSBXSVRIIERBVEFcbiAgICBnZXRQb3J0Zm9saW8oKVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3Byb2ZpbGVDb250cm9sbGVyJywgcHJvZmlsZUNvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gcHJvZmlsZUNvbnRyb2xsZXIgKCRodHRwLCBwcm9maWxlKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0ucHJvZmlsZSA9IHByb2ZpbGUuZ2V0UHJvZmlsZSgpXG5cbiAgICBwcm9maWxlLmdldEZ1bmRzKGZ1bmN0aW9uIChlcnIsIGZ1bmRzKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS5mdW5kcyA9IGZ1bmRzXG4gICAgICB9XG4gICAgfSlcbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdwcm9maWxlJywgW10pXG4gICAgLmZhY3RvcnkoJ3Byb2ZpbGUnLCBwcm9maWxlKVxuXG4gIGZ1bmN0aW9uIHByb2ZpbGUgKCRodHRwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldFVzZXI6IGdldFVzZXIsXG4gICAgICBnZXRTdG9ja0FuZEZ1bmRzOiBnZXRTdG9ja0FuZEZ1bmRzLFxuICAgICAgZ2V0UHJvZmlsZTogZ2V0UHJvZmlsZSxcbiAgICAgIGdldEZ1bmRzOiBnZXRGdW5kcyxcbiAgICAgIGJ1eVN0b2NrOiBidXlTdG9jayxcbiAgICAgIHNlbGxTdG9jazogc2VsbFN0b2NrLFxuICAgICAgd2VpZ2h0ZWRBdmVyYWdlOiB3ZWlnaHRlZEF2ZXJhZ2VcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQcm9maWxlICgpIHtcbiAgICAgIHZhciB1c2VyUHJvZmlsZSA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9maWxlJykpXG5cbiAgICAgIGlmICh+dXNlclByb2ZpbGUubmFtZS5pbmRleE9mKCdAJykpIHtcbiAgICAgICAgdXNlclByb2ZpbGUubmFtZSA9IHVzZXJQcm9maWxlLm5hbWUuc3BsaXQoJ0AnKVswXVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdXNlclByb2ZpbGVcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRVc2VyIChjYikge1xuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS91c2VyLycpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBjYihyZXMuZGF0YS51c2VyKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEZ1bmRzIChjYikge1xuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS91c2VyL2Z1bmRzLycpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBjYihudWxsLCByZXMuZGF0YS5mdW5kcylcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNiKCdFcnJvcjogQ2Fubm90IGdldCBmdW5kcyEnICsgZXJyLCBudWxsKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFN0b2NrQW5kRnVuZHMgKHN5bWJvbCwgY2IpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5nZXQoJy9hcGkvdXNlci9wb3J0Zm9saW8vJyArIHN5bWJvbClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgc3RvY2s6IHJlcy5kYXRhLnN0b2NrLFxuICAgICAgICAgICAgZnVuZHM6IHJlcy5kYXRhLmZ1bmRzXG4gICAgICAgICAgfVxuICAgICAgICAgIGNiKG51bGwsIGRhdGEpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjYignRXJyb3I6IHN0YXR1cycgKyBlcnIuc3RhdHVzLCBudWxsLCBudWxsKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1eVN0b2NrIChzeW1ib2wsIGNvbXBhbnksIGF2Z1ByaWNlLCBwcmljZSwgdG90YWxRdHksIGZ1bmRzLCBleGlzdHMsIGNiKSB7XG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgc3ltYm9sOiBzeW1ib2wsXG4gICAgICAgIGNvbXBhbnk6IGNvbXBhbnksXG4gICAgICAgIHByaWNlOiBhdmdQcmljZSxcbiAgICAgICAgYnV5UHJpY2U6IHByaWNlLFxuICAgICAgICBxdWFudGl0eTogdG90YWxRdHksXG4gICAgICAgIGZ1bmRzOiBmdW5kcy50b0ZpeGVkKDMpLFxuICAgICAgICBleGlzdHM6IGV4aXN0c1xuICAgICAgfVxuXG4gICAgICAkaHR0cFxuICAgICAgICAucG9zdCgnL2FwaS91c2VyL2J1eScsIGRhdGEpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBjYihudWxsLCByZXMpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjYihlcnIsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VsbFN0b2NrIChzeW1ib2wsIGNvbXBhbnksIHNlbGxQcmljZSwgcXVhbnRpdHksIHByb2ZpdCwgc2VsbEFsbCwgY2IpIHtcbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICBzeW1ib2w6IHN5bWJvbCxcbiAgICAgICAgY29tcGFueTogY29tcGFueSxcbiAgICAgICAgc2VsbFByaWNlOiBzZWxsUHJpY2UsXG4gICAgICAgIHF1YW50aXR5OiBxdWFudGl0eSxcbiAgICAgICAgcHJvZml0OiBwcm9maXQsXG4gICAgICAgIHNlbGxBbGw6IHNlbGxBbGxcbiAgICAgIH1cblxuICAgICAgJGh0dHBcbiAgICAgICAgLnBvc3QoJ2FwaS91c2VyL3NlbGwnLCBkYXRhKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzKVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgIGNiKGVyciwgbnVsbClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB3ZWlnaHRlZEF2ZXJhZ2UgKHByZXZQcmljZSwgY3VyclByaWNlLCBwcmV2UXR5LCBjdXJyUXR5KSB7XG4gICAgICByZXR1cm4gKCgocHJldlByaWNlICogcHJldlF0eSkgKyAoY3VyclByaWNlICogY3VyclF0eSkpIC8gKHByZXZRdHkgKyBjdXJyUXR5KSkudG9GaXhlZCgzKVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdzZWFyY2hDb250cm9sbGVyJywgc2VhcmNoQ29udHJvbGxlcilcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gc2VhcmNoQ29udHJvbGxlciAoJGh0dHAsICRzdGF0ZSkge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLnF1ZXJ5U3RvY2sgPSBxdWVyeVN0b2NrXG4gICAgdm0uZ2V0RGF0YSA9IGdldERhdGFcblxuICAgIGZ1bmN0aW9uIHF1ZXJ5U3RvY2sgKHN0b2NrKSB7XG4gICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS9kYXRhL3N5bWJvbHMvJyArIHN0b2NrKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXVxuXG4gICAgICAgICAgcmVzLmRhdGEuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goaXRlbS5zeW1ib2wpXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIHJldHVybiByZXN1bHRzXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RGF0YSAoaXRlbSkge1xuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgJHN0YXRlLnRyYW5zaXRpb25Ubygnc3RvY2snLCB7c3ltYm9sOiBpdGVtfSlcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdzZWFyY2gnLCBzZWFyY2gpXG5cbiAgZnVuY3Rpb24gc2VhcmNoICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9zZWFyY2gvc2VhcmNoLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgY29udHJvbGxlcjogJ3NlYXJjaENvbnRyb2xsZXInLFxuICAgICAgY29udHJvbGxlckFzOiAnc2VhcmNoJ1xuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdzaWRlbmF2Q29udHJvbGxlcicsIHNpZGVuYXZDb250cm9sbGVyKVxuXG4gIGZ1bmN0aW9uIHNpZGVuYXZDb250cm9sbGVyICgkaHR0cCwgJHJvb3RTY29wZSwgJHNjb3BlLCAkbG9jYXRpb24sIGF1dGgsIHN0b3JlLFxuICAgIHNpZGVuYXYsIHByb2ZpbGUpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5nZXROZXdzID0gZ2V0TmV3c1xuICAgIHZtLmxvZ291dCA9IGxvZ291dFxuXG4gICAgdm0uY2xvc2VTaWRlbmF2ID0gc2lkZW5hdi5jbG9zZVNpZGVuYXZcbiAgICB2bS5hdXRoID0gYXV0aFxuXG4gICAgdm0ubWVzc2FnZSA9ICcnXG4gICAgdm0uc2lkZW5hdlNob3cgPSBmYWxzZVxuXG4gICAgLy8gS2VlcCBwcm9maWxlIGRhdGEgYW5kIHNpZGVuYXYgb3BlbiBvbiBwYWdlIHJlZnJlc2hcbiAgICAvLyBpZiB1c2VyIGlzIGxvZ2dlZCBpblxuICAgIGlmICh2bS5hdXRoLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgdm0ucHJvZmlsZSA9IHByb2ZpbGUuZ2V0UHJvZmlsZSgpXG4gICAgICB2bS5zaWRlbmF2U2hvdyA9IHRydWVcbiAgICAgIGdldEZ1bmRzKClcbiAgICB9XG5cbiAgICAkc2NvcGUuJG9uKCd1c2VyTG9nSW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2bS5wcm9maWxlID0gcHJvZmlsZS5nZXRQcm9maWxlKClcbiAgICAgIHZtLnNpZGVuYXZTaG93ID0gdHJ1ZVxuICAgICAgZ2V0RnVuZHMoKVxuICAgIH0pXG5cbiAgICAkc2NvcGUuJG9uKCd0cmFuc2FjdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGdldEZ1bmRzKClcbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gZ2V0RnVuZHMgKCkge1xuICAgICAgcHJvZmlsZS5nZXRGdW5kcyhmdW5jdGlvbiAoZXJyLCBmdW5kcykge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgICAgfVxuICAgICAgICB2bS5mdW5kcyA9IGZ1bmRzXG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE5ld3MgKCkge1xuICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL25ld3MvQUFQTCcsIHtcbiAgICAgICAgc2tpcEF1dGhvcml6YXRpb246IHRydWVcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHZtLm1lc3NhZ2UgPSByZXNwb25zZS5kYXRhLm5ld3Muc3ltYm9sXG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ291dCAoKSB7XG4gICAgICAvLyBUaGUgc2lnbm91dCBtZXRob2Qgb24gdGhlIGF1dGggc2VydmljZVxuICAgICAgLy8gc2V0cyBpc0F1dGhlbnRpY2F0ZWQgdG8gZmFsc2UgYnV0IHdlXG4gICAgICAvLyBhbHNvIG5lZWQgdG8gcmVtb3ZlIHRoZSBwcm9maWxlIGFuZFxuICAgICAgLy8gdG9rZW4gZnJvbSBsb2NhbCBzdG9yYWdlXG4gICAgICBhdXRoLnNpZ25vdXQoKVxuICAgICAgc3RvcmUucmVtb3ZlKCdwcm9maWxlJylcbiAgICAgIHN0b3JlLnJlbW92ZSgndG9rZW4nKVxuICAgICAgdm0uc2lkZW5hdlNob3cgPSBmYWxzZVxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdsb2dnZWQtaW4nKVxuICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd1c2VyTG9nT3V0JylcbiAgICAgIHZtLnVzZXJMb2dnZWQgPSBmYWxzZVxuICAgICAgJGxvY2F0aW9uLnBhdGgoJy93ZWxjb21lJylcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdzaWRlbmF2Jywgc2lkZW5hdilcblxuICBmdW5jdGlvbiBzaWRlbmF2ICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9zaWRlbmF2L3NpZGVuYXYudGVtcGxhdGUuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAnc2lkZW5hdkNvbnRyb2xsZXInLFxuICAgICAgY29udHJvbGxlckFzOiAnc2lkZW5hdidcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnc2lkZW5hdicsIFtdKVxuICAgIC5mYWN0b3J5KCdzaWRlbmF2Jywgc2lkZW5hdilcblxuICBmdW5jdGlvbiBzaWRlbmF2ICgkbWRTaWRlbmF2LCBhdXRoLCBzdG9yZSkge1xuICAgIHJldHVybiB7XG4gICAgICB0b2dnbGVTaWRlbmF2OiB0b2dnbGVTaWRlbmF2LFxuICAgICAgY2xvc2VTaWRlbmF2OiBjbG9zZVNpZGVuYXZcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVTaWRlbmF2IChpZCkge1xuICAgICAgJG1kU2lkZW5hdihpZCB8fCAnbGVmdCcpLnRvZ2dsZSgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvc2VTaWRlbmF2IChpZCkge1xuICAgICAgJG1kU2lkZW5hdihpZCB8fCAnbGVmdCcpLmNsb3NlKClcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignc3RvY2tDb250cm9sbGVyJywgc3RvY2tDb250cm9sbGVyKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBzdG9ja0NvbnRyb2xsZXIgKCRzdGF0ZVBhcmFtcywgJGh0dHAsIGRpYWxvZywgcHJpY2UsIG5ld3MsIGF2YXRhcikge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuXG4gICAgdm0uc2hvd0J1eSA9IGRpYWxvZy5zaG93QnV5XG4gICAgdm0uc2hvd1NlbGwgPSBkaWFsb2cuc2hvd1NlbGxcblxuICAgIGZ1bmN0aW9uIGdldERhdGEgKCkge1xuICAgICAgdm0ubG9hZGluZyA9IHRydWVcblxuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS9kYXRhL3N5bWJvbC8nICsgJHN0YXRlUGFyYW1zLnN5bWJvbCArICcvJyArICRzdGF0ZVBhcmFtcy5tYXJrZXQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBpZiAocmVzLmRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgIHZtLm5vQ29tcGFueSA9IHJlcy5kYXRhLmVycm9yXG4gICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdm0uY29tcGFueSA9IHJlcy5kYXRhLmRhdGFcblxuICAgICAgICAgICAgcHJpY2UuZ2V0UHJpY2UoJHN0YXRlUGFyYW1zLnN5bWJvbCwgJHN0YXRlUGFyYW1zLm1hcmtldCB8fCB2bS5jb21wYW55Lm1hcmtldCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZtLnByaWNlID0gcmVzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIG5ld3MuZ2V0TmV3cygkc3RhdGVQYXJhbXMuc3ltYm9sLCBmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHZtLm5ld3NFcnJvciA9ICdFcnJvciBnZXR0aW5nIG5ld3MnXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIHZtLm5ld3MgPSByZXMuZGF0YS5uZXdzLm5ld3NcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgIHZtLm5ld3NFcnJvciA9IGVyclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHZtLmF2YXRhciA9IGF2YXRhci5pbml0aWFscyh2bS5jb21wYW55LmNvbXBhbnkgfHwgJHN0YXRlUGFyYW1zLnN5bWJvbClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0RGF0YSgpXG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcigndG9vbGJhckNvbnRyb2xsZXInLCB0b29sYmFyQ29udHJvbGxlcilcblxuICBmdW5jdGlvbiB0b29sYmFyQ29udHJvbGxlciAoYXV0aCwgc3RvcmUsICRsb2NhdGlvbiwgJHNjb3BlLCAkcm9vdFNjb3BlLCAkaHR0cCwgc2lkZW5hdikge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLmxvZ2luID0gbG9naW5cblxuICAgIHZtLmF1dGggPSBhdXRoXG4gICAgdm0udG9nZ2xlU2lkZW5hdiA9IHNpZGVuYXYudG9nZ2xlU2lkZW5hdlxuICAgIHZtLnVzZXJMb2dnZWQgPSBmYWxzZVxuXG4gICAgaWYgKGF1dGguaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICB2bS51c2VyTG9nZ2VkID0gdHJ1ZVxuICAgIH1cblxuICAgICRzY29wZS4kb24oJ3VzZXJMb2dPdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2bS51c2VyTG9nZ2VkID0gZmFsc2VcbiAgICB9KVxuXG4gICAgJHNjb3BlLiRvbigndXNlckxvZ0luJywgZnVuY3Rpb24gKCkge1xuICAgICAgdm0udXNlckxvZ2dlZCA9IHRydWVcbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gbG9naW4gKCkge1xuICAgICAgLy8gVGhlIGF1dGggc2VydmljZSBoYXMgYSBzaWduaW4gbWV0aG9kIHRoYXRcbiAgICAgIC8vIG1ha2VzIHVzZSBvZiBBdXRoMExvY2suIElmIGF1dGhlbnRpY2F0aW9uXG4gICAgICAvLyBpcyBzdWNjZXNzZnVsLCB0aGUgdXNlcidzIHByb2ZpbGUgYW5kIHRva2VuXG4gICAgICAvLyBhcmUgc2F2ZWQgaW4gbG9jYWwgc3RvcmFnZSB3aXRoIHRoZSBzdG9yZSBzZXJ2aWNlXG4gICAgICBhdXRoLnNpZ25pbih7XG4gICAgICAgIGF1dGhQYXJhbXM6IHtcbiAgICAgICAgICBzY29wZTogJ29wZW5pZCBlbWFpbCdcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKHByb2ZpbGUsIHRva2VuKSB7XG4gICAgICAgIHN0b3JlLnNldCgncHJvZmlsZScsIHByb2ZpbGUpXG4gICAgICAgIHN0b3JlLnNldCgndG9rZW4nLCB0b2tlbilcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy93ZWxjb21lJylcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdsb2dnZWQtaW4nKVxuICAgICAgICB2bS51c2VyTG9nZ2VkID0gdHJ1ZVxuICAgICAgICB1c2VyQWNjb3VudChmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgdm0ubWVzc2FnZSA9IHJlcy5kYXRhLm1lc3NhZ2VcbiAgICAgICAgICB2bS5mdW5kcyA9IHJlcy5kYXRhLnVzZXIuZnVuZHNcbiAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3VzZXJMb2dJbicpXG4gICAgICAgIH0pXG4gICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVzZXJBY2NvdW50IChjYikge1xuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnYXBpL3VzZXIvJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGNiKHJlcylcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB2bS5mZWF0dXJlcyA9IFtcbiAgICAgICckMTAwLDAwMCBzdGFydGluZyBmdW5kcycsXG4gICAgICAnUmVhbC10aW1lIHN0b2NrIHByaWNlcycsXG4gICAgICAnU2l4IGludGVybmF0aW9uYWwgc3RvY2sgbWFya2V0cycsXG4gICAgICAnU3RvY2sgcmlzZXJzIGFuZCBmYWxsZXJzJyxcbiAgICAgICdEYWlseSBuZXdzIGZvciBtYXJrZXQgY29tcGFuaWVzJyxcbiAgICAgICdVcC10by1kYXRlIGNvbXBhbnkgZGF0YScsXG4gICAgICAnVXNlci1mcmllbmRseSBpbnRlcmZhY2UnXG4gICAgXVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgndG9vbGJhcicsIHRvb2xiYXIpXG5cbiAgZnVuY3Rpb24gdG9vbGJhciAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvdG9vbGJhci90b29sYmFyLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgY29udHJvbGxlcjogJ3Rvb2xiYXJDb250cm9sbGVyJyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3Rvb2xiYXInXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3RyYW5zYWN0aW9uc0NvbnRyb2xsZXInLCB0cmFuc2FjdGlvbnNDb250cm9sbGVyKVxuXG4gIGZ1bmN0aW9uIHRyYW5zYWN0aW9uc0NvbnRyb2xsZXIgKCRodHRwLCBhdmF0YXIpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICBmdW5jdGlvbiBnZXRUcmFuc2FjdGlvbnMgKCkge1xuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS90cmFuc2FjdGlvbi9hbGwnKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgaWYgKHJlcy5kYXRhLmVycm9yKSB7XG4gICAgICAgICAgICB2bS5ub1RyYW5zYWN0aW9ucyA9IHJlcy5kYXRhLmVycm9yXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZtLnRyYW5zYWN0aW9ucyA9IHJlcy5kYXRhLnRyYW5zYWN0aW9uc1xuICAgICAgICAgICAgYXZhdGFyLnNldEF2YXRhcih2bS50cmFuc2FjdGlvbnMpXG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBnZXRUcmFuc2FjdGlvbnMoKVxuICB9XG59KSgpXG4iXX0=
