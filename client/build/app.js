!function(){"use strict";angular.module("app",["auth0","angular-storage","angular-jwt","ngMaterial","ui.router","ngLetterAvatar","sidenav","profile","price","news","avatar"])}(),function(){"use strict";function t(t,o,e,n,r,a,l){function i(t,o,e,n,r){var a;return e(function(){a=o.get("auth")}),{responseError:function(o){return 401===o.status&&(a.signout(),n.remove("profile"),n.remove("token"),r.path("/welcome")),t.reject(o)}}}i.$inject=["$q","$injector","$timeout","store","$location"],e.init({domain:"danielnitu.eu.auth0.com",clientID:"1gLOvetcrjC9GW2kEeRzEtJRJH700ia6"}),n.otherwise("/welcome"),r.state("welcome",{url:"/welcome",templateUrl:"app/components/welcome/welcome.template.html",controller:"toolbarController as toolbar"}).state("about",{url:"/about",templateUrl:"app/components/about/about.template.html"}).state("home",{url:"/home",templateUrl:"app/components/home/home.template.html",controller:"homeController as home"}).state("profile",{url:"/profile",templateUrl:"app/components/profile/profile.template.html",controller:"profileController as profile"}).state("portfolio",{url:"/portfolio",templateUrl:"app/components/portfolio/portfolio.template.html",controller:"portfolioController as portfolio"}).state("stock",{url:"/stock/:symbol/:market",templateUrl:"app/components/stock/stock.template.html",controller:"stockController as stock"}).state("news",{url:"/news/:symbol",templateUrl:"app/components/news/news.template.html",controller:"newsController as news"}).state("transactions",{url:"/transactions",templateUrl:"app/components/transactions/transactions.template.html",controller:"transactionsController as transactions"}),l.config({tokenGetter:["options",function(t){return".html"===t.url.substr(t.url.length-5)?null:window.localStorage.getItem("token").slice(1,-1)}],whiteListedDomains:["trade.boutique","localhost","jsonplaceholder.typicode.com"]}),t.theme("default").primaryPalette("blue").accentPalette("grey").warnPalette("red"),t.theme("dark-blue").backgroundPalette("blue").dark(),o.factory("redirect",i),a.interceptors.push("jwtInterceptor"),a.interceptors.push("redirect")}t.$inject=["$mdThemingProvider","$provide","authProvider","$urlRouterProvider","$stateProvider","$httpProvider","jwtOptionsProvider"],angular.module("app").config(t)}(),function(){"use strict";function t(t,o,e,n,r,a){t.$on("$locationChangeStart",function(){var t=n.get("token");t&&(r.isTokenExpired(t)||e.isAuthenticated||(document.body.classList.add("logged-in"),e.authenticate(n.get("profile"),t))),e.isAuthenticated||a.path("/welcome")})}t.$inject=["$rootScope","$state","auth","store","jwtHelper","$location"],angular.module("app").run(t)}(),function(){"use strict";function t(t,o,e,n,r,a,l){function i(o,e){n.loading(s.loading,!0),s.buyQuantity=e,s.buyPrice=(e*o).toFixed(2);var a=s.user.stock.quantity,l=r.weightedAverage(s.user.stock.price,o,a,e),i=s.user.stock.quantity+e,c=s.user.funds-(o*e).toFixed(2);r.buyStock(s.symbol,s.company,l,o,i,c,a,function(o,e){n.loading(s.loading,!1),t.$broadcast("transaction"),o?s.error=o:(s.closeDialog(),s.showToast("bought",s.buyQuantity,s.symbol,s.buyPrice.replace(/(\d)(?=(\d{3})+\.)/g,"$1,")))})}var s=this;s.stockQuantity=1,s.buyQuantity=0,s.buyPrice=0,s.symbol=a,s.company=l,s.loading=!1,s.closeDialog=n.closeDialog,s.showToast=n.showToast,s.buyStock=i,e.getPrice(s.symbol,null,function(t,o){t?s.error=t:s.stockPrice=o.price}),r.getStockAndFunds(s.symbol,function(t,o){t?s.error=t:s.user=o})}t.$inject=["$rootScope","$mdDialog","price","dialog","profile","passSymbol","passCompany"],angular.module("app").controller("buyDialogController",t)}(),function(){"use strict";function t(t,o,e){function n(o,e,n){t.show({locals:{passSymbol:e,passCompany:n},controller:"buyDialogController",controllerAs:"buyDialog",templateUrl:"app/components/dialog/buyDialog.template.html",parent:angular.element(document.body),targetEvent:o,clickOutsideToClose:!0,focusOnOpen:!1})}function r(o,e,n){t.show({locals:{passSymbol:e,passCompany:n},controller:"sellDialogController",controllerAs:"sellDialog",templateUrl:"app/components/dialog/sellDialog.template.html",parent:angular.element(document.body),targetEvent:o,clickOutsideToClose:!0,focusOnOpen:!1})}function a(t,e,n,r){o.show(o.simple().textContent("You "+t+" "+e+" "+n+" shares for $"+r).position("bottom right").hideDelay(5e3).toastClass("bs-toast"))}function l(){t.hide()}function i(t,o,n){e(function(){t=o},n||500)}return{showBuy:n,showSell:r,closeDialog:l,showToast:a,loading:i}}t.$inject=["$mdDialog","$mdToast","$timeout"],angular.module("app").factory("dialog",t)}(),function(){"use strict";function t(t,o,e,n,r,a){function l(o,n){var r=i.user.stock.quantity-n,l=(i.stockPrice-i.userStockPrice)*n;e.sellStock(i.symbol,a,o,n,l,r,function(e,r){e?(i.loading=!1,i.error=e):(i.closeDialog(),i.showToast("sold",n,i.symbol,(o*n).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")),t.$broadcast("transaction"))})}var i=this;i.symbol=r,i.loading=!1,i.closeDialog=n.closeDialog,i.showToast=n.showToast,i.sellStock=l,o.getPrice(i.symbol,null,function(t,o){t?i.error=t:i.stockPrice=o.price}),e.getStockAndFunds(i.symbol,function(t,o){t?i.error=t:(i.user=o,i.stockQuantity=i.user.stock.quantity,i.userStockPrice=i.user.stock.price)})}t.$inject=["$rootScope","price","profile","dialog","passSymbol","passCompany"],angular.module("app").controller("sellDialogController",t)}(),function(){"use strict";function t(){function t(t){return t.forEach(function(t){t.avatar=o(t.company)}),t}function o(t){var o=t.split(" ",2),e="";return o.forEach(function(t){"Inc."!==t&&(e+=t[0])}),e.toUpperCase()}return{setAvatar:t,initials:o}}angular.module("avatar",[]).factory("avatar",t)}(),function(){"use strict";function t(t){return{restrict:"A",link:function(o,e,n){e.addClass("ng-hide"),t(function(){e.removeClass("ng-hide")},n.showWithDelay||2e3)}}}t.$inject=["$timeout"],angular.module("app").directive("showWithDelay",t)}(),function(){"use strict";function t(t){function o(o,e,n){null!==e?t.get("/api/price/"+o+"/"+e).then(function(t){return n(null,t.data.price)},function(t){return n("Error: "+t.data.error,null)}):t.get("/api/price/"+o).then(function(t){return n(null,t.data.price)},function(t){return n("Error: status "+t.status,null)})}function e(o,e){t.post("/api/price/multiple",o).then(function(t){return e(null,t.data.prices)},function(t){return e("Error: status "+t.status,null)})}return{getPrice:o,getPrices:e}}t.$inject=["$http"],angular.module("price",[]).factory("price",t)}(),function(){"use strict";function t(t,o){var e=this;e.profile=o.getProfile(),o.getFunds(function(t,o){t?e.error=t:e.funds=o})}t.$inject=["$http","profile"],angular.module("app").controller("profileController",t)}(),function(){"use strict";function t(t){function o(){var t=JSON.parse(window.localStorage.getItem("profile"));return~t.name.indexOf("@")&&(t.name=t.name.split("@")[0]),t}function e(o){t.get("/api/user/").then(function(t){o(t.data.user)})}function n(o){t.get("/api/user/funds/").then(function(t){o(null,t.data.funds)},function(t){o("Error: Cannot get funds!"+t,null)})}function r(o,e){t.get("/api/user/portfolio/"+o).then(function(t){var o={stock:t.data.stock,funds:t.data.funds};e(null,o)},function(t){e("Error: status"+t.status,null,null)})}function a(o,e,n,r,a,l,i,s){var c={symbol:o,company:e,price:n,buyPrice:r,quantity:a,funds:l.toFixed(3),exists:i};t.post("/api/user/buy",c).then(function(t){s(null,t)},function(t){s(t,null)})}function l(o,e,n,r,a,l,i){var s={symbol:o,company:e,sellPrice:n,quantity:r,profit:a,sellAll:l};t.post("api/user/sell",s).then(function(t){i(null,t)},function(t){console.log(t),i(t,null)})}function i(t,o,e,n){return((t*e+o*n)/(e+n)).toFixed(3)}return{getUser:e,getStockAndFunds:r,getProfile:o,getFunds:n,buyStock:a,sellStock:l,weightedAverage:i}}t.$inject=["$http"],angular.module("profile",[]).factory("profile",t)}(),function(){"use strict";function t(t,o){function e(o){return t.get("/api/data/symbols/"+o).then(function(t){var o=[];return t.data.data.forEach(function(t){o.push(t.symbol)}),o})}function n(t){if(!t)return!1;o.transitionTo("stock",{symbol:t})}var r=this;r.queryStock=e,r.getData=n}t.$inject=["$http","$state"],angular.module("app").controller("searchController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/search/search.template.html",controller:"searchController",controllerAs:"search"}}angular.module("app").directive("search",t)}(),function(){"use strict";function t(t,o,e){function n(t){e.getNews(t,function(t,o){t?r.error=t:console.log(o)})}var r=this;r.getNews=n,"news"===t.current.name?function(){e.getRandomNews(function(t,o){t?r.error=t:(r.news=[],o.data.news.forEach(function(t){if(t.news.length>1)for(var o=0;o<t.news.length;o++)r.news.push(t.news[o])}),e.shuffleNews(r.news))})}():n(o.symbol)}t.$inject=["$state","$stateParams","news"],angular.module("app").controller("newsController",t)}(),function(){"use strict";function t(t){function o(o,e){t.get("/api/news/symbol/"+o).then(function(t){e(null,t)},function(t){e(t,null)})}function e(o){t.get("/api/news/random").then(function(t){o(null,t)},function(t){o(t,null)})}function n(t){for(var o,e,n=t.length;n;)e=Math.floor(Math.random()*n--),o=t[n],t[n]=t[e],t[e]=o;return t}return{getNews:o,getRandomNews:e,shuffleNews:n}}t.$inject=["$http"],angular.module("news",[]).factory("news",t)}(),function(){"use strict";function t(t,o,e,n,r,a,l,i,s){function c(){s.getFunds(function(t,o){t&&(f.error=t),f.funds=o})}function u(){t.get("http://localhost:3000/api/news/AAPL",{skipAuthorization:!0}).then(function(t){f.message=t.data.news.symbol})}function p(){a.signout(),l.remove("profile"),l.remove("token"),f.sidenavShow=!1,document.body.classList.remove("logged-in"),o.$broadcast("userLogOut"),f.userLogged=!1,r.path("/welcome")}var f=this;f.getNews=u,f.logout=p,f.closeSidenav=i.closeSidenav,f.auth=a,f.message="",f.sidenavShow=!1,f.auth.isAuthenticated&&(f.profile=s.getProfile(),f.sidenavShow=!0,c()),e.$on("userLogIn",function(){f.profile=s.getProfile(),f.sidenavShow=!0,c()}),e.$on("transaction",function(){c()})}t.$inject=["$http","$rootScope","$scope","$timeout","$location","auth","store","sidenav","profile"],angular.module("app").controller("sidenavController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/sidenav/sidenav.template.html",controller:"sidenavController",controllerAs:"sidenav"}}angular.module("app").directive("sidenav",t)}(),function(){"use strict";function t(t,o,e){function n(o){t(o||"left").toggle()}function r(o){t(o||"left").close()}return{toggleSidenav:n,closeSidenav:r}}t.$inject=["$mdSidenav","auth","store"],angular.module("sidenav",[]).factory("sidenav",t)}(),function(){"use strict";function t(t,o,e){function n(e){r.loading=!0,r.markets.includes(e)?t.get("/api/risefall/"+e).then(function(t){t.data.error?r.error=t.data.error:(r.error=null,r.stocks=t.data.stocks.stocks,o.setAvatar(r.stocks),r.loading=!1,!1===t.data.stocks.newData&&(r.message="External API not available at this moment. Showing data older than 1 hour."))}):r.error="No such market: "+e}var r=this;r.markets=["US","LSE","EURO","TMX","HKE","INDIA"],r.loading=!1,r.showSell=e.showSell,r.showBuy=e.showBuy,r.getRisersFallers=n,n("US")}t.$inject=["$http","avatar","dialog"],angular.module("app").controller("homeController",t)}(),function(){"use strict";function t(t,o,e,n,r,a){function l(){e.get("/api/user/portfolio").then(function(t){t.data.message?c.noPortfolio=t.data.message:(c.portfolio=t.data.portfolio,c.funds=t.data.funds,i(c.portfolio),a.setAvatar(c.portfolio))})}function i(t){var o=[];t.forEach(function(t){o.push(t.symbol)}),n.getPrices(o,function(t,o){t?c.error=t:s(c.portfolio,o)})}function s(t,o){return t.forEach(function(t){o.forEach(function(o){o.symbol===t.symbol&&(t.updatedAt=o.updatedAt,t.currPrice=o.price,t.market=o.market)})}),t}var c=this;c.showSell=r.showSell,c.showBuy=r.showBuy,c.getPortfolio=l,c.portfolio=null,t.$on("transaction",function(){l()});var u;t.$on("$destroy",function(){o.cancel(u),u=void 0}),l(),function(){u=o(function(){i(c.portfolio),console.log("Update of portfolio prices")},3e5,10)}()}t.$inject=["$scope","$interval","$http","price","dialog","avatar"],angular.module("app").controller("portfolioController",t)}(),function(){"use strict";function t(t,o,e,n,r,a,l,i){var s=this;s.loading=!1,s.showBuy=r.showBuy,s.showSell=r.showSell;var c;o.$on("$destroy",function(){t.cancel(c),c=void 0}),function(){s.loading=!0,n.get("/api/data/symbol/"+e.symbol+"/"+e.market).then(function(t){t.data.error?(s.noCompany=t.data.error,s.loading=!1):(s.company=t.data.data,!1===s.company.newData&&(s.oldData="External API not available at this moment. Showing symbol data older than 1 day."),a.getPrice(e.symbol,e.market||s.company.market,function(t,o){t?s.error=t:(s.price=o.price,s.updatedAt=o.updatedAt)}),l.getNews(e.symbol,function(t,o){if(t)s.newsError="Error getting news";else try{s.news=o.data.news.news}catch(t){s.newsError=t}s.loading=!1}),s.avatar=i.initials(s.company.company||e.symbol))})}(),function(){c=t(function(){a.getPrice(e.symbol,e.market||s.company.market,function(t,o){t?s.error=t:(s.price=o,console.log("Price updated for "+e.symbol+" / "+e.market||s.company.market))})},3e5,10)}()}t.$inject=["$interval","$scope","$stateParams","$http","dialog","price","news","avatar"],angular.module("app").controller("stockController",t)}(),function(){"use strict";function t(t,o,e,n,r,a,l){function i(){t.signin({authParams:{scope:"openid email"}},function(t,n){o.set("profile",t),o.set("token",n),e.path("/welcome"),document.body.classList.add("logged-in"),s(function(t){c.message=t.data.message,c.funds=t.data.user.funds,c.userLogged=!0,r.$broadcast("userLogIn")})},function(t){console.log(t)})}function s(t){a.get("api/user/").then(function(o){t(o)})}var c=this;c.login=i,c.auth=t,c.toggleSidenav=l.toggleSidenav,c.userLogged=!1,t.isAuthenticated&&(c.userLogged=!0),n.$on("userLogOut",function(){c.userLogged=!1}),n.$on("userLogIn",function(){c.userLogged=!0}),c.features=["$100,000 starting funds","Real-time stock prices","Six international stock markets","Stock risers and fallers","Daily news for market companies","Up-to-date company data","User-friendly interface"]}t.$inject=["auth","store","$location","$scope","$rootScope","$http","sidenav"],angular.module("app").controller("toolbarController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/toolbar/toolbar.template.html",controller:"toolbarController",controllerAs:"toolbar"}}angular.module("app").directive("toolbar",t)}(),function(){"use strict";function t(t,o){var e=this;!function(){t.get("/api/transaction/all").then(function(t){t.data.error?e.noTransactions=t.data.error:(e.transactions=t.data.transactions,o.setAvatar(e.transactions))},function(t){e.error=t})}()}t.$inject=["$http","avatar"],angular.module("app").controller("transactionsController",t)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFwcC5jb25maWcuanMiLCJhcHAucnVuLmpzIiwiZGlhbG9nL2J1eURpYWxvZy5jb250cm9sbGVyLmpzIiwiZGlhbG9nL2RpYWxvZy5zZXJ2aWNlLmpzIiwiZGlhbG9nL3NlbGxEaWFsb2cuY29udHJvbGxlci5qcyIsImhlbHBlcnMvYXZhdGFyLnNlcnZpY2UuanMiLCJoZWxwZXJzL2RlbGF5LmRpcmVjdGl2ZS5qcyIsImhlbHBlcnMvcHJpY2Uuc2VydmljZS5qcyIsInByb2ZpbGUvcHJvZmlsZS5jb250cm9sbGVyLmpzIiwicHJvZmlsZS9wcm9maWxlLnNlcnZpY2UuanMiLCJzZWFyY2gvc2VhcmNoLmNvbnRyb2xsZXIuanMiLCJzZWFyY2gvc2VhcmNoLmRpcmVjdGl2ZS5qcyIsIm5ld3MvbmV3cy5jb250cm9sbGVyLmpzIiwibmV3cy9uZXdzLnNlcnZpY2UuanMiLCJzaWRlbmF2L3NpZGVuYXYuY29udHJvbGxlci5qcyIsInNpZGVuYXYvc2lkZW5hdi5kaXJlY3RpdmUuanMiLCJzaWRlbmF2L3NpZGVuYXYuc2VydmljZS5qcyIsImhvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwicG9ydGZvbGlvL3BvcnRmb2xpby5jb250cm9sbGVyLmpzIiwic3RvY2svc3RvY2suY29udHJvbGxlci5qcyIsInRvb2xiYXIvdG9vbGJhci5jb250cm9sbGVyLmpzIiwidG9vbGJhci90b29sYmFyLmRpcmVjdGl2ZS5qcyIsInRyYW5zYWN0aW9ucy90cmFuc2FjdGlvbnMuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJHByb3ZpZGUiLCJhdXRoUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJyZWRpcmVjdCIsIiRxIiwiJGluamVjdG9yIiwiJHRpbWVvdXQiLCJzdG9yZSIsIiRsb2NhdGlvbiIsImF1dGgiLCJnZXQiLCJyZXNwb25zZUVycm9yIiwicmVqZWN0aW9uIiwic3RhdHVzIiwic2lnbm91dCIsInJlbW92ZSIsInBhdGgiLCJyZWplY3QiLCJpbml0IiwiZG9tYWluIiwiY2xpZW50SUQiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImp3dE9wdGlvbnNQcm92aWRlciIsInRva2VuR2V0dGVyIiwib3B0aW9ucyIsInN1YnN0ciIsImxlbmd0aCIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzbGljZSIsIndoaXRlTGlzdGVkRG9tYWlucyIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsImRhcmsiLCJmYWN0b3J5IiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInJ1biIsIiRyb290U2NvcGUiLCIkc3RhdGUiLCJqd3RIZWxwZXIiLCIkb24iLCJ0b2tlbiIsImlzVG9rZW5FeHBpcmVkIiwiaXNBdXRoZW50aWNhdGVkIiwiZG9jdW1lbnQiLCJib2R5IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXV0aGVudGljYXRlIiwiYnV5RGlhbG9nQ29udHJvbGxlciIsIiRtZERpYWxvZyIsInByaWNlIiwiZGlhbG9nIiwicHJvZmlsZSIsInBhc3NTeW1ib2wiLCJwYXNzQ29tcGFueSIsImJ1eVN0b2NrIiwicXVhbnRpdHkiLCJsb2FkaW5nIiwidm0iLCJidXlRdWFudGl0eSIsImJ1eVByaWNlIiwidG9GaXhlZCIsImN1cnJRdHkiLCJ1c2VyIiwic3RvY2siLCJhdmdQcmljZSIsIndlaWdodGVkQXZlcmFnZSIsInRvdGFsUXR5IiwiZnVuZHMiLCJzeW1ib2wiLCJjb21wYW55IiwiZXJyIiwicmVzIiwiJGJyb2FkY2FzdCIsImVycm9yIiwiY2xvc2VEaWFsb2ciLCJzaG93VG9hc3QiLCJyZXBsYWNlIiwidGhpcyIsInN0b2NrUXVhbnRpdHkiLCJnZXRQcmljZSIsInN0b2NrUHJpY2UiLCJnZXRTdG9ja0FuZEZ1bmRzIiwiZGF0YSIsIiRtZFRvYXN0Iiwic2hvd0J1eSIsIiRldmVudCIsInNob3ciLCJsb2NhbHMiLCJjb250cm9sbGVyQXMiLCJwYXJlbnQiLCJlbGVtZW50IiwidGFyZ2V0RXZlbnQiLCJjbGlja091dHNpZGVUb0Nsb3NlIiwiZm9jdXNPbk9wZW4iLCJzaG93U2VsbCIsImFjdGlvbiIsInNpbXBsZSIsInRleHRDb250ZW50IiwicG9zaXRpb24iLCJoaWRlRGVsYXkiLCJ0b2FzdENsYXNzIiwiaGlkZSIsInZhbHVlIiwidGltZW91dCIsInNlbGxEaWFsb2dDb250cm9sbGVyIiwic2VsbFN0b2NrIiwic2VsbEFsbCIsInByb2ZpdCIsInVzZXJTdG9ja1ByaWNlIiwiYXZhdGFyIiwic2V0QXZhdGFyIiwic3RvY2tBcnJheSIsImZvckVhY2giLCJpbml0aWFscyIsIm5hbWUiLCJzcGxpdCIsIml0ZW0iLCJ0b1VwcGVyQ2FzZSIsInNob3dXaXRoRGVsYXkiLCJyZXN0cmljdCIsImxpbmsiLCIkc2NvcGUiLCIkZWxlbWVudCIsImF0dHJzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImRpcmVjdGl2ZSIsIiRodHRwIiwibWFya2V0IiwiY2IiLCJ0aGVuIiwiZ2V0UHJpY2VzIiwic3ltYm9scyIsInBvc3QiLCJwcmljZXMiLCJwcm9maWxlQ29udHJvbGxlciIsImdldFByb2ZpbGUiLCJnZXRGdW5kcyIsInVzZXJQcm9maWxlIiwiSlNPTiIsInBhcnNlIiwiaW5kZXhPZiIsImdldFVzZXIiLCJleGlzdHMiLCJzZWxsUHJpY2UiLCJjb25zb2xlIiwibG9nIiwicHJldlByaWNlIiwiY3VyclByaWNlIiwicHJldlF0eSIsInNlYXJjaENvbnRyb2xsZXIiLCJxdWVyeVN0b2NrIiwicmVzdWx0cyIsImdldERhdGEiLCJ0cmFuc2l0aW9uVG8iLCJzZWFyY2giLCJuZXdzQ29udHJvbGxlciIsIiRzdGF0ZVBhcmFtcyIsIm5ld3MiLCJnZXROZXdzIiwiY3VycmVudCIsImdldFJhbmRvbU5ld3MiLCJpIiwic2h1ZmZsZU5ld3MiLCJhcnJheSIsInQiLCJtIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic2lkZW5hdkNvbnRyb2xsZXIiLCJzaWRlbmF2Iiwic2tpcEF1dGhvcml6YXRpb24iLCJyZXNwb25zZSIsIm1lc3NhZ2UiLCJsb2dvdXQiLCJzaWRlbmF2U2hvdyIsInVzZXJMb2dnZWQiLCJjbG9zZVNpZGVuYXYiLCIkbWRTaWRlbmF2IiwidG9nZ2xlU2lkZW5hdiIsImlkIiwidG9nZ2xlIiwiY2xvc2UiLCJob21lQ29udHJvbGxlciIsImdldFJpc2Vyc0ZhbGxlcnMiLCJpbmNsdWRlcyIsInN0b2NrcyIsIm5ld0RhdGEiLCJtYXJrZXRzIiwicG9ydGZvbGlvQ29udHJvbGxlciIsIiRpbnRlcnZhbCIsImdldFBvcnRmb2xpbyIsIm5vUG9ydGZvbGlvIiwicG9ydGZvbGlvIiwibWF0Y2hQcmljZXMiLCJ1c2VyUG9ydGZvbGlvIiwiY3VyclByaWNlcyIsInVzZXJTdG9jayIsInVwZGF0ZWRBdCIsInVwZGF0ZVByaWNlIiwiY2FuY2VsIiwidW5kZWZpbmVkIiwic3RvY2tDb250cm9sbGVyIiwibm9Db21wYW55Iiwib2xkRGF0YSIsIm5ld3NFcnJvciIsInRvb2xiYXJDb250cm9sbGVyIiwibG9naW4iLCJzaWduaW4iLCJhdXRoUGFyYW1zIiwic2NvcGUiLCJzZXQiLCJ1c2VyQWNjb3VudCIsImZlYXR1cmVzIiwidG9vbGJhciIsInRyYW5zYWN0aW9uc0NvbnRyb2xsZXIiLCJub1RyYW5zYWN0aW9ucyIsInRyYW5zYWN0aW9ucyJdLCJtYXBwaW5ncyI6IkNBR0EsV0FDQSxZQUdBQSxTQUNBQyxPQUFBLE9BQ0EsUUFBQSxrQkFBQSxjQUFBLGFBQUEsWUFBQSxpQkFDQSxVQUFBLFVBQUEsUUFBQSxPQUFBLGNDVkEsV0FDQSxZQU9BLFNBQUFDLEdBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEtBc0VBLFFBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdB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QUFDLEdBQUF6RixFQUFBbEIsR0FDQSxHQUFBcEQsR0FBQW9CLE1BRUEsV0FDQWtELEVBQ0FoSSxJQUFBLHdCQUNBbUksS0FBQSxTQUFBM0QsR0FDQUEsRUFBQVcsS0FBQVQsTUFDQWhCLEVBQUFnSyxlQUFBbEosRUFBQVcsS0FBQVQsT0FFQWhCLEVBQUFpSyxhQUFBbkosRUFBQVcsS0FBQXdJLGFBQ0E3RyxFQUFBQyxVQUFBckQsRUFBQWlLLGdCQUVBLFNBQUFwSixHQUNBYixFQUFBZ0IsTUFBQUgsb0NBbEJBdkYsUUFDQUMsT0FBQSxPQUNBOEIsV0FBQSx5QkFBQTBNIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5UcmFkZSBCb3V0aXF1ZSAgQ29weXJpZ2h0IChDKSAyMDE3ICBEYW5pZWwgTml0dVxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcsIFtcbiAgICAgICdhdXRoMCcsICdhbmd1bGFyLXN0b3JhZ2UnLCAnYW5ndWxhci1qd3QnLCAnbmdNYXRlcmlhbCcsICd1aS5yb3V0ZXInLCAnbmdMZXR0ZXJBdmF0YXInLFxuICAgICAgJ3NpZGVuYXYnLCAncHJvZmlsZScsICdwcmljZScsICduZXdzJywgJ2F2YXRhciddKVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb25maWcoY29uZmlnKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBjb25maWcgKFxuICAgICRtZFRoZW1pbmdQcm92aWRlcixcbiAgICAkcHJvdmlkZSxcbiAgICBhdXRoUHJvdmlkZXIsXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLFxuICAgICRzdGF0ZVByb3ZpZGVyLFxuICAgICRodHRwUHJvdmlkZXIsXG4gICAgand0T3B0aW9uc1Byb3ZpZGVyKSB7XG4gICAgYXV0aFByb3ZpZGVyLmluaXQoe1xuICAgICAgZG9tYWluOiAnZGFuaWVsbml0dS5ldS5hdXRoMC5jb20nLFxuICAgICAgY2xpZW50SUQ6ICcxZ0xPdmV0Y3JqQzlHVzJrRWVSekV0SlJKSDcwMGlhNidcbiAgICB9KVxuXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL3dlbGNvbWUnKVxuXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgIC5zdGF0ZSgnd2VsY29tZScsIHtcbiAgICAgICAgdXJsOiAnL3dlbGNvbWUnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3dlbGNvbWUvd2VsY29tZS50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ3Rvb2xiYXJDb250cm9sbGVyIGFzIHRvb2xiYXInXG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdhYm91dCcsIHtcbiAgICAgICAgdXJsOiAnL2Fib3V0JyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9hYm91dC9hYm91dC50ZW1wbGF0ZS5odG1sJ1xuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgdXJsOiAnL2hvbWUnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL2hvbWUvaG9tZS50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ2hvbWVDb250cm9sbGVyIGFzIGhvbWUnXG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdwcm9maWxlJywge1xuICAgICAgICB1cmw6ICcvcHJvZmlsZScsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvcHJvZmlsZS9wcm9maWxlLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAncHJvZmlsZUNvbnRyb2xsZXIgYXMgcHJvZmlsZSdcbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ3BvcnRmb2xpbycsIHtcbiAgICAgICAgdXJsOiAnL3BvcnRmb2xpbycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvcG9ydGZvbGlvL3BvcnRmb2xpby50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ3BvcnRmb2xpb0NvbnRyb2xsZXIgYXMgcG9ydGZvbGlvJ1xuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnc3RvY2snLCB7XG4gICAgICAgIHVybDogJy9zdG9jay86c3ltYm9sLzptYXJrZXQnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3N0b2NrL3N0b2NrLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnc3RvY2tDb250cm9sbGVyIGFzIHN0b2NrJ1xuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnbmV3cycsIHtcbiAgICAgICAgdXJsOiAnL25ld3MvOnN5bWJvbCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvbmV3cy9uZXdzLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnbmV3c0NvbnRyb2xsZXIgYXMgbmV3cydcbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ3RyYW5zYWN0aW9ucycsIHtcbiAgICAgICAgdXJsOiAnL3RyYW5zYWN0aW9ucycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvdHJhbnNhY3Rpb25zL3RyYW5zYWN0aW9ucy50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ3RyYW5zYWN0aW9uc0NvbnRyb2xsZXIgYXMgdHJhbnNhY3Rpb25zJ1xuICAgICAgfSlcblxuICAgIGp3dE9wdGlvbnNQcm92aWRlci5jb25maWcoe1xuICAgICAgdG9rZW5HZXR0ZXI6IFsnb3B0aW9ucycsIGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIC8vIERvbid0IHNlbmQgdGhlIHRva2VuIGZvciB0ZW1wbGF0ZSByZXF1ZXN0c1xuICAgICAgICBpZiAob3B0aW9ucy51cmwuc3Vic3RyKG9wdGlvbnMudXJsLmxlbmd0aCAtIDUpID09PSAnLmh0bWwnKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0b2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKVxuICAgICAgICByZXR1cm4gdG9rZW4uc2xpY2UoMSwgLTEpXG4gICAgICB9XSxcbiAgICAgIHdoaXRlTGlzdGVkRG9tYWluczogWyd0cmFkZS5ib3V0aXF1ZScsICdsb2NhbGhvc3QnLCAnanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbSddXG4gICAgfSlcblxuICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXG4gICAgICAucHJpbWFyeVBhbGV0dGUoJ2JsdWUnKVxuICAgICAgLmFjY2VudFBhbGV0dGUoJ2dyZXknKVxuICAgICAgLndhcm5QYWxldHRlKCdyZWQnKVxuXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkYXJrLWJsdWUnKS5iYWNrZ3JvdW5kUGFsZXR0ZSgnYmx1ZScpLmRhcmsoKVxuXG4gICAgZnVuY3Rpb24gcmVkaXJlY3QgKCRxLCAkaW5qZWN0b3IsICR0aW1lb3V0LCBzdG9yZSwgJGxvY2F0aW9uKSB7XG4gICAgICB2YXIgYXV0aFxuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBhdXRoID0gJGluamVjdG9yLmdldCgnYXV0aCcpXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXNwb25zZUVycm9yOiBmdW5jdGlvbiAocmVqZWN0aW9uKSB7XG4gICAgICAgICAgaWYgKHJlamVjdGlvbi5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgYXV0aC5zaWdub3V0KClcbiAgICAgICAgICAgIHN0b3JlLnJlbW92ZSgncHJvZmlsZScpXG4gICAgICAgICAgICBzdG9yZS5yZW1vdmUoJ3Rva2VuJylcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvd2VsY29tZScpXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgICRwcm92aWRlLmZhY3RvcnkoJ3JlZGlyZWN0JywgcmVkaXJlY3QpXG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnand0SW50ZXJjZXB0b3InKVxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ3JlZGlyZWN0JylcbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5ydW4ocnVuKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBydW4gKCRyb290U2NvcGUsICRzdGF0ZSwgYXV0aCwgc3RvcmUsIGp3dEhlbHBlciwgJGxvY2F0aW9uKSB7XG4gICAgJHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gR2V0IHRoZSBKV1QgdGhhdCBpcyBzYXZlZCBpbiBsb2NhbCBzdG9yYWdlXG4gICAgICAvLyBhbmQgaWYgaXQgaXMgdGhlcmUsIGNoZWNrIHdoZXRoZXIgaXQgaXMgZXhwaXJlZC5cbiAgICAgIC8vIElmIGl0IGlzbid0LCBzZXQgdGhlIHVzZXIncyBhdXRoIHN0YXRlXG4gICAgICB2YXIgdG9rZW4gPSBzdG9yZS5nZXQoJ3Rva2VuJylcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBpZiAoIWp3dEhlbHBlci5pc1Rva2VuRXhwaXJlZCh0b2tlbikpIHtcbiAgICAgICAgICBpZiAoIWF1dGguaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2xvZ2dlZC1pbicpXG4gICAgICAgICAgICBhdXRoLmF1dGhlbnRpY2F0ZShzdG9yZS5nZXQoJ3Byb2ZpbGUnKSwgdG9rZW4pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghYXV0aC5pc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy93ZWxjb21lJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ2J1eURpYWxvZ0NvbnRyb2xsZXInLCBidXlEaWFsb2dDb250cm9sbGVyKVxuXG4gIGZ1bmN0aW9uIGJ1eURpYWxvZ0NvbnRyb2xsZXIgKCRyb290U2NvcGUsICRtZERpYWxvZywgcHJpY2UsIGRpYWxvZywgcHJvZmlsZSwgcGFzc1N5bWJvbCwgcGFzc0NvbXBhbnkpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5zdG9ja1F1YW50aXR5ID0gMVxuICAgIHZtLmJ1eVF1YW50aXR5ID0gMFxuICAgIHZtLmJ1eVByaWNlID0gMFxuICAgIHZtLnN5bWJvbCA9IHBhc3NTeW1ib2xcbiAgICB2bS5jb21wYW55ID0gcGFzc0NvbXBhbnlcbiAgICB2bS5sb2FkaW5nID0gZmFsc2VcblxuICAgIHZtLmNsb3NlRGlhbG9nID0gZGlhbG9nLmNsb3NlRGlhbG9nXG4gICAgdm0uc2hvd1RvYXN0ID0gZGlhbG9nLnNob3dUb2FzdFxuICAgIHZtLmJ1eVN0b2NrID0gYnV5U3RvY2tcblxuICAgIHByaWNlLmdldFByaWNlKHZtLnN5bWJvbCwgbnVsbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS5zdG9ja1ByaWNlID0gcmVzLnByaWNlXG4gICAgICB9XG4gICAgfSlcblxuICAgIHByb2ZpbGUuZ2V0U3RvY2tBbmRGdW5kcyh2bS5zeW1ib2wsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLnVzZXIgPSBkYXRhXG4gICAgICB9XG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGJ1eVN0b2NrIChwcmljZSwgcXVhbnRpdHkpIHtcbiAgICAgIGRpYWxvZy5sb2FkaW5nKHZtLmxvYWRpbmcsIHRydWUpXG4gICAgICB2bS5idXlRdWFudGl0eSA9IHF1YW50aXR5XG4gICAgICB2bS5idXlQcmljZSA9IChxdWFudGl0eSAqIHByaWNlKS50b0ZpeGVkKDIpXG4gICAgICB2YXIgY3VyclF0eSA9IHZtLnVzZXIuc3RvY2sucXVhbnRpdHlcbiAgICAgIHZhciBhdmdQcmljZSA9IHByb2ZpbGUud2VpZ2h0ZWRBdmVyYWdlKHZtLnVzZXIuc3RvY2sucHJpY2UsIHByaWNlLCBjdXJyUXR5LCBxdWFudGl0eSlcbiAgICAgIHZhciB0b3RhbFF0eSA9IHZtLnVzZXIuc3RvY2sucXVhbnRpdHkgKyBxdWFudGl0eVxuICAgICAgdmFyIGZ1bmRzID0gdm0udXNlci5mdW5kcyAtICgocHJpY2UgKiBxdWFudGl0eSkudG9GaXhlZCgyKSlcblxuICAgICAgcHJvZmlsZS5idXlTdG9jayh2bS5zeW1ib2wsIHZtLmNvbXBhbnksIGF2Z1ByaWNlLCBwcmljZSwgdG90YWxRdHksIGZ1bmRzLCBjdXJyUXR5LCBmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgZGlhbG9nLmxvYWRpbmcodm0ubG9hZGluZywgZmFsc2UpXG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndHJhbnNhY3Rpb24nKVxuXG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLmNsb3NlRGlhbG9nKClcbiAgICAgICAgICB2bS5zaG93VG9hc3QoJ2JvdWdodCcsIHZtLmJ1eVF1YW50aXR5LCB2bS5zeW1ib2wsICh2bS5idXlQcmljZS5yZXBsYWNlKC8oXFxkKSg/PShcXGR7M30pK1xcLikvZywgJyQxLCcpKSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnZGlhbG9nJywgZGlhbG9nKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBkaWFsb2cgKCRtZERpYWxvZywgJG1kVG9hc3QsICR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNob3dCdXk6IHNob3dCdXksXG4gICAgICBzaG93U2VsbDogc2hvd1NlbGwsXG4gICAgICBjbG9zZURpYWxvZzogY2xvc2VEaWFsb2csXG4gICAgICBzaG93VG9hc3Q6IHNob3dUb2FzdCxcbiAgICAgIGxvYWRpbmc6IGxvYWRpbmdcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93QnV5ICgkZXZlbnQsIHBhc3NTeW1ib2wsIHBhc3NDb21wYW55KSB7XG4gICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgIGxvY2Fsczoge3Bhc3NTeW1ib2w6IHBhc3NTeW1ib2wsIHBhc3NDb21wYW55OiBwYXNzQ29tcGFueX0sXG4gICAgICAgIGNvbnRyb2xsZXI6ICdidXlEaWFsb2dDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAnYnV5RGlhbG9nJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9kaWFsb2cvYnV5RGlhbG9nLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgdGFyZ2V0RXZlbnQ6ICRldmVudCxcbiAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZSxcbiAgICAgICAgZm9jdXNPbk9wZW46IGZhbHNlXG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dTZWxsICgkZXZlbnQsIHBhc3NTeW1ib2wsIHBhc3NDb21wYW55KSB7XG4gICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgIGxvY2Fsczoge3Bhc3NTeW1ib2w6IHBhc3NTeW1ib2wsIHBhc3NDb21wYW55OiBwYXNzQ29tcGFueX0sXG4gICAgICAgIGNvbnRyb2xsZXI6ICdzZWxsRGlhbG9nQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3NlbGxEaWFsb2cnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL2RpYWxvZy9zZWxsRGlhbG9nLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgdGFyZ2V0RXZlbnQ6ICRldmVudCxcbiAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZSxcbiAgICAgICAgZm9jdXNPbk9wZW46IGZhbHNlXG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dUb2FzdCAoYWN0aW9uLCBxdWFudGl0eSwgc3ltYm9sLCBwcmljZSkge1xuICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAuc2ltcGxlKClcbiAgICAgICAgICAudGV4dENvbnRlbnQoJ1lvdSAnICsgYWN0aW9uICsgJyAnICsgcXVhbnRpdHkgKyAnICcgKyBzeW1ib2wgKyAnIHNoYXJlcyBmb3IgJCcgKyBwcmljZSlcbiAgICAgICAgICAucG9zaXRpb24oJ2JvdHRvbSByaWdodCcpXG4gICAgICAgICAgLmhpZGVEZWxheSg1MDAwKVxuICAgICAgICAgIC50b2FzdENsYXNzKCdicy10b2FzdCcpKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsb3NlRGlhbG9nICgpIHtcbiAgICAgICRtZERpYWxvZy5oaWRlKClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkaW5nIChsb2FkaW5nLCB2YWx1ZSwgdGltZW91dCkge1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBsb2FkaW5nID0gdmFsdWVcbiAgICAgIH0sIHRpbWVvdXQgfHwgNTAwKVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdzZWxsRGlhbG9nQ29udHJvbGxlcicsIHNlbGxEaWFsb2dDb250cm9sbGVyKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBzZWxsRGlhbG9nQ29udHJvbGxlciAoJHJvb3RTY29wZSwgcHJpY2UsIHByb2ZpbGUsIGRpYWxvZywgcGFzc1N5bWJvbCwgcGFzc0NvbXBhbnkpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5zeW1ib2wgPSBwYXNzU3ltYm9sXG4gICAgdm0ubG9hZGluZyA9IGZhbHNlXG5cbiAgICB2bS5jbG9zZURpYWxvZyA9IGRpYWxvZy5jbG9zZURpYWxvZ1xuICAgIHZtLnNob3dUb2FzdCA9IGRpYWxvZy5zaG93VG9hc3RcbiAgICB2bS5zZWxsU3RvY2sgPSBzZWxsU3RvY2tcblxuICAgIHByaWNlLmdldFByaWNlKHZtLnN5bWJvbCwgbnVsbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS5zdG9ja1ByaWNlID0gcmVzLnByaWNlXG4gICAgICB9XG4gICAgfSlcblxuICAgIHByb2ZpbGUuZ2V0U3RvY2tBbmRGdW5kcyh2bS5zeW1ib2wsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLnVzZXIgPSBkYXRhXG4gICAgICAgIHZtLnN0b2NrUXVhbnRpdHkgPSB2bS51c2VyLnN0b2NrLnF1YW50aXR5XG4gICAgICAgIHZtLnVzZXJTdG9ja1ByaWNlID0gdm0udXNlci5zdG9jay5wcmljZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBzZWxsU3RvY2sgKHByaWNlLCBxdWFudGl0eSkge1xuICAgICAgdmFyIHNlbGxBbGwgPSB2bS51c2VyLnN0b2NrLnF1YW50aXR5IC0gcXVhbnRpdHlcbiAgICAgIHZhciBwcm9maXQgPSAodm0uc3RvY2tQcmljZSAtIHZtLnVzZXJTdG9ja1ByaWNlKSAqIHF1YW50aXR5XG5cbiAgICAgIHByb2ZpbGUuc2VsbFN0b2NrKHZtLnN5bWJvbCwgcGFzc0NvbXBhbnksIHByaWNlLCBxdWFudGl0eSwgcHJvZml0LCBzZWxsQWxsLCBmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uY2xvc2VEaWFsb2coKVxuICAgICAgICAgIHZtLnNob3dUb2FzdCgnc29sZCcsIHF1YW50aXR5LCB2bS5zeW1ib2wsICgocHJpY2UgKiBxdWFudGl0eSkudG9GaXhlZCgyKS5yZXBsYWNlKC8oXFxkKSg/PShcXGR7M30pK1xcLikvZywgJyQxLCcpKSlcbiAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RyYW5zYWN0aW9uJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXZhdGFyJywgW10pXG4gICAgLmZhY3RvcnkoJ2F2YXRhcicsIGF2YXRhcilcblxuICBmdW5jdGlvbiBhdmF0YXIgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZXRBdmF0YXI6IHNldEF2YXRhcixcbiAgICAgIGluaXRpYWxzOiBpbml0aWFsc1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldEF2YXRhciAoc3RvY2tBcnJheSkge1xuICAgICAgc3RvY2tBcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChzdG9jaykge1xuICAgICAgICBzdG9jay5hdmF0YXIgPSBpbml0aWFscyhzdG9jay5jb21wYW55KVxuICAgICAgfSlcbiAgICAgIHJldHVybiBzdG9ja0FycmF5XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdGlhbHMgKG5hbWUpIHtcbiAgICAgIHZhciBpbml0aWFscyA9IG5hbWUuc3BsaXQoJyAnLCAyKVxuICAgICAgdmFyIGF2YXRhciA9ICcnXG4gICAgICBpbml0aWFscy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtID09PSAnSW5jLicpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBhdmF0YXIgKz0gaXRlbVswXVxuICAgICAgfSlcbiAgICAgIHJldHVybiBhdmF0YXIudG9VcHBlckNhc2UoKVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3Nob3dXaXRoRGVsYXknLCBzaG93V2l0aERlbGF5KVxuXG4gIC8vIENPREUgU09VUkNFOiBodHRwczovL2NvZGVyZXZpZXcuc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzYyMDA1L3Nob3ctd2l0aC1kZWxheS1kaXJlY3RpdmVcbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIHNob3dXaXRoRGVsYXkgKCR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBsaW5rOiBmdW5jdGlvbiAoJHNjb3BlLCAkZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MoJ25nLWhpZGUnKVxuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ25nLWhpZGUnKVxuICAgICAgICB9LCBhdHRycy5zaG93V2l0aERlbGF5IHx8IDIwMDApXG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ3ByaWNlJywgW10pXG4gICAgLmZhY3RvcnkoJ3ByaWNlJywgcHJpY2UpXG5cbiAgZnVuY3Rpb24gcHJpY2UgKCRodHRwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldFByaWNlOiBnZXRQcmljZSxcbiAgICAgIGdldFByaWNlczogZ2V0UHJpY2VzXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UHJpY2UgKHN5bWJvbCwgbWFya2V0LCBjYikge1xuICAgICAgaWYgKG1hcmtldCAhPT0gbnVsbCkge1xuICAgICAgICAkaHR0cFxuICAgICAgICAgIC5nZXQoJy9hcGkvcHJpY2UvJyArIHN5bWJvbCArICcvJyArIG1hcmtldClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gY2IobnVsbCwgcmVzLmRhdGEucHJpY2UpXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGNiKCdFcnJvcjogJyArIGVyci5kYXRhLmVycm9yLCBudWxsKVxuICAgICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkaHR0cFxuICAgICAgICAgIC5nZXQoJy9hcGkvcHJpY2UvJyArIHN5bWJvbClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gY2IobnVsbCwgcmVzLmRhdGEucHJpY2UpXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGNiKCdFcnJvcjogc3RhdHVzICcgKyBlcnIuc3RhdHVzLCBudWxsKVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UHJpY2VzIChzeW1ib2xzLCBjYikge1xuICAgICAgJGh0dHBcbiAgICAgICAgLnBvc3QoJy9hcGkvcHJpY2UvbXVsdGlwbGUnLCBzeW1ib2xzKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHJlcy5kYXRhLnByaWNlcylcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHJldHVybiBjYignRXJyb3I6IHN0YXR1cyAnICsgZXJyLnN0YXR1cywgbnVsbClcbiAgICAgICAgfSlcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcigncHJvZmlsZUNvbnRyb2xsZXInLCBwcm9maWxlQ29udHJvbGxlcilcblxuICBmdW5jdGlvbiBwcm9maWxlQ29udHJvbGxlciAoJGh0dHAsIHByb2ZpbGUpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5wcm9maWxlID0gcHJvZmlsZS5nZXRQcm9maWxlKClcblxuICAgIHByb2ZpbGUuZ2V0RnVuZHMoZnVuY3Rpb24gKGVyciwgZnVuZHMpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLmZ1bmRzID0gZnVuZHNcbiAgICAgIH1cbiAgICB9KVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ3Byb2ZpbGUnLCBbXSlcbiAgICAuZmFjdG9yeSgncHJvZmlsZScsIHByb2ZpbGUpXG5cbiAgZnVuY3Rpb24gcHJvZmlsZSAoJGh0dHApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0VXNlcjogZ2V0VXNlcixcbiAgICAgIGdldFN0b2NrQW5kRnVuZHM6IGdldFN0b2NrQW5kRnVuZHMsXG4gICAgICBnZXRQcm9maWxlOiBnZXRQcm9maWxlLFxuICAgICAgZ2V0RnVuZHM6IGdldEZ1bmRzLFxuICAgICAgYnV5U3RvY2s6IGJ1eVN0b2NrLFxuICAgICAgc2VsbFN0b2NrOiBzZWxsU3RvY2ssXG4gICAgICB3ZWlnaHRlZEF2ZXJhZ2U6IHdlaWdodGVkQXZlcmFnZVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByb2ZpbGUgKCkge1xuICAgICAgdmFyIHVzZXJQcm9maWxlID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2ZpbGUnKSlcblxuICAgICAgaWYgKH51c2VyUHJvZmlsZS5uYW1lLmluZGV4T2YoJ0AnKSkge1xuICAgICAgICB1c2VyUHJvZmlsZS5uYW1lID0gdXNlclByb2ZpbGUubmFtZS5zcGxpdCgnQCcpWzBdXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1c2VyUHJvZmlsZVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFVzZXIgKGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL3VzZXIvJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGNiKHJlcy5kYXRhLnVzZXIpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RnVuZHMgKGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL3VzZXIvZnVuZHMvJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGNiKG51bGwsIHJlcy5kYXRhLmZ1bmRzKVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY2IoJ0Vycm9yOiBDYW5ub3QgZ2V0IGZ1bmRzIScgKyBlcnIsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U3RvY2tBbmRGdW5kcyAoc3ltYm9sLCBjYikge1xuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS91c2VyL3BvcnRmb2xpby8nICsgc3ltYm9sKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBzdG9jazogcmVzLmRhdGEuc3RvY2ssXG4gICAgICAgICAgICBmdW5kczogcmVzLmRhdGEuZnVuZHNcbiAgICAgICAgICB9XG4gICAgICAgICAgY2IobnVsbCwgZGF0YSlcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNiKCdFcnJvcjogc3RhdHVzJyArIGVyci5zdGF0dXMsIG51bGwsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnV5U3RvY2sgKHN5bWJvbCwgY29tcGFueSwgYXZnUHJpY2UsIHByaWNlLCB0b3RhbFF0eSwgZnVuZHMsIGV4aXN0cywgY2IpIHtcbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICBzeW1ib2w6IHN5bWJvbCxcbiAgICAgICAgY29tcGFueTogY29tcGFueSxcbiAgICAgICAgcHJpY2U6IGF2Z1ByaWNlLFxuICAgICAgICBidXlQcmljZTogcHJpY2UsXG4gICAgICAgIHF1YW50aXR5OiB0b3RhbFF0eSxcbiAgICAgICAgZnVuZHM6IGZ1bmRzLnRvRml4ZWQoMyksXG4gICAgICAgIGV4aXN0czogZXhpc3RzXG4gICAgICB9XG5cbiAgICAgICRodHRwXG4gICAgICAgIC5wb3N0KCcvYXBpL3VzZXIvYnV5JywgZGF0YSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGNiKG51bGwsIHJlcylcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNiKGVyciwgbnVsbClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxsU3RvY2sgKHN5bWJvbCwgY29tcGFueSwgc2VsbFByaWNlLCBxdWFudGl0eSwgcHJvZml0LCBzZWxsQWxsLCBjYikge1xuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIHN5bWJvbDogc3ltYm9sLFxuICAgICAgICBjb21wYW55OiBjb21wYW55LFxuICAgICAgICBzZWxsUHJpY2U6IHNlbGxQcmljZSxcbiAgICAgICAgcXVhbnRpdHk6IHF1YW50aXR5LFxuICAgICAgICBwcm9maXQ6IHByb2ZpdCxcbiAgICAgICAgc2VsbEFsbDogc2VsbEFsbFxuICAgICAgfVxuXG4gICAgICAkaHR0cFxuICAgICAgICAucG9zdCgnYXBpL3VzZXIvc2VsbCcsIGRhdGEpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBjYihudWxsLCByZXMpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgY2IoZXJyLCBudWxsKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdlaWdodGVkQXZlcmFnZSAocHJldlByaWNlLCBjdXJyUHJpY2UsIHByZXZRdHksIGN1cnJRdHkpIHtcbiAgICAgIHJldHVybiAoKChwcmV2UHJpY2UgKiBwcmV2UXR5KSArIChjdXJyUHJpY2UgKiBjdXJyUXR5KSkgLyAocHJldlF0eSArIGN1cnJRdHkpKS50b0ZpeGVkKDMpXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3NlYXJjaENvbnRyb2xsZXInLCBzZWFyY2hDb250cm9sbGVyKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBzZWFyY2hDb250cm9sbGVyICgkaHR0cCwgJHN0YXRlKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0ucXVlcnlTdG9jayA9IHF1ZXJ5U3RvY2tcbiAgICB2bS5nZXREYXRhID0gZ2V0RGF0YVxuXG4gICAgZnVuY3Rpb24gcXVlcnlTdG9jayAoc3RvY2spIHtcbiAgICAgIHJldHVybiAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL2RhdGEvc3ltYm9scy8nICsgc3RvY2spXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdXG5cbiAgICAgICAgICByZXMuZGF0YS5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChpdGVtLnN5bWJvbClcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdHNcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXREYXRhIChpdGVtKSB7XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICAkc3RhdGUudHJhbnNpdGlvblRvKCdzdG9jaycsIHtzeW1ib2w6IGl0ZW19KVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3NlYXJjaCcsIHNlYXJjaClcblxuICBmdW5jdGlvbiBzZWFyY2ggKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3NlYXJjaC9zZWFyY2gudGVtcGxhdGUuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAnc2VhcmNoQ29udHJvbGxlcicsXG4gICAgICBjb250cm9sbGVyQXM6ICdzZWFyY2gnXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ25ld3NDb250cm9sbGVyJywgbmV3c0NvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gbmV3c0NvbnRyb2xsZXIgKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBuZXdzKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0uZ2V0TmV3cyA9IGdldE5ld3NcblxuICAgIGZ1bmN0aW9uIGdldE5ld3MgKHN5bWJvbCkge1xuICAgICAgbmV3cy5nZXROZXdzKHN5bWJvbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRSYW5kb21OZXdzICgpIHtcbiAgICAgIG5ld3MuZ2V0UmFuZG9tTmV3cyhmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0ubmV3cyA9IFtdXG4gICAgICAgICAgcmVzLmRhdGEubmV3cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5uZXdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtLm5ld3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2bS5uZXdzLnB1c2goaXRlbS5uZXdzW2ldKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBuZXdzLnNodWZmbGVOZXdzKHZtLm5ld3MpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKCRzdGF0ZS5jdXJyZW50Lm5hbWUgPT09ICduZXdzJykge1xuICAgICAgZ2V0UmFuZG9tTmV3cygpXG4gICAgfSBlbHNlIHtcbiAgICAgIGdldE5ld3MoJHN0YXRlUGFyYW1zLnN5bWJvbClcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnbmV3cycsIFtdKVxuICAgIC5mYWN0b3J5KCduZXdzJywgbmV3cylcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gbmV3cyAoJGh0dHApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0TmV3czogZ2V0TmV3cyxcbiAgICAgIGdldFJhbmRvbU5ld3M6IGdldFJhbmRvbU5ld3MsXG4gICAgICBzaHVmZmxlTmV3czogc2h1ZmZsZU5ld3NcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXROZXdzIChzeW1ib2wsIGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL25ld3Mvc3ltYm9sLycgKyBzeW1ib2wpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBjYihudWxsLCByZXMpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjYihlcnIsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tTmV3cyAoY2IpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5nZXQoJy9hcGkvbmV3cy9yYW5kb20nKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzKVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY2IoZXJyLCBudWxsKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIEZpc2hlcuKAk1lhdGVzIHNodWZmbGUgYWxnb3JpdGhtIGZvciByYW5kb20gbmV3cyBhcnJheVxuICAgIGZ1bmN0aW9uIHNodWZmbGVOZXdzIChhcnJheSkge1xuICAgICAgdmFyIG0gPSBhcnJheS5sZW5ndGhcbiAgICAgIHZhciB0XG4gICAgICB2YXIgaVxuXG4gICAgICAvLyBXaGlsZSB0aGVyZSByZW1haW4gZWxlbWVudHMgdG8gc2h1ZmZsZeKAplxuICAgICAgd2hpbGUgKG0pIHtcbiAgICAgICAgLy8gUGljayBhIHJlbWFpbmluZyBlbGVtZW504oCmXG4gICAgICAgIGkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtLS0pXG5cbiAgICAgICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50LlxuICAgICAgICB0ID0gYXJyYXlbbV1cbiAgICAgICAgYXJyYXlbbV0gPSBhcnJheVtpXVxuICAgICAgICBhcnJheVtpXSA9IHRcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFycmF5XG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3NpZGVuYXZDb250cm9sbGVyJywgc2lkZW5hdkNvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gc2lkZW5hdkNvbnRyb2xsZXIgKCRodHRwLCAkcm9vdFNjb3BlLCAkc2NvcGUsICR0aW1lb3V0LCAkbG9jYXRpb24sIGF1dGgsIHN0b3JlLFxuICAgIHNpZGVuYXYsIHByb2ZpbGUpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5nZXROZXdzID0gZ2V0TmV3c1xuICAgIHZtLmxvZ291dCA9IGxvZ291dFxuXG4gICAgdm0uY2xvc2VTaWRlbmF2ID0gc2lkZW5hdi5jbG9zZVNpZGVuYXZcbiAgICB2bS5hdXRoID0gYXV0aFxuXG4gICAgdm0ubWVzc2FnZSA9ICcnXG4gICAgdm0uc2lkZW5hdlNob3cgPSBmYWxzZVxuXG4gICAgLy8gS2VlcCBwcm9maWxlIGRhdGEgYW5kIHNpZGVuYXYgb3BlbiBvbiBwYWdlIHJlZnJlc2hcbiAgICAvLyBpZiB1c2VyIGlzIGxvZ2dlZCBpblxuICAgIGlmICh2bS5hdXRoLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgdm0ucHJvZmlsZSA9IHByb2ZpbGUuZ2V0UHJvZmlsZSgpXG4gICAgICB2bS5zaWRlbmF2U2hvdyA9IHRydWVcbiAgICAgIGdldEZ1bmRzKClcbiAgICB9XG5cbiAgICAkc2NvcGUuJG9uKCd1c2VyTG9nSW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2bS5wcm9maWxlID0gcHJvZmlsZS5nZXRQcm9maWxlKClcbiAgICAgIHZtLnNpZGVuYXZTaG93ID0gdHJ1ZVxuICAgICAgZ2V0RnVuZHMoKVxuICAgIH0pXG5cbiAgICAkc2NvcGUuJG9uKCd0cmFuc2FjdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGdldEZ1bmRzKClcbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gZ2V0RnVuZHMgKCkge1xuICAgICAgcHJvZmlsZS5nZXRGdW5kcyhmdW5jdGlvbiAoZXJyLCBmdW5kcykge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgICAgfVxuICAgICAgICB2bS5mdW5kcyA9IGZ1bmRzXG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE5ld3MgKCkge1xuICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL25ld3MvQUFQTCcsIHtcbiAgICAgICAgc2tpcEF1dGhvcml6YXRpb246IHRydWVcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHZtLm1lc3NhZ2UgPSByZXNwb25zZS5kYXRhLm5ld3Muc3ltYm9sXG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ291dCAoKSB7XG4gICAgICAvLyBUaGUgc2lnbm91dCBtZXRob2Qgb24gdGhlIGF1dGggc2VydmljZVxuICAgICAgLy8gc2V0cyBpc0F1dGhlbnRpY2F0ZWQgdG8gZmFsc2UgYnV0IHdlXG4gICAgICAvLyBhbHNvIG5lZWQgdG8gcmVtb3ZlIHRoZSBwcm9maWxlIGFuZFxuICAgICAgLy8gdG9rZW4gZnJvbSBsb2NhbCBzdG9yYWdlXG4gICAgICBhdXRoLnNpZ25vdXQoKVxuICAgICAgc3RvcmUucmVtb3ZlKCdwcm9maWxlJylcbiAgICAgIHN0b3JlLnJlbW92ZSgndG9rZW4nKVxuICAgICAgdm0uc2lkZW5hdlNob3cgPSBmYWxzZVxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdsb2dnZWQtaW4nKVxuICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd1c2VyTG9nT3V0JylcbiAgICAgIHZtLnVzZXJMb2dnZWQgPSBmYWxzZVxuICAgICAgJGxvY2F0aW9uLnBhdGgoJy93ZWxjb21lJylcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdzaWRlbmF2Jywgc2lkZW5hdilcblxuICBmdW5jdGlvbiBzaWRlbmF2ICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9zaWRlbmF2L3NpZGVuYXYudGVtcGxhdGUuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAnc2lkZW5hdkNvbnRyb2xsZXInLFxuICAgICAgY29udHJvbGxlckFzOiAnc2lkZW5hdidcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnc2lkZW5hdicsIFtdKVxuICAgIC5mYWN0b3J5KCdzaWRlbmF2Jywgc2lkZW5hdilcblxuICBmdW5jdGlvbiBzaWRlbmF2ICgkbWRTaWRlbmF2LCBhdXRoLCBzdG9yZSkge1xuICAgIHJldHVybiB7XG4gICAgICB0b2dnbGVTaWRlbmF2OiB0b2dnbGVTaWRlbmF2LFxuICAgICAgY2xvc2VTaWRlbmF2OiBjbG9zZVNpZGVuYXZcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVTaWRlbmF2IChpZCkge1xuICAgICAgJG1kU2lkZW5hdihpZCB8fCAnbGVmdCcpLnRvZ2dsZSgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvc2VTaWRlbmF2IChpZCkge1xuICAgICAgJG1kU2lkZW5hdihpZCB8fCAnbGVmdCcpLmNsb3NlKClcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignaG9tZUNvbnRyb2xsZXInLCBob21lQ29udHJvbGxlcilcblxuICBmdW5jdGlvbiBob21lQ29udHJvbGxlciAoJGh0dHAsIGF2YXRhciwgZGlhbG9nKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0ubWFya2V0cyA9IFsnVVMnLCAnTFNFJywgJ0VVUk8nLCAnVE1YJywgJ0hLRScsICdJTkRJQSddXG4gICAgdm0ubG9hZGluZyA9IGZhbHNlXG5cbiAgICB2bS5zaG93U2VsbCA9IGRpYWxvZy5zaG93U2VsbFxuICAgIHZtLnNob3dCdXkgPSBkaWFsb2cuc2hvd0J1eVxuICAgIHZtLmdldFJpc2Vyc0ZhbGxlcnMgPSBnZXRSaXNlcnNGYWxsZXJzXG5cbiAgICBnZXRSaXNlcnNGYWxsZXJzKCdVUycpXG5cbiAgICBmdW5jdGlvbiBnZXRSaXNlcnNGYWxsZXJzIChtYXJrZXQpIHtcbiAgICAgIHZtLmxvYWRpbmcgPSB0cnVlXG5cbiAgICAgIGlmICh2bVsnbWFya2V0cyddLmluY2x1ZGVzKG1hcmtldCkpIHtcbiAgICAgICAgJGh0dHBcbiAgICAgICAgICAuZ2V0KCcvYXBpL3Jpc2VmYWxsLycgKyBtYXJrZXQpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmVycm9yKSB7XG4gICAgICAgICAgICAgIHZtLmVycm9yID0gcmVzLmRhdGEuZXJyb3JcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZtLmVycm9yID0gbnVsbFxuICAgICAgICAgICAgICB2bS5zdG9ja3MgPSByZXMuZGF0YS5zdG9ja3Muc3RvY2tzXG4gICAgICAgICAgICAgIGF2YXRhci5zZXRBdmF0YXIodm0uc3RvY2tzKVxuICAgICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0b2Nrcy5uZXdEYXRhID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHZtLm1lc3NhZ2UgPSAnRXh0ZXJuYWwgQVBJIG5vdCBhdmFpbGFibGUgYXQgdGhpcyBtb21lbnQuIFNob3dpbmcgZGF0YSBvbGRlciB0aGFuIDEgaG91ci4nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0uZXJyb3IgPSAnTm8gc3VjaCBtYXJrZXQ6ICcgKyBtYXJrZXRcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcigncG9ydGZvbGlvQ29udHJvbGxlcicsIHBvcnRmb2xpb0NvbnRyb2xsZXIpXG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIHBvcnRmb2xpb0NvbnRyb2xsZXIgKCRzY29wZSwgJGludGVydmFsLCAkaHR0cCwgcHJpY2UsIGRpYWxvZywgYXZhdGFyKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0uc2hvd1NlbGwgPSBkaWFsb2cuc2hvd1NlbGxcbiAgICB2bS5zaG93QnV5ID0gZGlhbG9nLnNob3dCdXlcbiAgICB2bS5nZXRQb3J0Zm9saW8gPSBnZXRQb3J0Zm9saW9cbiAgICB2bS5wb3J0Zm9saW8gPSBudWxsXG5cbiAgICAkc2NvcGUuJG9uKCd0cmFuc2FjdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGdldFBvcnRmb2xpbygpXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGdldFBvcnRmb2xpbyAoKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL3VzZXIvcG9ydGZvbGlvJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGlmIChyZXMuZGF0YS5tZXNzYWdlKSB7XG4gICAgICAgICAgICB2bS5ub1BvcnRmb2xpbyA9IHJlcy5kYXRhLm1lc3NhZ2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdm0ucG9ydGZvbGlvID0gcmVzLmRhdGEucG9ydGZvbGlvXG4gICAgICAgICAgICB2bS5mdW5kcyA9IHJlcy5kYXRhLmZ1bmRzXG4gICAgICAgICAgICBnZXRQcmljZXModm0ucG9ydGZvbGlvKVxuICAgICAgICAgICAgYXZhdGFyLnNldEF2YXRhcih2bS5wb3J0Zm9saW8pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByaWNlcyAocG9ydGZvbGlvKSB7XG4gICAgICB2YXIgc3ltYm9scyA9IFtdXG4gICAgICBwb3J0Zm9saW8uZm9yRWFjaChmdW5jdGlvbiAoc3RvY2spIHtcbiAgICAgICAgc3ltYm9scy5wdXNoKHN0b2NrLnN5bWJvbClcbiAgICAgIH0pXG4gICAgICBwcmljZS5nZXRQcmljZXMoc3ltYm9scywgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hdGNoUHJpY2VzKHZtLnBvcnRmb2xpbywgcmVzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hdGNoUHJpY2VzICh1c2VyUG9ydGZvbGlvLCBjdXJyUHJpY2VzKSB7XG4gICAgICB1c2VyUG9ydGZvbGlvLmZvckVhY2goZnVuY3Rpb24gKHVzZXJTdG9jaykge1xuICAgICAgICBjdXJyUHJpY2VzLmZvckVhY2goZnVuY3Rpb24gKHN0b2NrKSB7XG4gICAgICAgICAgaWYgKHN0b2NrLnN5bWJvbCA9PT0gdXNlclN0b2NrLnN5bWJvbCkge1xuICAgICAgICAgICAgdXNlclN0b2NrLnVwZGF0ZWRBdCA9IHN0b2NrLnVwZGF0ZWRBdFxuICAgICAgICAgICAgdXNlclN0b2NrLmN1cnJQcmljZSA9IHN0b2NrLnByaWNlXG4gICAgICAgICAgICB1c2VyU3RvY2subWFya2V0ID0gc3RvY2subWFya2V0XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIHJldHVybiB1c2VyUG9ydGZvbGlvXG4gICAgfVxuXG4gICAgLy8gU2V0cyBpbnRlcnZhbCBvZiA1IG1pbnV0ZXMgZm9yIGF1dG8tdXBkYXRpbmcgcHJpY2VzIG9uIFVJXG4gICAgLy8gU3RvcHMgaW50ZXJ2YWwgYWZ0ZXIgNTAgbWludXRlc1xuICAgIHZhciB1cGRhdGVQcmljZVxuICAgIGZ1bmN0aW9uIGF1dG91cGRhdGUgKCkge1xuICAgICAgdXBkYXRlUHJpY2UgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBnZXRQcmljZXModm0ucG9ydGZvbGlvKVxuICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRlIG9mIHBvcnRmb2xpbyBwcmljZXMnKVxuICAgICAgfSwgMTAwMCAqIDYwICogNSwgMTApXG4gICAgfVxuXG4gICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAkaW50ZXJ2YWwuY2FuY2VsKHVwZGF0ZVByaWNlKVxuICAgICAgdXBkYXRlUHJpY2UgPSB1bmRlZmluZWRcbiAgICB9KVxuXG4gICAgLy8gRmlyZSB0byBwb3B1bGF0ZSBET00gd2l0aCBkYXRhXG4gICAgZ2V0UG9ydGZvbGlvKClcblxuICAgIC8vIEZpcmUgdG8gc3RhcnQgdXBkYXRlIG9mIHByaWNlcyBldmVyeSA1IG1pbnV0ZXNcbiAgICBhdXRvdXBkYXRlKClcbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdzdG9ja0NvbnRyb2xsZXInLCBzdG9ja0NvbnRyb2xsZXIpXG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIHN0b2NrQ29udHJvbGxlciAoJGludGVydmFsLCAkc2NvcGUsICRzdGF0ZVBhcmFtcywgJGh0dHAsIGRpYWxvZywgcHJpY2UsIG5ld3MsIGF2YXRhcikge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuXG4gICAgdm0uc2hvd0J1eSA9IGRpYWxvZy5zaG93QnV5XG4gICAgdm0uc2hvd1NlbGwgPSBkaWFsb2cuc2hvd1NlbGxcblxuICAgIGZ1bmN0aW9uIGdldERhdGEgKCkge1xuICAgICAgdm0ubG9hZGluZyA9IHRydWVcblxuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS9kYXRhL3N5bWJvbC8nICsgJHN0YXRlUGFyYW1zLnN5bWJvbCArICcvJyArICRzdGF0ZVBhcmFtcy5tYXJrZXQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBpZiAocmVzLmRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgIHZtLm5vQ29tcGFueSA9IHJlcy5kYXRhLmVycm9yXG4gICAgICAgICAgICB2bS5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdm0uY29tcGFueSA9IHJlcy5kYXRhLmRhdGFcblxuICAgICAgICAgICAgaWYgKHZtLmNvbXBhbnkubmV3RGF0YSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgdm0ub2xkRGF0YSA9ICdFeHRlcm5hbCBBUEkgbm90IGF2YWlsYWJsZSBhdCB0aGlzIG1vbWVudC4gU2hvd2luZyBzeW1ib2wgZGF0YSBvbGRlciB0aGFuIDEgZGF5LidcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcHJpY2UuZ2V0UHJpY2UoJHN0YXRlUGFyYW1zLnN5bWJvbCwgJHN0YXRlUGFyYW1zLm1hcmtldCB8fCB2bS5jb21wYW55Lm1hcmtldCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZtLnByaWNlID0gcmVzLnByaWNlXG4gICAgICAgICAgICAgICAgdm0udXBkYXRlZEF0ID0gcmVzLnVwZGF0ZWRBdFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBuZXdzLmdldE5ld3MoJHN0YXRlUGFyYW1zLnN5bWJvbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICB2bS5uZXdzRXJyb3IgPSAnRXJyb3IgZ2V0dGluZyBuZXdzJ1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICB2bS5uZXdzID0gcmVzLmRhdGEubmV3cy5uZXdzXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICB2bS5uZXdzRXJyb3IgPSBlcnJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB2bS5hdmF0YXIgPSBhdmF0YXIuaW5pdGlhbHModm0uY29tcGFueS5jb21wYW55IHx8ICRzdGF0ZVBhcmFtcy5zeW1ib2wpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIFNldHMgaW50ZXJ2YWwgb2YgNSBtaW51dGVzIGZvciBhdXRvLXVwZGF0aW5nIHN0b2NrIHByaWNlIG9uIFVJXG4gICAgLy8gU3RvcHMgaW50ZXJ2YWwgYWZ0ZXIgNTAgbWludXRlc1xuICAgIHZhciB1cGRhdGVQcmljZVxuICAgIGZ1bmN0aW9uIGF1dG91cGRhdGUgKCkge1xuICAgICAgdXBkYXRlUHJpY2UgPSAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBwcmljZS5nZXRQcmljZSgkc3RhdGVQYXJhbXMuc3ltYm9sLCAkc3RhdGVQYXJhbXMubWFya2V0IHx8IHZtLmNvbXBhbnkubWFya2V0LCBmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2bS5wcmljZSA9IHJlc1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1ByaWNlIHVwZGF0ZWQgZm9yICcgKyAkc3RhdGVQYXJhbXMuc3ltYm9sICsgJyAvICcgKyAkc3RhdGVQYXJhbXMubWFya2V0IHx8IHZtLmNvbXBhbnkubWFya2V0KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0sIDEwMDAgKiA2MCAqIDUsIDEwKVxuICAgIH1cblxuICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgJGludGVydmFsLmNhbmNlbCh1cGRhdGVQcmljZSlcbiAgICAgIHVwZGF0ZVByaWNlID0gdW5kZWZpbmVkXG4gICAgfSlcblxuICAgIC8vIEZpcmUgdG8gcG9wdWxhdGUgRE9NIHdpdGggZGF0YVxuICAgIGdldERhdGEoKVxuXG4gICAgLy8gRmlyZSB0byBzdGFydCBhdXRvLXVwZGF0ZSBpbnRlcnZhbFxuICAgIGF1dG91cGRhdGUoKVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3Rvb2xiYXJDb250cm9sbGVyJywgdG9vbGJhckNvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gdG9vbGJhckNvbnRyb2xsZXIgKGF1dGgsIHN0b3JlLCAkbG9jYXRpb24sICRzY29wZSwgJHJvb3RTY29wZSwgJGh0dHAsIHNpZGVuYXYpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5sb2dpbiA9IGxvZ2luXG5cbiAgICB2bS5hdXRoID0gYXV0aFxuICAgIHZtLnRvZ2dsZVNpZGVuYXYgPSBzaWRlbmF2LnRvZ2dsZVNpZGVuYXZcbiAgICB2bS51c2VyTG9nZ2VkID0gZmFsc2VcblxuICAgIGlmIChhdXRoLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgdm0udXNlckxvZ2dlZCA9IHRydWVcbiAgICB9XG5cbiAgICAkc2NvcGUuJG9uKCd1c2VyTG9nT3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgdm0udXNlckxvZ2dlZCA9IGZhbHNlXG4gICAgfSlcblxuICAgICRzY29wZS4kb24oJ3VzZXJMb2dJbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZtLnVzZXJMb2dnZWQgPSB0cnVlXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGxvZ2luICgpIHtcbiAgICAgIC8vIFRoZSBhdXRoIHNlcnZpY2UgaGFzIGEgc2lnbmluIG1ldGhvZCB0aGF0XG4gICAgICAvLyBtYWtlcyB1c2Ugb2YgQXV0aDBMb2NrLiBJZiBhdXRoZW50aWNhdGlvblxuICAgICAgLy8gaXMgc3VjY2Vzc2Z1bCwgdGhlIHVzZXIncyBwcm9maWxlIGFuZCB0b2tlblxuICAgICAgLy8gYXJlIHNhdmVkIGluIGxvY2FsIHN0b3JhZ2Ugd2l0aCB0aGUgc3RvcmUgc2VydmljZVxuXG4gICAgICBhdXRoLnNpZ25pbih7XG4gICAgICAgIGF1dGhQYXJhbXM6IHtcbiAgICAgICAgICBzY29wZTogJ29wZW5pZCBlbWFpbCdcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKHByb2ZpbGUsIHRva2VuKSB7XG4gICAgICAgIHN0b3JlLnNldCgncHJvZmlsZScsIHByb2ZpbGUpXG4gICAgICAgIHN0b3JlLnNldCgndG9rZW4nLCB0b2tlbilcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy93ZWxjb21lJylcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdsb2dnZWQtaW4nKVxuICAgICAgICB1c2VyQWNjb3VudChmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgdm0ubWVzc2FnZSA9IHJlcy5kYXRhLm1lc3NhZ2VcbiAgICAgICAgICB2bS5mdW5kcyA9IHJlcy5kYXRhLnVzZXIuZnVuZHNcbiAgICAgICAgICB2bS51c2VyTG9nZ2VkID0gdHJ1ZVxuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndXNlckxvZ0luJylcbiAgICAgICAgfSlcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXNlckFjY291bnQgKGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCdhcGkvdXNlci8nKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IocmVzKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHZtLmZlYXR1cmVzID0gW1xuICAgICAgJyQxMDAsMDAwIHN0YXJ0aW5nIGZ1bmRzJyxcbiAgICAgICdSZWFsLXRpbWUgc3RvY2sgcHJpY2VzJyxcbiAgICAgICdTaXggaW50ZXJuYXRpb25hbCBzdG9jayBtYXJrZXRzJyxcbiAgICAgICdTdG9jayByaXNlcnMgYW5kIGZhbGxlcnMnLFxuICAgICAgJ0RhaWx5IG5ld3MgZm9yIG1hcmtldCBjb21wYW5pZXMnLFxuICAgICAgJ1VwLXRvLWRhdGUgY29tcGFueSBkYXRhJyxcbiAgICAgICdVc2VyLWZyaWVuZGx5IGludGVyZmFjZSdcbiAgICBdXG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCd0b29sYmFyJywgdG9vbGJhcilcblxuICBmdW5jdGlvbiB0b29sYmFyICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy90b29sYmFyL3Rvb2xiYXIudGVtcGxhdGUuaHRtbCcsXG4gICAgICBjb250cm9sbGVyOiAndG9vbGJhckNvbnRyb2xsZXInLFxuICAgICAgY29udHJvbGxlckFzOiAndG9vbGJhcidcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcigndHJhbnNhY3Rpb25zQ29udHJvbGxlcicsIHRyYW5zYWN0aW9uc0NvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gdHJhbnNhY3Rpb25zQ29udHJvbGxlciAoJGh0dHAsIGF2YXRhcikge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIGZ1bmN0aW9uIGdldFRyYW5zYWN0aW9ucyAoKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL3RyYW5zYWN0aW9uL2FsbCcpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBpZiAocmVzLmRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgIHZtLm5vVHJhbnNhY3Rpb25zID0gcmVzLmRhdGEuZXJyb3JcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdm0udHJhbnNhY3Rpb25zID0gcmVzLmRhdGEudHJhbnNhY3Rpb25zXG4gICAgICAgICAgICBhdmF0YXIuc2V0QXZhdGFyKHZtLnRyYW5zYWN0aW9ucylcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldFRyYW5zYWN0aW9ucygpXG4gIH1cbn0pKClcbiJdfQ==
