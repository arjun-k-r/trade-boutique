!function(){"use strict";function t(t,o,e,n,r,a,l){function i(t,o,e,n,r){var a;return e(function(){a=o.get("auth")}),{responseError:function(o){return 401===o.status&&(a.signout(),n.remove("profile"),n.remove("token"),r.path("/home")),t.reject(o)}}}i.$inject=["$q","$injector","$timeout","store","$location"],e.init({domain:"danielnitu.eu.auth0.com",clientID:"1gLOvetcrjC9GW2kEeRzEtJRJH700ia6"}),n.otherwise("/welcome"),r.state("welcome",{url:"/welcome",templateUrl:"app/components/welcome/welcome.template.html"}).state("home",{url:"/home",templateUrl:"app/components/home/home.template.html",controller:"homeController as home"}).state("profile",{url:"/profile",templateUrl:"app/components/profile/profile.template.html",controller:"profileController as profile"}).state("portfolio",{url:"/portfolio",templateUrl:"app/components/portfolio/portfolio.template.html",controller:"portfolioController as portfolio"}).state("stock",{url:"/stock/:symbol/:market",templateUrl:"app/components/stock/stock.template.html",controller:"stockController as stock"}).state("news",{url:"/news/:symbol",templateUrl:"app/components/news/news.template.html",controller:"newsController as news"}).state("transactions",{url:"/transactions",templateUrl:"app/components/transactions/transactions.template.html",controller:"transactionsController as transactions"}),l.config({tokenGetter:["options",function(t){return".html"===t.url.substr(t.url.length-5)?null:window.localStorage.getItem("token").slice(1,-1)}],whiteListedDomains:["trade.boutique","localhost","jsonplaceholder.typicode.com"]}),t.theme("default").primaryPalette("blue").accentPalette("grey").warnPalette("red"),t.theme("dark-blue").backgroundPalette("blue").dark(),o.factory("redirect",i),a.interceptors.push("jwtInterceptor"),a.interceptors.push("redirect")}function o(t,o,e,n,r,a){t.$on("$locationChangeStart",function(){var t=n.get("token");t&&(r.isTokenExpired(t)||e.isAuthenticated||(document.body.classList.add("logged-in"),e.authenticate(n.get("profile"),t))),e.isAuthenticated||a.path("/home")})}t.$inject=["$mdThemingProvider","$provide","authProvider","$urlRouterProvider","$stateProvider","$httpProvider","jwtOptionsProvider"],o.$inject=["$rootScope","$state","auth","store","jwtHelper","$location"],angular.module("app",["auth0","angular-storage","angular-jwt","ngMaterial","ui.router","ngLetterAvatar","sidenav","profile","price","news","avatar"]).config(t).run(o)}(),function(){"use strict";function t(t,o,e,n,r,a,l){function i(o,e){n.loading(s.loading,!0),s.buyQuantity=e,s.buyPrice=(e*o).toFixed(2);var a=s.user.stock.quantity,l=r.weightedAverage(s.user.stock.price,o,a,e),i=s.user.stock.quantity+e,c=s.user.funds-(o*e).toFixed(2);r.buyStock(s.symbol,s.company,l,o,i,c,a,function(o,e){n.loading(s.loading,!1),t.$broadcast("transaction"),o?s.error=o:(s.closeDialog(),s.showToast("bought",s.buyQuantity,s.symbol,s.buyPrice.replace(/(\d)(?=(\d{3})+\.)/g,"$1,")))})}var s=this;s.stockQuantity=1,s.buyQuantity=0,s.buyPrice=0,s.symbol=a,s.company=l,s.loading=!1,s.closeDialog=n.closeDialog,s.showToast=n.showToast,s.buyStock=i,e.getPrice(s.symbol,null,function(t,o){t?s.error=t:s.stockPrice=o}),r.getStockAndFunds(s.symbol,function(t,o){t?s.error=t:s.user=o})}t.$inject=["$rootScope","$mdDialog","price","dialog","profile","passSymbol","passCompany"],angular.module("app").controller("buyDialogController",t)}(),function(){"use strict";function t(t,o,e){function n(o,e,n){t.show({locals:{passSymbol:e,passCompany:n},controller:"buyDialogController",controllerAs:"buyDialog",templateUrl:"app/components/dialog/buyDialog.template.html",parent:angular.element(document.body),targetEvent:o,clickOutsideToClose:!0,focusOnOpen:!1})}function r(o,e,n){t.show({locals:{passSymbol:e,passCompany:n},controller:"sellDialogController",controllerAs:"sellDialog",templateUrl:"app/components/dialog/sellDialog.template.html",parent:angular.element(document.body),targetEvent:o,clickOutsideToClose:!0,focusOnOpen:!1})}function a(t,e,n,r){o.show(o.simple().textContent("You "+t+" "+e+" "+n+" shares for $"+r).position("bottom right").hideDelay(5e3).toastClass("bs-toast"))}function l(){t.hide()}function i(t,o,n){e(function(){t=o},n||500)}return{showBuy:n,showSell:r,closeDialog:l,showToast:a,loading:i}}t.$inject=["$mdDialog","$mdToast","$timeout"],angular.module("app").factory("dialog",t)}(),function(){"use strict";function t(t,o,e,n,r,a){function l(o,r){n.loading(i.loading,!0);var l=i.user.stock.quantity-r,s=(i.stockPrice-i.userStockPrice)*r;e.sellStock(i.symbol,a,o,r,s,l,function(e,a){n.loading(i.loading,!1),t.$broadcast("transaction"),e?(i.loading=!1,i.error=e):(i.closeDialog(),i.showToast("sold",r,i.symbol,(o*r).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")))})}var i=this;i.symbol=r,i.loading=!1,i.closeDialog=n.closeDialog,i.showToast=n.showToast,i.sellStock=l,o.getPrice(i.symbol,null,function(t,o){t?i.error=t:i.stockPrice=o}),e.getStockAndFunds(i.symbol,function(t,o){t?i.error=t:(i.user=o,i.stockQuantity=i.user.stock.quantity,i.userStockPrice=i.user.stock.price)})}t.$inject=["$rootScope","price","profile","dialog","passSymbol","passCompany"],angular.module("app").controller("sellDialogController",t)}(),function(){"use strict";function t(){function t(t){return t.forEach(function(t){t.avatar=o(t.company)}),t}function o(t){var o=t.split(" ",2),e="";return o.forEach(function(t){"Inc."!==t&&(e+=t[0])}),e.toUpperCase()}return{setAvatar:t,initials:o}}angular.module("avatar",[]).factory("avatar",t)}(),function(){"use strict";function t(t){return{restrict:"A",link:function(o,e,n){e.addClass("ng-hide"),t(function(){e.removeClass("ng-hide")},n.showWithDelay||2e3)}}}t.$inject=["$timeout"],angular.module("app").directive("showWithDelay",t)}(),function(){"use strict";function t(t){function o(o,e,n){null!==e?t.get("/api/price/"+o+"/"+e).then(function(t){return n(null,t.data.price.price)},function(t){return n("Error: "+t.data.error,null)}):t.get("/api/price/"+o).then(function(t){return n(null,t.data.price.price)},function(t){return n("Error: status "+t.status,null)})}function e(o,e){t.post("/api/price/multiple",o).then(function(t){return e(null,t.data.prices)},function(t){return e("Error: status "+t.status,null)})}return{getPrice:o,getPrices:e}}t.$inject=["$http"],angular.module("price",[]).factory("price",t)}(),function(){"use strict";function t(t,o){function e(e){n.loading=!0,n.markets.includes(e)?t.get("/api/risefall/"+e).then(function(t){t.data.error?n.error=t.data.error:(n.error=null,n.stocks=t.data.stocks,o.setAvatar(n.stocks),n.loading=!1)}):n.error="No such market: "+e}var n=this;n.markets=["US","LSE","EURO","TMX","HKE","INDIA"],n.loading=!1,n.getRisersFallers=e,e("US")}t.$inject=["$http","avatar"],angular.module("app").controller("homeController",t)}(),function(){"use strict";function t(t,o,e){function n(t){e.getNews(t,function(t,o){t?r.error=t:console.log(o)})}var r=this;r.getNews=n,"news"===t.current.name?function(){e.getRandomNews(function(t,o){t?r.error=t:(r.news=[],o.data.news.forEach(function(t){for(var o=0;o<10;o++)r.news.push(t.news[o])}),e.shuffleNews(r.news))})}():n(o.symbol)}t.$inject=["$state","$stateParams","news"],angular.module("app").controller("newsController",t)}(),function(){"use strict";function t(t){function o(o,e){t.get("/api/news/symbol/"+o).then(function(t){e(null,t)},function(t){e(t,null)})}function e(o){t.get("/api/news/random").then(function(t){o(null,t)},function(t){o(t,null)})}function n(t){for(var o,e,n=t.length;n;)e=Math.floor(Math.random()*n--),o=t[n],t[n]=t[e],t[e]=o;return t}return{getNews:o,getRandomNews:e,shuffleNews:n}}t.$inject=["$http"],angular.module("news",[]).factory("news",t)}(),function(){"use strict";function t(t,o,e,n,r){function a(){o.get("/api/user/portfolio").then(function(t){t.data.message?s.noPortfolio=t.data.message:(s.portfolio=t.data.portfolio,s.funds=t.data.funds,l(s.portfolio),r.setAvatar(s.portfolio))})}function l(t){var o=[];t.forEach(function(t){o.push(t.symbol)}),e.getPrices(o,function(t,o){t?s.error=t:i(s.portfolio,o)})}function i(t,o){return t.forEach(function(t){o.forEach(function(o){o.symbol===t.symbol&&(t.currPrice=o.price,t.market=o.market)})}),t}var s=this;s.showSell=n.showSell,s.showBuy=n.showBuy,s.getPortfolio=a,t.$on("transaction",function(){a()}),a()}t.$inject=["$scope","$http","price","dialog","avatar"],angular.module("app").controller("portfolioController",t)}(),function(){"use strict";function t(t,o){function e(o){return t.get("/api/data/symbols/"+o).then(function(t){var o=[];return t.data.data.forEach(function(t){o.push(t.symbol)}),o})}function n(t){if(!t)return!1;o.transitionTo("stock",{symbol:t})}var r=this;r.queryStock=e,r.getData=n}t.$inject=["$http","$state"],angular.module("app").controller("searchController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/search/search.template.html",controller:"searchController",controllerAs:"search"}}angular.module("app").directive("search",t)}(),function(){"use strict";function t(t,o){var e=this;e.profile=o.getProfile(),o.getFunds(function(t,o){t?e.error=t:e.funds=o})}t.$inject=["$http","profile"],angular.module("app").controller("profileController",t)}(),function(){"use strict";function t(t){function o(){var t=JSON.parse(window.localStorage.getItem("profile"));return~t.name.indexOf("@")&&(t.name=t.name.split("@")[0]),t}function e(o){t.get("/api/user/").then(function(t){o(t.data.user)})}function n(o){t.get("/api/user/funds/").then(function(t){o(null,t.data.funds)},function(t){o("Error: Cannot get funds!"+t,null)})}function r(o,e){t.get("/api/user/portfolio/"+o).then(function(t){var o={stock:t.data.stock,funds:t.data.funds};e(null,o)},function(t){e("Error: status"+t.status,null,null)})}function a(o,e,n,r,a,l,i,s){var c={symbol:o,company:e,price:n,buyPrice:r,quantity:a,funds:l.toFixed(3),exists:i};t.post("/api/user/buy",c).then(function(t){s(null,t)},function(t){s(t,null)})}function l(o,e,n,r,a,l,i){var s={symbol:o,company:e,sellPrice:n,quantity:r,profit:a,sellAll:l};t.post("api/user/sell",s).then(function(t){i(null,t)},function(t){console.log(t),i(t,null)})}function i(t,o,e,n){return((t*e+o*n)/(e+n)).toFixed(3)}return{getUser:e,getStockAndFunds:r,getProfile:o,getFunds:n,buyStock:a,sellStock:l,weightedAverage:i}}t.$inject=["$http"],angular.module("profile",[]).factory("profile",t)}(),function(){"use strict";function t(t,o,e,n,r,a,l,i){function s(){i.getFunds(function(t,o){t&&(p.error=t),p.funds=o})}function c(){t.get("http://localhost:3000/api/news/AAPL",{skipAuthorization:!0}).then(function(t){p.message=t.data.news.symbol})}function u(){r.signout(),a.remove("profile"),a.remove("token"),p.sidenavShow=!1,document.body.classList.remove("logged-in"),o.$broadcast("userLogOut"),p.userLogged=!1,n.path("/home")}var p=this;p.getNews=c,p.logout=u,p.closeSidenav=l.closeSidenav,p.auth=r,p.message="",p.sidenavShow=!1,p.auth.isAuthenticated&&(p.profile=i.getProfile(),p.sidenavShow=!0,s()),e.$on("userLogIn",function(){p.profile=i.getProfile(),p.sidenavShow=!0,s()}),e.$on("transaction",function(){s()})}t.$inject=["$http","$rootScope","$scope","$location","auth","store","sidenav","profile"],angular.module("app").controller("sidenavController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/sidenav/sidenav.template.html",controller:"sidenavController",controllerAs:"sidenav"}}angular.module("app").directive("sidenav",t)}(),function(){"use strict";function t(t,o,e){function n(o){t(o||"left").toggle()}function r(o){t(o||"left").close()}return{toggleSidenav:n,closeSidenav:r}}t.$inject=["$mdSidenav","auth","store"],angular.module("sidenav",[]).factory("sidenav",t)}(),function(){"use strict";function t(t,o,e,n,r,a){var l=this;l.loading=!1,l.showBuy=e.showBuy,l.showSell=e.showSell,function(){l.loading=!0,o.get("/api/data/symbol/"+t.symbol+"/"+t.market).then(function(o){o.data.error?(l.noCompany=o.data.error,l.loading=!1):(l.company=o.data.data,n.getPrice(t.symbol,t.market||l.company.market,function(t,o){t?l.error=t:l.price=o}),r.getNews(t.symbol,function(t,o){if(t)l.newsError="Error getting news";else try{l.news=o.data.news.news}catch(t){l.newsError=t}l.loading=!1}),l.avatar=a.initials(l.company.company||t.symbol))})}()}t.$inject=["$stateParams","$http","dialog","price","news","avatar"],angular.module("app").controller("stockController",t)}(),function(){"use strict";function t(t,o,e,n,r,a){function l(){t.signin({authParams:{scope:"openid email"}},function(t,n){o.set("profile",t),o.set("token",n),e.path("/home"),document.body.classList.add("logged-in"),r.$broadcast("userLogIn"),i.userLogged=!0},function(t){console.log(t)})}var i=this;i.login=l,i.auth=t,i.toggleSidenav=a.toggleSidenav,i.userLogged=!1,t.isAuthenticated&&(i.userLogged=!0),n.$on("userLogOut",function(){i.userLogged=!1})}t.$inject=["auth","store","$location","$scope","$rootScope","sidenav"],angular.module("app").controller("toolbarController",t)}(),function(){"use strict";function t(){return{templateUrl:"app/components/toolbar/toolbar.template.html",controller:"toolbarController",controllerAs:"toolbar"}}angular.module("app").directive("toolbar",t)}(),function(){"use strict";function t(t,o){var e=this;!function(){t.get("/api/transaction/all").then(function(t){t.data.error?e.noTransactions=t.data.error:(e.transactions=t.data.transactions,o.setAvatar(e.transactions))},function(t){e.error=t})}()}t.$inject=["$http","avatar"],angular.module("app").controller("transactionsController",t)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImRpYWxvZy9idXlEaWFsb2cuY29udHJvbGxlci5qcyIsImRpYWxvZy9kaWFsb2cuc2VydmljZS5qcyIsImRpYWxvZy9zZWxsRGlhbG9nLmNvbnRyb2xsZXIuanMiLCJoZWxwZXJzL2F2YXRhci5zZXJ2aWNlLmpzIiwiaGVscGVycy9kZWxheS5kaXJlY3RpdmUuanMiLCJoZWxwZXJzL3ByaWNlLnNlcnZpY2UuanMiLCJob21lL2hvbWUuY29udHJvbGxlci5qcyIsIm5ld3MvbmV3cy5jb250cm9sbGVyLmpzIiwibmV3cy9uZXdzLnNlcnZpY2UuanMiLCJwb3J0Zm9saW8vcG9ydGZvbGlvLmNvbnRyb2xsZXIuanMiLCJzZWFyY2gvc2VhcmNoLmNvbnRyb2xsZXIuanMiLCJzZWFyY2gvc2VhcmNoLmRpcmVjdGl2ZS5qcyIsInByb2ZpbGUvcHJvZmlsZS5jb250cm9sbGVyLmpzIiwicHJvZmlsZS9wcm9maWxlLnNlcnZpY2UuanMiLCJzaWRlbmF2L3NpZGVuYXYuY29udHJvbGxlci5qcyIsInNpZGVuYXYvc2lkZW5hdi5kaXJlY3RpdmUuanMiLCJzaWRlbmF2L3NpZGVuYXYuc2VydmljZS5qcyIsInN0b2NrL3N0b2NrLmNvbnRyb2xsZXIuanMiLCJ0b29sYmFyL3Rvb2xiYXIuY29udHJvbGxlci5qcyIsInRvb2xiYXIvdG9vbGJhci5kaXJlY3RpdmUuanMiLCJ0cmFuc2FjdGlvbnMvdHJhbnNhY3Rpb25zLmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiY29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJHByb3ZpZGUiLCJhdXRoUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJyZWRpcmVjdCIsIiRxIiwiJGluamVjdG9yIiwiJHRpbWVvdXQiLCJzdG9yZSIsIiRsb2NhdGlvbiIsImF1dGgiLCJnZXQiLCJyZXNwb25zZUVycm9yIiwicmVqZWN0aW9uIiwic3RhdHVzIiwic2lnbm91dCIsInJlbW92ZSIsInBhdGgiLCJyZWplY3QiLCJpbml0IiwiZG9tYWluIiwiY2xpZW50SUQiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImp3dE9wdGlvbnNQcm92aWRlciIsInRva2VuR2V0dGVyIiwib3B0aW9ucyIsInN1YnN0ciIsImxlbmd0aCIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzbGljZSIsIndoaXRlTGlzdGVkRG9tYWlucyIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwid2FyblBhbGV0dGUiLCJiYWNrZ3JvdW5kUGFsZXR0ZSIsImRhcmsiLCJmYWN0b3J5IiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInJ1biIsIiRyb290U2NvcGUiLCIkc3RhdGUiLCJqd3RIZWxwZXIiLCIkb24iLCJ0b2tlbiIsImlzVG9rZW5FeHBpcmVkIiwiaXNBdXRoZW50aWNhdGVkIiwiZG9jdW1lbnQiLCJib2R5IiwiY2xhc3NMaXN0IiwiYWRkIiwiYXV0aGVudGljYXRlIiwiYW5ndWxhciIsIm1vZHVsZSIsImJ1eURpYWxvZ0NvbnRyb2xsZXIiLCIkbWREaWFsb2ciLCJwcmljZSIsImRpYWxvZyIsInByb2ZpbGUiLCJwYXNzU3ltYm9sIiwicGFzc0NvbXBhbnkiLCJidXlTdG9jayIsInF1YW50aXR5IiwibG9hZGluZyIsInZtIiwiYnV5UXVhbnRpdHkiLCJidXlQcmljZSIsInRvRml4ZWQiLCJjdXJyUXR5IiwidXNlciIsInN0b2NrIiwiYXZnUHJpY2UiLCJ3ZWlnaHRlZEF2ZXJhZ2UiLCJ0b3RhbFF0eSIsImZ1bmRzIiwic3ltYm9sIiwiY29tcGFueSIsImVyciIsInJlcyIsIiRicm9hZGNhc3QiLCJlcnJvciIsImNsb3NlRGlhbG9nIiwic2hvd1RvYXN0IiwicmVwbGFjZSIsInRoaXMiLCJzdG9ja1F1YW50aXR5IiwiZ2V0UHJpY2UiLCJzdG9ja1ByaWNlIiwiZ2V0U3RvY2tBbmRGdW5kcyIsImRhdGEiLCIkbWRUb2FzdCIsInNob3dCdXkiLCIkZXZlbnQiLCJzaG93IiwibG9jYWxzIiwiY29udHJvbGxlckFzIiwicGFyZW50IiwiZWxlbWVudCIsInRhcmdldEV2ZW50IiwiY2xpY2tPdXRzaWRlVG9DbG9zZSIsImZvY3VzT25PcGVuIiwic2hvd1NlbGwiLCJhY3Rpb24iLCJzaW1wbGUiLCJ0ZXh0Q29udGVudCIsInBvc2l0aW9uIiwiaGlkZURlbGF5IiwidG9hc3RDbGFzcyIsImhpZGUiLCJ2YWx1ZSIsInRpbWVvdXQiLCJzZWxsRGlhbG9nQ29udHJvbGxlciIsInNlbGxTdG9jayIsInNlbGxBbGwiLCJwcm9maXQiLCJ1c2VyU3RvY2tQcmljZSIsImF2YXRhciIsInNldEF2YXRhciIsInN0b2NrQXJyYXkiLCJmb3JFYWNoIiwiaW5pdGlhbHMiLCJuYW1lIiwic3BsaXQiLCJpdGVtIiwidG9VcHBlckNhc2UiLCJzaG93V2l0aERlbGF5IiwicmVzdHJpY3QiLCJsaW5rIiwiJHNjb3BlIiwiJGVsZW1lbnQiLCJhdHRycyIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJkaXJlY3RpdmUiLCIkaHR0cCIsIm1hcmtldCIsImNiIiwidGhlbiIsImdldFByaWNlcyIsInN5bWJvbHMiLCJwb3N0IiwicHJpY2VzIiwiaG9tZUNvbnRyb2xsZXIiLCJnZXRSaXNlcnNGYWxsZXJzIiwiaW5jbHVkZXMiLCJzdG9ja3MiLCJtYXJrZXRzIiwibmV3c0NvbnRyb2xsZXIiLCIkc3RhdGVQYXJhbXMiLCJuZXdzIiwiZ2V0TmV3cyIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50IiwiZ2V0UmFuZG9tTmV3cyIsImkiLCJzaHVmZmxlTmV3cyIsImFycmF5IiwidCIsIm0iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwb3J0Zm9saW9Db250cm9sbGVyIiwiZ2V0UG9ydGZvbGlvIiwibWVzc2FnZSIsIm5vUG9ydGZvbGlvIiwicG9ydGZvbGlvIiwibWF0Y2hQcmljZXMiLCJ1c2VyUG9ydGZvbGlvIiwiY3VyclByaWNlcyIsInVzZXJTdG9jayIsImN1cnJQcmljZSIsInNlYXJjaENvbnRyb2xsZXIiLCJxdWVyeVN0b2NrIiwicmVzdWx0cyIsImdldERhdGEiLCJ0cmFuc2l0aW9uVG8iLCJzZWFyY2giLCJwcm9maWxlQ29udHJvbGxlciIsImdldFByb2ZpbGUiLCJnZXRGdW5kcyIsInVzZXJQcm9maWxlIiwiSlNPTiIsInBhcnNlIiwiaW5kZXhPZiIsImdldFVzZXIiLCJleGlzdHMiLCJzZWxsUHJpY2UiLCJwcmV2UHJpY2UiLCJwcmV2UXR5Iiwic2lkZW5hdkNvbnRyb2xsZXIiLCJzaWRlbmF2Iiwic2tpcEF1dGhvcml6YXRpb24iLCJyZXNwb25zZSIsImxvZ291dCIsInNpZGVuYXZTaG93IiwidXNlckxvZ2dlZCIsImNsb3NlU2lkZW5hdiIsIiRtZFNpZGVuYXYiLCJ0b2dnbGVTaWRlbmF2IiwiaWQiLCJ0b2dnbGUiLCJjbG9zZSIsInN0b2NrQ29udHJvbGxlciIsIm5vQ29tcGFueSIsIm5ld3NFcnJvciIsInRvb2xiYXJDb250cm9sbGVyIiwibG9naW4iLCJzaWduaW4iLCJhdXRoUGFyYW1zIiwic2NvcGUiLCJzZXQiLCJ0b29sYmFyIiwidHJhbnNhY3Rpb25zQ29udHJvbGxlciIsIm5vVHJhbnNhY3Rpb25zIiwidHJhbnNhY3Rpb25zIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBV0EsU0FBQUEsR0FDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsS0FpRUEsUUFBQUMsR0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxHQUFBQyxFQUtBLE9BSkFILEdBQUEsV0FDQUcsRUFBQUosRUFBQUssSUFBQSxXQUlBQyxjQUFBLFNBQUFDLEdBT0EsTUFOQSxPQUFBQSxFQUFBQyxTQUNBSixFQUFBSyxVQUNBUCxFQUFBUSxPQUFBLFdBQ0FSLEVBQUFRLE9BQUEsU0FDQVAsRUFBQVEsS0FBQSxVQUVBWixFQUFBYSxPQUFBTCxpRUE3RUFiLEVBQUFtQixNQUNBQyxPQUFBLDBCQUNBQyxTQUFBLHFDQUdBcEIsRUFB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WyI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnLCBbXG4gICAgICAnYXV0aDAnLCAnYW5ndWxhci1zdG9yYWdlJywgJ2FuZ3VsYXItand0JywgJ25nTWF0ZXJpYWwnLCAndWkucm91dGVyJywgJ25nTGV0dGVyQXZhdGFyJyxcbiAgICAgICdzaWRlbmF2JywgJ3Byb2ZpbGUnLCAncHJpY2UnLCAnbmV3cycsICdhdmF0YXInXSlcbiAgICAuY29uZmlnKGNvbmZpZylcbiAgICAucnVuKHJ1bilcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gY29uZmlnIChcbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIsXG4gICAgJHByb3ZpZGUsXG4gICAgYXV0aFByb3ZpZGVyLFxuICAgICR1cmxSb3V0ZXJQcm92aWRlcixcbiAgICAkc3RhdGVQcm92aWRlcixcbiAgICAkaHR0cFByb3ZpZGVyLFxuICAgIGp3dE9wdGlvbnNQcm92aWRlcikge1xuICAgIGF1dGhQcm92aWRlci5pbml0KHtcbiAgICAgIGRvbWFpbjogJ2RhbmllbG5pdHUuZXUuYXV0aDAuY29tJyxcbiAgICAgIGNsaWVudElEOiAnMWdMT3ZldGNyakM5R1cya0VlUnpFdEpSSkg3MDBpYTYnXG4gICAgfSlcblxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy93ZWxjb21lJylcblxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAuc3RhdGUoJ3dlbGNvbWUnLCB7XG4gICAgICAgIHVybDogJy93ZWxjb21lJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy93ZWxjb21lL3dlbGNvbWUudGVtcGxhdGUuaHRtbCdcbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgIHVybDogJy9ob21lJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9ob21lL2hvbWUudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdob21lQ29udHJvbGxlciBhcyBob21lJ1xuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgncHJvZmlsZScsIHtcbiAgICAgICAgdXJsOiAnL3Byb2ZpbGUnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3Byb2ZpbGUvcHJvZmlsZS50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ3Byb2ZpbGVDb250cm9sbGVyIGFzIHByb2ZpbGUnXG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdwb3J0Zm9saW8nLCB7XG4gICAgICAgIHVybDogJy9wb3J0Zm9saW8nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3BvcnRmb2xpby9wb3J0Zm9saW8udGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdwb3J0Zm9saW9Db250cm9sbGVyIGFzIHBvcnRmb2xpbydcbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ3N0b2NrJywge1xuICAgICAgICB1cmw6ICcvc3RvY2svOnN5bWJvbC86bWFya2V0JyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9zdG9jay9zdG9jay50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ3N0b2NrQ29udHJvbGxlciBhcyBzdG9jaydcbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ25ld3MnLCB7XG4gICAgICAgIHVybDogJy9uZXdzLzpzeW1ib2wnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL25ld3MvbmV3cy50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ25ld3NDb250cm9sbGVyIGFzIG5ld3MnXG4gICAgICB9KVxuICAgICAgLnN0YXRlKCd0cmFuc2FjdGlvbnMnLCB7XG4gICAgICAgIHVybDogJy90cmFuc2FjdGlvbnMnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3RyYW5zYWN0aW9ucy90cmFuc2FjdGlvbnMudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICd0cmFuc2FjdGlvbnNDb250cm9sbGVyIGFzIHRyYW5zYWN0aW9ucydcbiAgICAgIH0pXG5cbiAgICBqd3RPcHRpb25zUHJvdmlkZXIuY29uZmlnKHtcbiAgICAgIHRva2VuR2V0dGVyOiBbJ29wdGlvbnMnLCBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAvLyBEb24ndCBzZW5kIHRoZSB0b2tlbiBmb3IgdGVtcGxhdGUgcmVxdWVzdHNcbiAgICAgICAgaWYgKG9wdGlvbnMudXJsLnN1YnN0cihvcHRpb25zLnVybC5sZW5ndGggLSA1KSA9PT0gJy5odG1sJykge1xuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJylcbiAgICAgICAgcmV0dXJuIHRva2VuLnNsaWNlKDEsIC0xKVxuICAgICAgfV0sXG4gICAgICB3aGl0ZUxpc3RlZERvbWFpbnM6IFsndHJhZGUuYm91dGlxdWUnLCAnbG9jYWxob3N0JywgJ2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20nXVxuICAgIH0pXG5cbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxuICAgICAgLnByaW1hcnlQYWxldHRlKCdibHVlJylcbiAgICAgIC5hY2NlbnRQYWxldHRlKCdncmV5JylcbiAgICAgIC53YXJuUGFsZXR0ZSgncmVkJylcblxuICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGFyay1ibHVlJykuYmFja2dyb3VuZFBhbGV0dGUoJ2JsdWUnKS5kYXJrKClcblxuICAgIGZ1bmN0aW9uIHJlZGlyZWN0ICgkcSwgJGluamVjdG9yLCAkdGltZW91dCwgc3RvcmUsICRsb2NhdGlvbikge1xuICAgICAgdmFyIGF1dGhcbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYXV0aCA9ICRpbmplY3Rvci5nZXQoJ2F1dGgnKVxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzcG9uc2VFcnJvcjogZnVuY3Rpb24gKHJlamVjdGlvbikge1xuICAgICAgICAgIGlmIChyZWplY3Rpb24uc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICAgIGF1dGguc2lnbm91dCgpXG4gICAgICAgICAgICBzdG9yZS5yZW1vdmUoJ3Byb2ZpbGUnKVxuICAgICAgICAgICAgc3RvcmUucmVtb3ZlKCd0b2tlbicpXG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2hvbWUnKVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbilcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAkcHJvdmlkZS5mYWN0b3J5KCdyZWRpcmVjdCcsIHJlZGlyZWN0KVxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2p3dEludGVyY2VwdG9yJylcbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdyZWRpcmVjdCcpXG4gIH1cblxuICBmdW5jdGlvbiBydW4gKCRyb290U2NvcGUsICRzdGF0ZSwgYXV0aCwgc3RvcmUsIGp3dEhlbHBlciwgJGxvY2F0aW9uKSB7XG4gICAgJHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gR2V0IHRoZSBKV1QgdGhhdCBpcyBzYXZlZCBpbiBsb2NhbCBzdG9yYWdlXG4gICAgICAvLyBhbmQgaWYgaXQgaXMgdGhlcmUsIGNoZWNrIHdoZXRoZXIgaXQgaXMgZXhwaXJlZC5cbiAgICAgIC8vIElmIGl0IGlzbid0LCBzZXQgdGhlIHVzZXIncyBhdXRoIHN0YXRlXG4gICAgICB2YXIgdG9rZW4gPSBzdG9yZS5nZXQoJ3Rva2VuJylcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBpZiAoIWp3dEhlbHBlci5pc1Rva2VuRXhwaXJlZCh0b2tlbikpIHtcbiAgICAgICAgICBpZiAoIWF1dGguaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2xvZ2dlZC1pbicpXG4gICAgICAgICAgICBhdXRoLmF1dGhlbnRpY2F0ZShzdG9yZS5nZXQoJ3Byb2ZpbGUnKSwgdG9rZW4pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghYXV0aC5pc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9ob21lJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ2J1eURpYWxvZ0NvbnRyb2xsZXInLCBidXlEaWFsb2dDb250cm9sbGVyKVxuXG4gIGZ1bmN0aW9uIGJ1eURpYWxvZ0NvbnRyb2xsZXIgKCRyb290U2NvcGUsICRtZERpYWxvZywgcHJpY2UsIGRpYWxvZywgcHJvZmlsZSwgcGFzc1N5bWJvbCwgcGFzc0NvbXBhbnkpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5zdG9ja1F1YW50aXR5ID0gMVxuICAgIHZtLmJ1eVF1YW50aXR5ID0gMFxuICAgIHZtLmJ1eVByaWNlID0gMFxuICAgIHZtLnN5bWJvbCA9IHBhc3NTeW1ib2xcbiAgICB2bS5jb21wYW55ID0gcGFzc0NvbXBhbnlcbiAgICB2bS5sb2FkaW5nID0gZmFsc2VcblxuICAgIHZtLmNsb3NlRGlhbG9nID0gZGlhbG9nLmNsb3NlRGlhbG9nXG4gICAgdm0uc2hvd1RvYXN0ID0gZGlhbG9nLnNob3dUb2FzdFxuICAgIHZtLmJ1eVN0b2NrID0gYnV5U3RvY2tcblxuICAgIHByaWNlLmdldFByaWNlKHZtLnN5bWJvbCwgbnVsbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS5zdG9ja1ByaWNlID0gcmVzXG4gICAgICB9XG4gICAgfSlcblxuICAgIHByb2ZpbGUuZ2V0U3RvY2tBbmRGdW5kcyh2bS5zeW1ib2wsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLnVzZXIgPSBkYXRhXG4gICAgICB9XG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGJ1eVN0b2NrIChwcmljZSwgcXVhbnRpdHkpIHtcbiAgICAgIGRpYWxvZy5sb2FkaW5nKHZtLmxvYWRpbmcsIHRydWUpXG4gICAgICB2bS5idXlRdWFudGl0eSA9IHF1YW50aXR5XG4gICAgICB2bS5idXlQcmljZSA9IChxdWFudGl0eSAqIHByaWNlKS50b0ZpeGVkKDIpXG4gICAgICB2YXIgY3VyclF0eSA9IHZtLnVzZXIuc3RvY2sucXVhbnRpdHlcbiAgICAgIHZhciBhdmdQcmljZSA9IHByb2ZpbGUud2VpZ2h0ZWRBdmVyYWdlKHZtLnVzZXIuc3RvY2sucHJpY2UsIHByaWNlLCBjdXJyUXR5LCBxdWFudGl0eSlcbiAgICAgIHZhciB0b3RhbFF0eSA9IHZtLnVzZXIuc3RvY2sucXVhbnRpdHkgKyBxdWFudGl0eVxuICAgICAgdmFyIGZ1bmRzID0gdm0udXNlci5mdW5kcyAtICgocHJpY2UgKiBxdWFudGl0eSkudG9GaXhlZCgyKSlcblxuICAgICAgcHJvZmlsZS5idXlTdG9jayh2bS5zeW1ib2wsIHZtLmNvbXBhbnksIGF2Z1ByaWNlLCBwcmljZSwgdG90YWxRdHksIGZ1bmRzLCBjdXJyUXR5LCBmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgZGlhbG9nLmxvYWRpbmcodm0ubG9hZGluZywgZmFsc2UpXG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndHJhbnNhY3Rpb24nKVxuXG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLmNsb3NlRGlhbG9nKClcbiAgICAgICAgICB2bS5zaG93VG9hc3QoJ2JvdWdodCcsIHZtLmJ1eVF1YW50aXR5LCB2bS5zeW1ib2wsICh2bS5idXlQcmljZS5yZXBsYWNlKC8oXFxkKSg/PShcXGR7M30pK1xcLikvZywgJyQxLCcpKSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnZGlhbG9nJywgZGlhbG9nKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBkaWFsb2cgKCRtZERpYWxvZywgJG1kVG9hc3QsICR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNob3dCdXk6IHNob3dCdXksXG4gICAgICBzaG93U2VsbDogc2hvd1NlbGwsXG4gICAgICBjbG9zZURpYWxvZzogY2xvc2VEaWFsb2csXG4gICAgICBzaG93VG9hc3Q6IHNob3dUb2FzdCxcbiAgICAgIGxvYWRpbmc6IGxvYWRpbmdcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93QnV5ICgkZXZlbnQsIHBhc3NTeW1ib2wsIHBhc3NDb21wYW55KSB7XG4gICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgIGxvY2Fsczoge3Bhc3NTeW1ib2w6IHBhc3NTeW1ib2wsIHBhc3NDb21wYW55OiBwYXNzQ29tcGFueX0sXG4gICAgICAgIGNvbnRyb2xsZXI6ICdidXlEaWFsb2dDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAnYnV5RGlhbG9nJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9kaWFsb2cvYnV5RGlhbG9nLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgdGFyZ2V0RXZlbnQ6ICRldmVudCxcbiAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZSxcbiAgICAgICAgZm9jdXNPbk9wZW46IGZhbHNlXG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dTZWxsICgkZXZlbnQsIHBhc3NTeW1ib2wsIHBhc3NDb21wYW55KSB7XG4gICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgIGxvY2Fsczoge3Bhc3NTeW1ib2w6IHBhc3NTeW1ib2wsIHBhc3NDb21wYW55OiBwYXNzQ29tcGFueX0sXG4gICAgICAgIGNvbnRyb2xsZXI6ICdzZWxsRGlhbG9nQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3NlbGxEaWFsb2cnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL2RpYWxvZy9zZWxsRGlhbG9nLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgdGFyZ2V0RXZlbnQ6ICRldmVudCxcbiAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZSxcbiAgICAgICAgZm9jdXNPbk9wZW46IGZhbHNlXG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dUb2FzdCAoYWN0aW9uLCBxdWFudGl0eSwgc3ltYm9sLCBwcmljZSkge1xuICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAuc2ltcGxlKClcbiAgICAgICAgICAudGV4dENvbnRlbnQoJ1lvdSAnICsgYWN0aW9uICsgJyAnICsgcXVhbnRpdHkgKyAnICcgKyBzeW1ib2wgKyAnIHNoYXJlcyBmb3IgJCcgKyBwcmljZSlcbiAgICAgICAgICAucG9zaXRpb24oJ2JvdHRvbSByaWdodCcpXG4gICAgICAgICAgLmhpZGVEZWxheSg1MDAwKVxuICAgICAgICAgIC50b2FzdENsYXNzKCdicy10b2FzdCcpKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsb3NlRGlhbG9nICgpIHtcbiAgICAgICRtZERpYWxvZy5oaWRlKClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkaW5nIChsb2FkaW5nLCB2YWx1ZSwgdGltZW91dCkge1xuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBsb2FkaW5nID0gdmFsdWVcbiAgICAgIH0sIHRpbWVvdXQgfHwgNTAwKVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdzZWxsRGlhbG9nQ29udHJvbGxlcicsIHNlbGxEaWFsb2dDb250cm9sbGVyKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBzZWxsRGlhbG9nQ29udHJvbGxlciAoJHJvb3RTY29wZSwgcHJpY2UsIHByb2ZpbGUsIGRpYWxvZywgcGFzc1N5bWJvbCwgcGFzc0NvbXBhbnkpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5zeW1ib2wgPSBwYXNzU3ltYm9sXG4gICAgdm0ubG9hZGluZyA9IGZhbHNlXG5cbiAgICB2bS5jbG9zZURpYWxvZyA9IGRpYWxvZy5jbG9zZURpYWxvZ1xuICAgIHZtLnNob3dUb2FzdCA9IGRpYWxvZy5zaG93VG9hc3RcbiAgICB2bS5zZWxsU3RvY2sgPSBzZWxsU3RvY2tcblxuICAgIHByaWNlLmdldFByaWNlKHZtLnN5bWJvbCwgbnVsbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2bS5zdG9ja1ByaWNlID0gcmVzXG4gICAgICB9XG4gICAgfSlcblxuICAgIHByb2ZpbGUuZ2V0U3RvY2tBbmRGdW5kcyh2bS5zeW1ib2wsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLnVzZXIgPSBkYXRhXG4gICAgICAgIHZtLnN0b2NrUXVhbnRpdHkgPSB2bS51c2VyLnN0b2NrLnF1YW50aXR5XG4gICAgICAgIHZtLnVzZXJTdG9ja1ByaWNlID0gdm0udXNlci5zdG9jay5wcmljZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBzZWxsU3RvY2sgKHByaWNlLCBxdWFudGl0eSkge1xuICAgICAgZGlhbG9nLmxvYWRpbmcodm0ubG9hZGluZywgdHJ1ZSlcbiAgICAgIHZhciBzZWxsQWxsID0gdm0udXNlci5zdG9jay5xdWFudGl0eSAtIHF1YW50aXR5XG4gICAgICB2YXIgcHJvZml0ID0gKHZtLnN0b2NrUHJpY2UgLSB2bS51c2VyU3RvY2tQcmljZSkgKiBxdWFudGl0eVxuICAgICAgcHJvZmlsZS5zZWxsU3RvY2sodm0uc3ltYm9sLCBwYXNzQ29tcGFueSwgcHJpY2UsIHF1YW50aXR5LCBwcm9maXQsIHNlbGxBbGwsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgICBkaWFsb2cubG9hZGluZyh2bS5sb2FkaW5nLCBmYWxzZSlcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd0cmFuc2FjdGlvbicpXG5cbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uY2xvc2VEaWFsb2coKVxuICAgICAgICAgIHZtLnNob3dUb2FzdCgnc29sZCcsIHF1YW50aXR5LCB2bS5zeW1ib2wsICgocHJpY2UgKiBxdWFudGl0eSkudG9GaXhlZCgyKS5yZXBsYWNlKC8oXFxkKSg/PShcXGR7M30pK1xcLikvZywgJyQxLCcpKSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXZhdGFyJywgW10pXG4gICAgLmZhY3RvcnkoJ2F2YXRhcicsIGF2YXRhcilcblxuICBmdW5jdGlvbiBhdmF0YXIgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZXRBdmF0YXI6IHNldEF2YXRhcixcbiAgICAgIGluaXRpYWxzOiBpbml0aWFsc1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldEF2YXRhciAoc3RvY2tBcnJheSkge1xuICAgICAgc3RvY2tBcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChzdG9jaykge1xuICAgICAgICBzdG9jay5hdmF0YXIgPSBpbml0aWFscyhzdG9jay5jb21wYW55KVxuICAgICAgfSlcbiAgICAgIHJldHVybiBzdG9ja0FycmF5XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdGlhbHMgKG5hbWUpIHtcbiAgICAgIHZhciBpbml0aWFscyA9IG5hbWUuc3BsaXQoJyAnLCAyKVxuICAgICAgdmFyIGF2YXRhciA9ICcnXG4gICAgICBpbml0aWFscy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtID09PSAnSW5jLicpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBhdmF0YXIgKz0gaXRlbVswXVxuICAgICAgfSlcbiAgICAgIHJldHVybiBhdmF0YXIudG9VcHBlckNhc2UoKVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3Nob3dXaXRoRGVsYXknLCBzaG93V2l0aERlbGF5KVxuXG4gIC8vIENPREUgU09VUkNFOiBodHRwczovL2NvZGVyZXZpZXcuc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzYyMDA1L3Nob3ctd2l0aC1kZWxheS1kaXJlY3RpdmVcbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIHNob3dXaXRoRGVsYXkgKCR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBsaW5rOiBmdW5jdGlvbiAoJHNjb3BlLCAkZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MoJ25nLWhpZGUnKVxuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ25nLWhpZGUnKVxuICAgICAgICB9LCBhdHRycy5zaG93V2l0aERlbGF5IHx8IDIwMDApXG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ3ByaWNlJywgW10pXG4gICAgLmZhY3RvcnkoJ3ByaWNlJywgcHJpY2UpXG5cbiAgZnVuY3Rpb24gcHJpY2UgKCRodHRwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldFByaWNlOiBnZXRQcmljZSxcbiAgICAgIGdldFByaWNlczogZ2V0UHJpY2VzXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UHJpY2UgKHN5bWJvbCwgbWFya2V0LCBjYikge1xuICAgICAgaWYgKG1hcmtldCAhPT0gbnVsbCkge1xuICAgICAgICAkaHR0cFxuICAgICAgICAgIC5nZXQoJy9hcGkvcHJpY2UvJyArIHN5bWJvbCArICcvJyArIG1hcmtldClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gY2IobnVsbCwgcmVzLmRhdGEucHJpY2UucHJpY2UpXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGNiKCdFcnJvcjogJyArIGVyci5kYXRhLmVycm9yLCBudWxsKVxuICAgICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkaHR0cFxuICAgICAgICAgIC5nZXQoJy9hcGkvcHJpY2UvJyArIHN5bWJvbClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gY2IobnVsbCwgcmVzLmRhdGEucHJpY2UucHJpY2UpXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGNiKCdFcnJvcjogc3RhdHVzICcgKyBlcnIuc3RhdHVzLCBudWxsKVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UHJpY2VzIChzeW1ib2xzLCBjYikge1xuICAgICAgJGh0dHBcbiAgICAgICAgLnBvc3QoJy9hcGkvcHJpY2UvbXVsdGlwbGUnLCBzeW1ib2xzKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgcmV0dXJuIGNiKG51bGwsIHJlcy5kYXRhLnByaWNlcylcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHJldHVybiBjYignRXJyb3I6IHN0YXR1cyAnICsgZXJyLnN0YXR1cywgbnVsbClcbiAgICAgICAgfSlcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignaG9tZUNvbnRyb2xsZXInLCBob21lQ29udHJvbGxlcilcblxuICBmdW5jdGlvbiBob21lQ29udHJvbGxlciAoJGh0dHAsIGF2YXRhcikge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLm1hcmtldHMgPSBbJ1VTJywgJ0xTRScsICdFVVJPJywgJ1RNWCcsICdIS0UnLCAnSU5ESUEnXVxuICAgIHZtLmxvYWRpbmcgPSBmYWxzZVxuXG4gICAgdm0uZ2V0UmlzZXJzRmFsbGVycyA9IGdldFJpc2Vyc0ZhbGxlcnNcblxuICAgIGdldFJpc2Vyc0ZhbGxlcnMoJ1VTJylcblxuICAgIGZ1bmN0aW9uIGdldFJpc2Vyc0ZhbGxlcnMgKG1hcmtldCkge1xuICAgICAgdm0ubG9hZGluZyA9IHRydWVcblxuICAgICAgaWYgKHZtWydtYXJrZXRzJ10uaW5jbHVkZXMobWFya2V0KSkge1xuICAgICAgICAkaHR0cFxuICAgICAgICAgIC5nZXQoJy9hcGkvcmlzZWZhbGwvJyArIG1hcmtldClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBpZiAocmVzLmRhdGEuZXJyb3IpIHtcbiAgICAgICAgICAgICAgdm0uZXJyb3IgPSByZXMuZGF0YS5lcnJvclxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdm0uZXJyb3IgPSBudWxsXG4gICAgICAgICAgICAgIHZtLnN0b2NrcyA9IHJlcy5kYXRhLnN0b2Nrc1xuICAgICAgICAgICAgICBhdmF0YXIuc2V0QXZhdGFyKHZtLnN0b2NrcylcbiAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZtLmVycm9yID0gJ05vIHN1Y2ggbWFya2V0OiAnICsgbWFya2V0XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ25ld3NDb250cm9sbGVyJywgbmV3c0NvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gbmV3c0NvbnRyb2xsZXIgKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBuZXdzKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0uZ2V0TmV3cyA9IGdldE5ld3NcblxuICAgIGZ1bmN0aW9uIGdldE5ld3MgKHN5bWJvbCkge1xuICAgICAgbmV3cy5nZXROZXdzKHN5bWJvbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRSYW5kb21OZXdzICgpIHtcbiAgICAgIG5ld3MuZ2V0UmFuZG9tTmV3cyhmdW5jdGlvbiAoZXJyLCByZXMpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0ubmV3cyA9IFtdXG4gICAgICAgICAgcmVzLmRhdGEubmV3cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgICAgICAgdm0ubmV3cy5wdXNoKGl0ZW0ubmV3c1tpXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIG5ld3Muc2h1ZmZsZU5ld3Modm0ubmV3cylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoJHN0YXRlLmN1cnJlbnQubmFtZSA9PT0gJ25ld3MnKSB7XG4gICAgICBnZXRSYW5kb21OZXdzKClcbiAgICB9IGVsc2Uge1xuICAgICAgZ2V0TmV3cygkc3RhdGVQYXJhbXMuc3ltYm9sKVxuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCduZXdzJywgW10pXG4gICAgLmZhY3RvcnkoJ25ld3MnLCBuZXdzKVxuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBuZXdzICgkaHR0cCkge1xuICAgIHJldHVybiB7XG4gICAgICBnZXROZXdzOiBnZXROZXdzLFxuICAgICAgZ2V0UmFuZG9tTmV3czogZ2V0UmFuZG9tTmV3cyxcbiAgICAgIHNodWZmbGVOZXdzOiBzaHVmZmxlTmV3c1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE5ld3MgKHN5bWJvbCwgY2IpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5nZXQoJy9hcGkvbmV3cy9zeW1ib2wvJyArIHN5bWJvbClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGNiKG51bGwsIHJlcylcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNiKGVyciwgbnVsbClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRSYW5kb21OZXdzIChjYikge1xuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS9uZXdzL3JhbmRvbScpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICBjYihudWxsLCByZXMpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjYihlcnIsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gRmlzaGVy4oCTWWF0ZXMgc2h1ZmZsZSBhbGdvcml0aG0gZm9yIHJhbmRvbSBuZXdzIGFycmF5XG4gICAgZnVuY3Rpb24gc2h1ZmZsZU5ld3MgKGFycmF5KSB7XG4gICAgICB2YXIgbSA9IGFycmF5Lmxlbmd0aFxuICAgICAgdmFyIHRcbiAgICAgIHZhciBpXG5cbiAgICAgIC8vIFdoaWxlIHRoZXJlIHJlbWFpbiBlbGVtZW50cyB0byBzaHVmZmxl4oCmXG4gICAgICB3aGlsZSAobSkge1xuICAgICAgICAvLyBQaWNrIGEgcmVtYWluaW5nIGVsZW1lbnTigKZcbiAgICAgICAgaSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG0tLSlcblxuICAgICAgICAvLyBBbmQgc3dhcCBpdCB3aXRoIHRoZSBjdXJyZW50IGVsZW1lbnQuXG4gICAgICAgIHQgPSBhcnJheVttXVxuICAgICAgICBhcnJheVttXSA9IGFycmF5W2ldXG4gICAgICAgIGFycmF5W2ldID0gdFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXJyYXlcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcigncG9ydGZvbGlvQ29udHJvbGxlcicsIHBvcnRmb2xpb0NvbnRyb2xsZXIpXG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIHBvcnRmb2xpb0NvbnRyb2xsZXIgKCRzY29wZSwgJGh0dHAsIHByaWNlLCBkaWFsb2csIGF2YXRhcikge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLnNob3dTZWxsID0gZGlhbG9nLnNob3dTZWxsXG4gICAgdm0uc2hvd0J1eSA9IGRpYWxvZy5zaG93QnV5XG4gICAgdm0uZ2V0UG9ydGZvbGlvID0gZ2V0UG9ydGZvbGlvXG5cbiAgICAkc2NvcGUuJG9uKCd0cmFuc2FjdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGdldFBvcnRmb2xpbygpXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGdldFBvcnRmb2xpbyAoKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL3VzZXIvcG9ydGZvbGlvJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGlmIChyZXMuZGF0YS5tZXNzYWdlKSB7XG4gICAgICAgICAgICB2bS5ub1BvcnRmb2xpbyA9IHJlcy5kYXRhLm1lc3NhZ2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdm0ucG9ydGZvbGlvID0gcmVzLmRhdGEucG9ydGZvbGlvXG4gICAgICAgICAgICB2bS5mdW5kcyA9IHJlcy5kYXRhLmZ1bmRzXG4gICAgICAgICAgICBnZXRQcmljZXModm0ucG9ydGZvbGlvKVxuICAgICAgICAgICAgYXZhdGFyLnNldEF2YXRhcih2bS5wb3J0Zm9saW8pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByaWNlcyAocG9ydGZvbGlvKSB7XG4gICAgICB2YXIgc3ltYm9scyA9IFtdXG4gICAgICBwb3J0Zm9saW8uZm9yRWFjaChmdW5jdGlvbiAoc3RvY2spIHtcbiAgICAgICAgc3ltYm9scy5wdXNoKHN0b2NrLnN5bWJvbClcbiAgICAgIH0pXG4gICAgICBwcmljZS5nZXRQcmljZXMoc3ltYm9scywgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hdGNoUHJpY2VzKHZtLnBvcnRmb2xpbywgcmVzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1hdGNoUHJpY2VzICh1c2VyUG9ydGZvbGlvLCBjdXJyUHJpY2VzKSB7XG4gICAgICB1c2VyUG9ydGZvbGlvLmZvckVhY2goZnVuY3Rpb24gKHVzZXJTdG9jaykge1xuICAgICAgICBjdXJyUHJpY2VzLmZvckVhY2goZnVuY3Rpb24gKHN0b2NrKSB7XG4gICAgICAgICAgaWYgKHN0b2NrLnN5bWJvbCA9PT0gdXNlclN0b2NrLnN5bWJvbCkge1xuICAgICAgICAgICAgdXNlclN0b2NrLmN1cnJQcmljZSA9IHN0b2NrLnByaWNlXG4gICAgICAgICAgICB1c2VyU3RvY2subWFya2V0ID0gc3RvY2subWFya2V0XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIHJldHVybiB1c2VyUG9ydGZvbGlvXG4gICAgfVxuXG4gICAgLy8gRklSRSBUTyBQT1BVTEFURSBET00gV0lUSCBEQVRBXG4gICAgZ2V0UG9ydGZvbGlvKClcbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdzZWFyY2hDb250cm9sbGVyJywgc2VhcmNoQ29udHJvbGxlcilcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gc2VhcmNoQ29udHJvbGxlciAoJGh0dHAsICRzdGF0ZSkge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLnF1ZXJ5U3RvY2sgPSBxdWVyeVN0b2NrXG4gICAgdm0uZ2V0RGF0YSA9IGdldERhdGFcblxuICAgIGZ1bmN0aW9uIHF1ZXJ5U3RvY2sgKHN0b2NrKSB7XG4gICAgICByZXR1cm4gJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS9kYXRhL3N5bWJvbHMvJyArIHN0b2NrKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXVxuXG4gICAgICAgICAgcmVzLmRhdGEuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2goaXRlbS5zeW1ib2wpXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIHJldHVybiByZXN1bHRzXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RGF0YSAoaXRlbSkge1xuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgJHN0YXRlLnRyYW5zaXRpb25Ubygnc3RvY2snLCB7c3ltYm9sOiBpdGVtfSlcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZGlyZWN0aXZlKCdzZWFyY2gnLCBzZWFyY2gpXG5cbiAgZnVuY3Rpb24gc2VhcmNoICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29tcG9uZW50cy9zZWFyY2gvc2VhcmNoLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgY29udHJvbGxlcjogJ3NlYXJjaENvbnRyb2xsZXInLFxuICAgICAgY29udHJvbGxlckFzOiAnc2VhcmNoJ1xuICAgIH1cbiAgfVxufSkoKVxuIiwiOyhmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdwcm9maWxlQ29udHJvbGxlcicsIHByb2ZpbGVDb250cm9sbGVyKVxuXG4gIGZ1bmN0aW9uIHByb2ZpbGVDb250cm9sbGVyICgkaHR0cCwgcHJvZmlsZSkge1xuICAgIHZhciB2bSA9IHRoaXNcblxuICAgIHZtLnByb2ZpbGUgPSBwcm9maWxlLmdldFByb2ZpbGUoKVxuXG4gICAgcHJvZmlsZS5nZXRGdW5kcyhmdW5jdGlvbiAoZXJyLCBmdW5kcykge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB2bS5lcnJvciA9IGVyclxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm0uZnVuZHMgPSBmdW5kc1xuICAgICAgfVxuICAgIH0pXG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgncHJvZmlsZScsIFtdKVxuICAgIC5mYWN0b3J5KCdwcm9maWxlJywgcHJvZmlsZSlcblxuICBmdW5jdGlvbiBwcm9maWxlICgkaHR0cCkge1xuICAgIHJldHVybiB7XG4gICAgICBnZXRVc2VyOiBnZXRVc2VyLFxuICAgICAgZ2V0U3RvY2tBbmRGdW5kczogZ2V0U3RvY2tBbmRGdW5kcyxcbiAgICAgIGdldFByb2ZpbGU6IGdldFByb2ZpbGUsXG4gICAgICBnZXRGdW5kczogZ2V0RnVuZHMsXG4gICAgICBidXlTdG9jazogYnV5U3RvY2ssXG4gICAgICBzZWxsU3RvY2s6IHNlbGxTdG9jayxcbiAgICAgIHdlaWdodGVkQXZlcmFnZTogd2VpZ2h0ZWRBdmVyYWdlXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UHJvZmlsZSAoKSB7XG4gICAgICB2YXIgdXNlclByb2ZpbGUgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvZmlsZScpKVxuXG4gICAgICBpZiAofnVzZXJQcm9maWxlLm5hbWUuaW5kZXhPZignQCcpKSB7XG4gICAgICAgIHVzZXJQcm9maWxlLm5hbWUgPSB1c2VyUHJvZmlsZS5uYW1lLnNwbGl0KCdAJylbMF1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVzZXJQcm9maWxlXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VXNlciAoY2IpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5nZXQoJy9hcGkvdXNlci8nKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IocmVzLmRhdGEudXNlcilcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRGdW5kcyAoY2IpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5nZXQoJy9hcGkvdXNlci9mdW5kcy8nKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzLmRhdGEuZnVuZHMpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBjYignRXJyb3I6IENhbm5vdCBnZXQgZnVuZHMhJyArIGVyciwgbnVsbClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRTdG9ja0FuZEZ1bmRzIChzeW1ib2wsIGNiKSB7XG4gICAgICAkaHR0cFxuICAgICAgICAuZ2V0KCcvYXBpL3VzZXIvcG9ydGZvbGlvLycgKyBzeW1ib2wpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHN0b2NrOiByZXMuZGF0YS5zdG9jayxcbiAgICAgICAgICAgIGZ1bmRzOiByZXMuZGF0YS5mdW5kc1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYihudWxsLCBkYXRhKVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY2IoJ0Vycm9yOiBzdGF0dXMnICsgZXJyLnN0YXR1cywgbnVsbCwgbnVsbClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidXlTdG9jayAoc3ltYm9sLCBjb21wYW55LCBhdmdQcmljZSwgcHJpY2UsIHRvdGFsUXR5LCBmdW5kcywgZXhpc3RzLCBjYikge1xuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIHN5bWJvbDogc3ltYm9sLFxuICAgICAgICBjb21wYW55OiBjb21wYW55LFxuICAgICAgICBwcmljZTogYXZnUHJpY2UsXG4gICAgICAgIGJ1eVByaWNlOiBwcmljZSxcbiAgICAgICAgcXVhbnRpdHk6IHRvdGFsUXR5LFxuICAgICAgICBmdW5kczogZnVuZHMudG9GaXhlZCgzKSxcbiAgICAgICAgZXhpc3RzOiBleGlzdHNcbiAgICAgIH1cblxuICAgICAgJGh0dHBcbiAgICAgICAgLnBvc3QoJy9hcGkvdXNlci9idXknLCBkYXRhKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgY2IobnVsbCwgcmVzKVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgY2IoZXJyLCBudWxsKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbGxTdG9jayAoc3ltYm9sLCBjb21wYW55LCBzZWxsUHJpY2UsIHF1YW50aXR5LCBwcm9maXQsIHNlbGxBbGwsIGNiKSB7XG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgc3ltYm9sOiBzeW1ib2wsXG4gICAgICAgIGNvbXBhbnk6IGNvbXBhbnksXG4gICAgICAgIHNlbGxQcmljZTogc2VsbFByaWNlLFxuICAgICAgICBxdWFudGl0eTogcXVhbnRpdHksXG4gICAgICAgIHByb2ZpdDogcHJvZml0LFxuICAgICAgICBzZWxsQWxsOiBzZWxsQWxsXG4gICAgICB9XG5cbiAgICAgICRodHRwXG4gICAgICAgIC5wb3N0KCdhcGkvdXNlci9zZWxsJywgZGF0YSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgIGNiKG51bGwsIHJlcylcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICBjYihlcnIsIG51bGwpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2VpZ2h0ZWRBdmVyYWdlIChwcmV2UHJpY2UsIGN1cnJQcmljZSwgcHJldlF0eSwgY3VyclF0eSkge1xuICAgICAgcmV0dXJuICgoKHByZXZQcmljZSAqIHByZXZRdHkpICsgKGN1cnJQcmljZSAqIGN1cnJRdHkpKSAvIChwcmV2UXR5ICsgY3VyclF0eSkpLnRvRml4ZWQoMylcbiAgICB9XG4gIH1cbn0pKClcbiIsIjsoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCdcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignc2lkZW5hdkNvbnRyb2xsZXInLCBzaWRlbmF2Q29udHJvbGxlcilcblxuICBmdW5jdGlvbiBzaWRlbmF2Q29udHJvbGxlciAoJGh0dHAsICRyb290U2NvcGUsICRzY29wZSwgJGxvY2F0aW9uLCBhdXRoLCBzdG9yZSxcbiAgICBzaWRlbmF2LCBwcm9maWxlKSB7XG4gICAgdmFyIHZtID0gdGhpc1xuXG4gICAgdm0uZ2V0TmV3cyA9IGdldE5ld3NcbiAgICB2bS5sb2dvdXQgPSBsb2dvdXRcblxuICAgIHZtLmNsb3NlU2lkZW5hdiA9IHNpZGVuYXYuY2xvc2VTaWRlbmF2XG4gICAgdm0uYXV0aCA9IGF1dGhcblxuICAgIHZtLm1lc3NhZ2UgPSAnJ1xuICAgIHZtLnNpZGVuYXZTaG93ID0gZmFsc2VcblxuICAgIC8vIEtlZXAgcHJvZmlsZSBkYXRhIGFuZCBzaWRlbmF2IG9wZW4gb24gcGFnZSByZWZyZXNoXG4gICAgLy8gaWYgdXNlciBpcyBsb2dnZWQgaW5cbiAgICBpZiAodm0uYXV0aC5pc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIHZtLnByb2ZpbGUgPSBwcm9maWxlLmdldFByb2ZpbGUoKVxuICAgICAgdm0uc2lkZW5hdlNob3cgPSB0cnVlXG4gICAgICBnZXRGdW5kcygpXG4gICAgfVxuXG4gICAgJHNjb3BlLiRvbigndXNlckxvZ0luJywgZnVuY3Rpb24gKCkge1xuICAgICAgdm0ucHJvZmlsZSA9IHByb2ZpbGUuZ2V0UHJvZmlsZSgpXG4gICAgICB2bS5zaWRlbmF2U2hvdyA9IHRydWVcbiAgICAgIGdldEZ1bmRzKClcbiAgICB9KVxuXG4gICAgJHNjb3BlLiRvbigndHJhbnNhY3Rpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICBnZXRGdW5kcygpXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGdldEZ1bmRzICgpIHtcbiAgICAgIHByb2ZpbGUuZ2V0RnVuZHMoZnVuY3Rpb24gKGVyciwgZnVuZHMpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHZtLmVycm9yID0gZXJyXG4gICAgICAgIH1cbiAgICAgICAgdm0uZnVuZHMgPSBmdW5kc1xuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXROZXdzICgpIHtcbiAgICAgICRodHRwLmdldCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9uZXdzL0FBUEwnLCB7XG4gICAgICAgIHNraXBBdXRob3JpemF0aW9uOiB0cnVlXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICB2bS5tZXNzYWdlID0gcmVzcG9uc2UuZGF0YS5uZXdzLnN5bWJvbFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQgKCkge1xuICAgICAgLy8gVGhlIHNpZ25vdXQgbWV0aG9kIG9uIHRoZSBhdXRoIHNlcnZpY2VcbiAgICAgIC8vIHNldHMgaXNBdXRoZW50aWNhdGVkIHRvIGZhbHNlIGJ1dCB3ZVxuICAgICAgLy8gYWxzbyBuZWVkIHRvIHJlbW92ZSB0aGUgcHJvZmlsZSBhbmRcbiAgICAgIC8vIHRva2VuIGZyb20gbG9jYWwgc3RvcmFnZVxuICAgICAgYXV0aC5zaWdub3V0KClcbiAgICAgIHN0b3JlLnJlbW92ZSgncHJvZmlsZScpXG4gICAgICBzdG9yZS5yZW1vdmUoJ3Rva2VuJylcbiAgICAgIHZtLnNpZGVuYXZTaG93ID0gZmFsc2VcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbG9nZ2VkLWluJylcbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndXNlckxvZ091dCcpXG4gICAgICB2bS51c2VyTG9nZ2VkID0gZmFsc2VcbiAgICAgICRsb2NhdGlvbi5wYXRoKCcvaG9tZScpXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgnc2lkZW5hdicsIHNpZGVuYXYpXG5cbiAgZnVuY3Rpb24gc2lkZW5hdiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvc2lkZW5hdi9zaWRlbmF2LnRlbXBsYXRlLmh0bWwnLFxuICAgICAgY29udHJvbGxlcjogJ3NpZGVuYXZDb250cm9sbGVyJyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3NpZGVuYXYnXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ3NpZGVuYXYnLCBbXSlcbiAgICAuZmFjdG9yeSgnc2lkZW5hdicsIHNpZGVuYXYpXG5cbiAgZnVuY3Rpb24gc2lkZW5hdiAoJG1kU2lkZW5hdiwgYXV0aCwgc3RvcmUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG9nZ2xlU2lkZW5hdjogdG9nZ2xlU2lkZW5hdixcbiAgICAgIGNsb3NlU2lkZW5hdjogY2xvc2VTaWRlbmF2XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9nZ2xlU2lkZW5hdiAoaWQpIHtcbiAgICAgICRtZFNpZGVuYXYoaWQgfHwgJ2xlZnQnKS50b2dnbGUoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsb3NlU2lkZW5hdiAoaWQpIHtcbiAgICAgICRtZFNpZGVuYXYoaWQgfHwgJ2xlZnQnKS5jbG9zZSgpXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3N0b2NrQ29udHJvbGxlcicsIHN0b2NrQ29udHJvbGxlcilcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gc3RvY2tDb250cm9sbGVyICgkc3RhdGVQYXJhbXMsICRodHRwLCBkaWFsb2csIHByaWNlLCBuZXdzLCBhdmF0YXIpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICB2bS5sb2FkaW5nID0gZmFsc2VcblxuICAgIHZtLnNob3dCdXkgPSBkaWFsb2cuc2hvd0J1eVxuICAgIHZtLnNob3dTZWxsID0gZGlhbG9nLnNob3dTZWxsXG5cbiAgICBmdW5jdGlvbiBnZXREYXRhICgpIHtcbiAgICAgIHZtLmxvYWRpbmcgPSB0cnVlXG5cbiAgICAgICRodHRwXG4gICAgICAgIC5nZXQoJy9hcGkvZGF0YS9zeW1ib2wvJyArICRzdGF0ZVBhcmFtcy5zeW1ib2wgKyAnLycgKyAkc3RhdGVQYXJhbXMubWFya2V0KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgaWYgKHJlcy5kYXRhLmVycm9yKSB7XG4gICAgICAgICAgICB2bS5ub0NvbXBhbnkgPSByZXMuZGF0YS5lcnJvclxuICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZtLmNvbXBhbnkgPSByZXMuZGF0YS5kYXRhXG5cbiAgICAgICAgICAgIHByaWNlLmdldFByaWNlKCRzdGF0ZVBhcmFtcy5zeW1ib2wsICRzdGF0ZVBhcmFtcy5tYXJrZXQgfHwgdm0uY29tcGFueS5tYXJrZXQsIGZ1bmN0aW9uIChlcnIsIHJlcykge1xuICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2bS5wcmljZSA9IHJlc1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBuZXdzLmdldE5ld3MoJHN0YXRlUGFyYW1zLnN5bWJvbCwgZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICB2bS5uZXdzRXJyb3IgPSAnRXJyb3IgZ2V0dGluZyBuZXdzJ1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICB2bS5uZXdzID0gcmVzLmRhdGEubmV3cy5uZXdzXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICB2bS5uZXdzRXJyb3IgPSBlcnJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB2bS5hdmF0YXIgPSBhdmF0YXIuaW5pdGlhbHModm0uY29tcGFueS5jb21wYW55IHx8ICRzdGF0ZVBhcmFtcy5zeW1ib2wpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGdldERhdGEoKVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3Rvb2xiYXJDb250cm9sbGVyJywgdG9vbGJhckNvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gdG9vbGJhckNvbnRyb2xsZXIgKGF1dGgsIHN0b3JlLCAkbG9jYXRpb24sICRzY29wZSwgJHJvb3RTY29wZSwgc2lkZW5hdikge1xuICAgIHZhciB2bSA9IHRoaXNcbiAgICB2bS5sb2dpbiA9IGxvZ2luXG4gICAgdm0uYXV0aCA9IGF1dGhcbiAgICB2bS50b2dnbGVTaWRlbmF2ID0gc2lkZW5hdi50b2dnbGVTaWRlbmF2XG4gICAgdm0udXNlckxvZ2dlZCA9IGZhbHNlXG5cbiAgICBpZiAoYXV0aC5pc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIHZtLnVzZXJMb2dnZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgJHNjb3BlLiRvbigndXNlckxvZ091dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZtLnVzZXJMb2dnZWQgPSBmYWxzZVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBsb2dpbiAoKSB7XG4gICAgICAvLyBUaGUgYXV0aCBzZXJ2aWNlIGhhcyBhIHNpZ25pbiBtZXRob2QgdGhhdFxuICAgICAgLy8gbWFrZXMgdXNlIG9mIEF1dGgwTG9jay4gSWYgYXV0aGVudGljYXRpb25cbiAgICAgIC8vIGlzIHN1Y2Nlc3NmdWwsIHRoZSB1c2VyJ3MgcHJvZmlsZSBhbmQgdG9rZW5cbiAgICAgIC8vIGFyZSBzYXZlZCBpbiBsb2NhbCBzdG9yYWdlIHdpdGggdGhlIHN0b3JlIHNlcnZpY2VcbiAgICAgIGF1dGguc2lnbmluKHtcbiAgICAgICAgYXV0aFBhcmFtczoge1xuICAgICAgICAgIHNjb3BlOiAnb3BlbmlkIGVtYWlsJ1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAocHJvZmlsZSwgdG9rZW4pIHtcbiAgICAgICAgc3RvcmUuc2V0KCdwcm9maWxlJywgcHJvZmlsZSlcbiAgICAgICAgc3RvcmUuc2V0KCd0b2tlbicsIHRva2VuKVxuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2hvbWUnKVxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2xvZ2dlZC1pbicpXG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgndXNlckxvZ0luJylcbiAgICAgICAgdm0udXNlckxvZ2dlZCA9IHRydWVcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgIH0pXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgndG9vbGJhcicsIHRvb2xiYXIpXG5cbiAgZnVuY3Rpb24gdG9vbGJhciAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbXBvbmVudHMvdG9vbGJhci90b29sYmFyLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgY29udHJvbGxlcjogJ3Rvb2xiYXJDb250cm9sbGVyJyxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3Rvb2xiYXInXG4gICAgfVxuICB9XG59KSgpXG4iLCI7KGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ3RyYW5zYWN0aW9uc0NvbnRyb2xsZXInLCB0cmFuc2FjdGlvbnNDb250cm9sbGVyKVxuXG4gIGZ1bmN0aW9uIHRyYW5zYWN0aW9uc0NvbnRyb2xsZXIgKCRodHRwLCBhdmF0YXIpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICBmdW5jdGlvbiBnZXRUcmFuc2FjdGlvbnMgKCkge1xuICAgICAgJGh0dHBcbiAgICAgICAgLmdldCgnL2FwaS90cmFuc2FjdGlvbi9hbGwnKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgaWYgKHJlcy5kYXRhLmVycm9yKSB7XG4gICAgICAgICAgICB2bS5ub1RyYW5zYWN0aW9ucyA9IHJlcy5kYXRhLmVycm9yXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZtLnRyYW5zYWN0aW9ucyA9IHJlcy5kYXRhLnRyYW5zYWN0aW9uc1xuICAgICAgICAgICAgYXZhdGFyLnNldEF2YXRhcih2bS50cmFuc2FjdGlvbnMpXG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgdm0uZXJyb3IgPSBlcnJcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBnZXRUcmFuc2FjdGlvbnMoKVxuICB9XG59KSgpXG4iXX0=
